{"version":3,"sources":["/home/circleci/project/node_modules/monaco-editor/esm/vs/editor/edcore.main.js","/home/circleci/project/node_modules/react-monaco-editor/node_modules/prop-types/index.js","/home/circleci/project/node_modules/react-monaco-editor/lib/utils.js","/home/circleci/project/packages/webviz-core/node_modules/monaco-vim/lib/index.js","/home/circleci/project/packages/webviz-core/node_modules/monaco-vim/lib/cm/keymap_vim.js","/home/circleci/project/packages/webviz-core/node_modules/monaco-vim/lib/cm_adapter.js","webpack:///./node_modules/monaco-editor/esm/vs/editor/editor.main.js?ff03","/home/circleci/project/node_modules/monaco-editor/esm/vs/editor/editor.main.js","/home/circleci/project/node_modules/monaco-editor/esm/vs/language/css/monaco.contribution.js","/home/circleci/project/node_modules/monaco-editor/esm/vs/language/json/monaco.contribution.js","/home/circleci/project/node_modules/monaco-editor/esm/vs/language/html/monaco.contribution.js","/home/circleci/project/packages/webviz-core/node_modules/monaco-vim/lib/statusbar.js","/home/circleci/project/node_modules/react-monaco-editor/lib/index.js","/home/circleci/project/node_modules/react-monaco-editor/lib/editor.js","/home/circleci/project/node_modules/react-monaco-editor/node_modules/prop-types/factoryWithThrowingShims.js","/home/circleci/project/node_modules/react-monaco-editor/node_modules/prop-types/lib/ReactPropTypesSecret.js","/home/circleci/project/node_modules/react-monaco-editor/lib/diff.js","/home/circleci/project/node_modules/monaco-editor/esm/vs/basic-languages/abap/abap.contribution.js","/home/circleci/project/node_modules/monaco-editor/esm/vs/basic-languages/apex/apex.contribution.js","/home/circleci/project/node_modules/monaco-editor/esm/vs/basic-languages/azcli/azcli.contribution.js","/home/circleci/project/node_modules/monaco-editor/esm/vs/basic-languages/bat/bat.contribution.js","/home/circleci/project/node_modules/monaco-editor/esm/vs/basic-languages/cameligo/cameligo.contribution.js","/home/circleci/project/node_modules/monaco-editor/esm/vs/basic-languages/clojure/clojure.contribution.js","/home/circleci/project/node_modules/monaco-editor/esm/vs/basic-languages/coffee/coffee.contribution.js","/home/circleci/project/node_modules/monaco-editor/esm/vs/basic-languages/cpp/cpp.contribution.js","/home/circleci/project/node_modules/monaco-editor/esm/vs/basic-languages/csharp/csharp.contribution.js","/home/circleci/project/node_modules/monaco-editor/esm/vs/basic-languages/csp/csp.contribution.js","/home/circleci/project/node_modules/monaco-editor/esm/vs/basic-languages/css/css.contribution.js","/home/circleci/project/node_modules/monaco-editor/esm/vs/basic-languages/dockerfile/dockerfile.contribution.js","/home/circleci/project/node_modules/monaco-editor/esm/vs/basic-languages/fsharp/fsharp.contribution.js","/home/circleci/project/node_modules/monaco-editor/esm/vs/basic-languages/go/go.contribution.js","/home/circleci/project/node_modules/monaco-editor/esm/vs/basic-languages/graphql/graphql.contribution.js","/home/circleci/project/node_modules/monaco-editor/esm/vs/basic-languages/handlebars/handlebars.contribution.js","/home/circleci/project/node_modules/monaco-editor/esm/vs/basic-languages/html/html.contribution.js","/home/circleci/project/node_modules/monaco-editor/esm/vs/basic-languages/ini/ini.contribution.js","/home/circleci/project/node_modules/monaco-editor/esm/vs/basic-languages/java/java.contribution.js","/home/circleci/project/node_modules/monaco-editor/esm/vs/basic-languages/kotlin/kotlin.contribution.js","/home/circleci/project/node_modules/monaco-editor/esm/vs/basic-languages/less/less.contribution.js","/home/circleci/project/node_modules/monaco-editor/esm/vs/basic-languages/lua/lua.contribution.js","/home/circleci/project/node_modules/monaco-editor/esm/vs/basic-languages/markdown/markdown.contribution.js","/home/circleci/project/node_modules/monaco-editor/esm/vs/basic-languages/mips/mips.contribution.js","/home/circleci/project/node_modules/monaco-editor/esm/vs/basic-languages/msdax/msdax.contribution.js","/home/circleci/project/node_modules/monaco-editor/esm/vs/basic-languages/mysql/mysql.contribution.js","/home/circleci/project/node_modules/monaco-editor/esm/vs/basic-languages/objective-c/objective-c.contribution.js","/home/circleci/project/node_modules/monaco-editor/esm/vs/basic-languages/pascal/pascal.contribution.js","/home/circleci/project/node_modules/monaco-editor/esm/vs/basic-languages/pascaligo/pascaligo.contribution.js","/home/circleci/project/node_modules/monaco-editor/esm/vs/basic-languages/perl/perl.contribution.js","/home/circleci/project/node_modules/monaco-editor/esm/vs/basic-languages/pgsql/pgsql.contribution.js","/home/circleci/project/node_modules/monaco-editor/esm/vs/basic-languages/php/php.contribution.js","/home/circleci/project/node_modules/monaco-editor/esm/vs/basic-languages/postiats/postiats.contribution.js","/home/circleci/project/node_modules/monaco-editor/esm/vs/basic-languages/powerquery/powerquery.contribution.js","/home/circleci/project/node_modules/monaco-editor/esm/vs/basic-languages/powershell/powershell.contribution.js","/home/circleci/project/node_modules/monaco-editor/esm/vs/basic-languages/pug/pug.contribution.js","/home/circleci/project/node_modules/monaco-editor/esm/vs/basic-languages/python/python.contribution.js","/home/circleci/project/node_modules/monaco-editor/esm/vs/basic-languages/r/r.contribution.js","/home/circleci/project/node_modules/monaco-editor/esm/vs/basic-languages/razor/razor.contribution.js","/home/circleci/project/node_modules/monaco-editor/esm/vs/basic-languages/redis/redis.contribution.js","/home/circleci/project/node_modules/monaco-editor/esm/vs/basic-languages/redshift/redshift.contribution.js","/home/circleci/project/node_modules/monaco-editor/esm/vs/basic-languages/restructuredtext/restructuredtext.contribution.js","/home/circleci/project/node_modules/monaco-editor/esm/vs/basic-languages/ruby/ruby.contribution.js","/home/circleci/project/node_modules/monaco-editor/esm/vs/basic-languages/rust/rust.contribution.js","/home/circleci/project/node_modules/monaco-editor/esm/vs/basic-languages/sb/sb.contribution.js","/home/circleci/project/node_modules/monaco-editor/esm/vs/basic-languages/scheme/scheme.contribution.js","/home/circleci/project/node_modules/monaco-editor/esm/vs/basic-languages/scss/scss.contribution.js","/home/circleci/project/node_modules/monaco-editor/esm/vs/basic-languages/shell/shell.contribution.js","/home/circleci/project/node_modules/monaco-editor/esm/vs/basic-languages/solidity/solidity.contribution.js","/home/circleci/project/node_modules/monaco-editor/esm/vs/basic-languages/sophia/sophia.contribution.js","/home/circleci/project/node_modules/monaco-editor/esm/vs/basic-languages/sql/sql.contribution.js","/home/circleci/project/node_modules/monaco-editor/esm/vs/basic-languages/st/st.contribution.js","/home/circleci/project/node_modules/monaco-editor/esm/vs/basic-languages/swift/swift.contribution.js","/home/circleci/project/node_modules/monaco-editor/esm/vs/basic-languages/tcl/tcl.contribution.js","/home/circleci/project/node_modules/monaco-editor/esm/vs/basic-languages/twig/twig.contribution.js","/home/circleci/project/node_modules/monaco-editor/esm/vs/basic-languages/vb/vb.contribution.js","/home/circleci/project/node_modules/monaco-editor/esm/vs/basic-languages/xml/xml.contribution.js","/home/circleci/project/node_modules/monaco-editor/esm/vs/basic-languages/yaml/yaml.contribution.js","/home/circleci/project/node_modules/monaco-editor/esm/vs/editor/contrib/tokenization/tokenization.js"],"names":["module","exports","Object","defineProperty","value","processSize","size","test","concat","noop","initVimMode","editor","statusbarNode","arguments","length","undefined","StatusBarClass","_statusbar","sanitizer","vimAdapter","_keymap_vim","attach","statusBar","keyBuffer","on","mode","setMode","key","setKeyBuffer","toggleVisibility","closeInput","clear","setStatusBar","enumerable","get","_interopRequireDefault","obj","__esModule","Vim","_cm_adapter","_typeof","Symbol","iterator","constructor","prototype","defaultKeymap","keys","type","toKeys","context","action","motion","motionArgs","linewise","toJumplist","forward","wordEnd","bigWord","inclusive","explicitRepeat","toFirstChar","repeatOffset","isEdit","actionArgs","after","matchIndent","sameLine","operator","operatorArgs","indentRight","toLower","operatorMotionArgs","visualLine","shouldMoveCursor","insertAt","interlaceInsertRepeat","blockwise","replace","position","increase","backtrack","textObjectInner","searchArgs","querySrc","wholeWordOnly","defaultExCommandMap","name","shortName","possiblyAsync","excludeFromCommandHistory","Pos","detachVimMap","cm","next","attached","this","keyMap","vim","rmClass","getWrapperElement","attachVimMap","setOption","off","onCursorActivity","state","leaveVimMode","prev","signal","maybeInitVimState","enterVimMode","cmKey","vimKey","charAt","pieces","split","lastPiece","hasCharacter","i","piece","modifiers","specialKeys","isUpperCase","toLowerCase","join","cmKeyToVimKey","cmd","findKey","defineOption","val","getOption","Init","Enter","Backspace","Delete","Insert","numberRegex","wordCharTest","isWordChar","ch","bigWordCharTest","makeKeyRange","start","push","String","fromCharCode","upperCaseAlphabet","lowerCaseAlphabet","numbers","validMarks","validRegisters","isLine","line","firstLine","lastLine","isLowerCase","k","isWhiteSpaceString","isEndOfSentenceSymbol","indexOf","inArray","arr","options","defaultValue","aliases","callback","Error","cfg","option","scope","local","vimGlobalState","lastInsertModeKeyTimer","createInsertModeChanges","c","changes","expectCursorActivityForChange","MacroModeState","latestRegister","isPlaying","isRecording","replaySearchQueries","onRecordingDone","lastInsertModeChanges","inputState","InputState","lastEditInputState","lastEditActionCommand","lastHPos","lastHSPos","lastMotion","marks","fakeCursor","insertMode","insertModeRepeat","visualMode","visualBlock","lastSelection","lastPastedText","sel","resetVimGlobalState","pointer","head","tail","buffer","optionName","searchQuery","searchIsReversed","lastSubstituteReplacePart","jumpList","Array","cachedCursor","add","oldCur","newCur","curMark","useNextSlot","cursor","trashMark","setBookmark","markPos","find","cursorEqual","move","offset","mark","inc","getCursor","macroModeState","lastCharacterSearch","increment","selectedCharacter","registerController","RegisterController","searchHistoryController","HistoryController","exCommandHistoryController","exitMacroRecordMode","enterMacroRecordMode","registerName","register","getRegister","openDialog","bottom","vimApi","buildKeyMap","getRegisterController","resetVimGlobalState_","getVimGlobalState_","maybeInitVimState_","suppressErrorLogging","InsertModeKey","map","lhs","rhs","ctx","exCommandDispatcher","unmap","defineEx","prefix","func","exCommands","commandMap_","handleKey","origin","command","handleMacroRecording","clearInputState","pushText","logKey","handleEsc","exitVisualMode","exitInsertMode","keysAreChars","match","commandDispatcher","matchCommand","slice","thisMatch","window","clearTimeout","setTimeout","selections","listSelections","here","replaceRange","offsetCursor","pop","handleKeyInsertMode","keysMatcher","exec","pushRepeatDigit","handleKeyNonInsertMode","operation","curOp","isVimOp","substring","index","doKeyToKey","processCommand","e","console","handleEx","input","defineMotion","fn","motions","defineAction","actions","defineOperator","operators","mapCommand","args","extra","_mapCommand","defineRegister","registers","prefixRepeat","motionRepeat","reason","Register","text","insertModeChanges","searchQueries","unnamedRegister","historyBuffer","initialPrefix","n","getRepeat","repeat","parseInt","setText","pushInsertModeChanges","pushSearchQuery","query","toString","isValidRegister","shiftNumericRegisters_","nextMatch","up","dir","element","j","pushInput","splice","reset","bestMatch","matches","partial","full","commandMatch","commandMatches","character","lastChar","repeatOverride","processMotion","processOperator","processOperatorMotion","processAction","processSearch","processEx","copyArgs","evalInput","repeatIsExplicit","recordLastEdit","getSearchCursor","getSearchState","setReversed","promptPrefix","originalQuery","getQuery","originalScrollPos","getScrollInfo","handleQuery","shift","showPrompt","onClose","scrollTo","left","top","logSearchQuery","desc","searchPromptDesc","onKeyUp","close","parsedQuery","keyName","target","selectionEnd","selectionStart","Math","min","updateSearchQuery","scrollIntoView","_findNext","clearSearchHighlight","onKeyDown","e_stop","focus","word","expandWordUnderCursor","isKeyword","getLine","end","setCursor","ignoreCase","smartCase","showConfirm","onPromptClose","onPromptKeyDown","exArgs","selectValueOnOpen","newHead","newAnchor","origHead","copyCursor","clipCursorToContent","origAnchor","anchor","oldHead","oldAnchor","noRepeat","motionResult","recordJumpPosition","Infinity","updateCmSelection","updateMark","cursorIsBefore","lastSel","lineOffset","abs","chOffset","curStart","curEnd","cmSel","cursorMin","cursorMax","makeCmSelection","ranges","lineLength","tmp","_cm","expandSelectionToLine","selection","getRange","lines","clipToLine","setSelections","primary","operatorMoveTo","actionCommand","moveToTopLine","_head","getUserVisibleLines","findFirstNonWhiteSpaceCharacter","moveToMiddleLine","range","floor","moveToBottomLine","expandToLine","findNext","isReversed","highlightSearchMatches","goToMark","pos","getMarkPos","moveToOtherHighlightedEnd","jumpToMark","best","equal","between","cursorIsBetween","moveByCharacters","cur","moveByLines","endCh","moveByDisplayLines","moveByScroll","moveToColumn","moveToEol","first","last","moveToStartOfLine","charCoords","res","findPosV","hitSide","goalCoords","coordsChar","resCoords","moveByPage","moveByParagraph","findParagraph","moveBySentence","nextChar","idx","ln","stop","curr","last_valid","skip_empty_lines","reverse","curr_index","findSentence","scrollbox","clientHeight","defaultTextHeight","orig","dest","moveByWords","words","emptyLineIsWord","findWord","eodCh","from","to","shortCircuit","firstWord","lastWord","moveToWord","moveTillCharacter","_moveToCharacter","recordLastCharacterSearch","moveToCharacter","moveToSymbol","symb","endLine","lineCount","curCh","lineText","nextCh","lastCh","reverseSymb","depth","curMoveThrough","symbolToMode","init","findSymbolModes","isComplete","lineLen","findSymbol","_moveToColumn","retval","clipPos","moveToFirstNonWhiteSpaceCharacter","moveToMatchedSymbol","findMatchingBracket","moveToLineOrEdgeOfDocument","lineNum","textObjectManipulation","bracketRegexp","openSym","scanForBracket","selectCompanionObject","'","len","chars","firstIndex","findBeginningAndEnd","expandSelection","repeatLastCharacterSearch","lastSearch","moveH","fillArray","times","change","finalHead","inVisualBlock","getSelection","replacement","replaceSelections","lastState","prevLineEnd","Number","MAX_VALUE","wasLastLine","commands","newlineAndIndent","enterInsertMode","pushUndoStop","indent","startLine","indentLine","changeCase","getSelections","swapped","toSwap","toUpperCase","yank","endPos","jumpListWalk","scroll","lineHeight","delta","newPos","cursorCoords","ceil","newBottom","scrollToCursor","moveCurrentLineTo","replayMacro","executeMacroRegister","toggleOverwrite","replaceMode","height","max","onChange","getInputField","onKeyEventTargetKeyDown","selectForInsert","toggleVisualMode","subMode","reselectLastSelection","_actionArgs","updateLastSelection","anchorMark","headMark","joinLines","finalCh","curFinalPos","newLineAndEnterInsertMode","newlineAndIndentContinueComment","paste","tabSize","whitespaceLength","str","tabs","spaces","currentLine","chompedText","wasChomped","firstIndent","wspace","newIndent","quotient","curPosFinal","lastSelectionCurEnd","selectedArea","getCurrentSelectedAreaRange","block","width","setSelection","getLastSelectedAreaRange","getSelectedAreaRange","selectedText","emptyStrings","selectBlock","posFromIndex","indexFromPos","extendLineToColumn","undo","repeatFn","redo","setRegister","setMark","replaceTo","replaceWith","replaceWithStr","incrementNumberToken","numberStr","lineStr","re","baseStr","digits","base","zeroPadding","substr","repeatLastEdit","_repeatLastEdit","includeLineBreak","maxCh","ret","prop","hasOwnProperty","offsetLine","offsetCh","pressed","mapped","prefixLen","pressedPrefix","mappedPrefix","cur1","cur2","apply","call","cur3","cur1before2","cur2before3","trim","s","column","isClipped","primIndex","atAnchor","atHead","getIndex","wasClipped","baseCh","headCh","newDir","lineHead","updateFakeCursor","exclusive","headOffset","anchorOffset","right","moveHead","_forward","noSymbol","getHead","wordStart","bracket","section","comment","found","method","preprocess","token","charTests","foundWord","charIdxInLine","markName","includeChar","lastIndexOf","isEmpty","isBoundary","any","startState","SearchState","searchState_","dialog","template","shortText","prompt","splitBySeparator","argString","separator","slashes","findUnescapedSeparators","tokens","escapeNextChar","setQuery","getOverlay","searchOverlay","setOverlay","overlay","reversed","getScrollbarAnnotate","annotate","setScrollbarAnnotate","charUnescapes","unescapes","parseQuery","RegExp","regexPart","forceIgnoreCase","out","specialComesNext","translateRegex","openNotification","duration","alert","raw","rawQuery","r1","r2","props","regexEqual","searchState","removeOverlay","source","matchSol","stream","sol","backUp","eol","skipToEnd","addOverlay","showMatchesOnScrollbar","isInRange","history","doc","done","event","lastModTime","changeHistory","filter","el","ExCommandDispatcher","buildCommandMap_","opt_params","that","_processCommand","commandHistoryRegister","previousCommand","inputStream","StringStream","commandName","params","parseInput_","matchCommand_","parseCommandArgs_","toInput","result","eatWhile","eat","lineEnd","parseLineSpec_","numberMatch","parseLineSpecOffset_","offsetMatch","delim","argDelimiter","user","mapping","unshift","colorscheme","mapArgs","imap","nmap","vmap","set","setArgs","setCfg","expr","forceGet","optionIsBoolean","oldValue","message","setOptionReturn","setlocal","setglobal","regArgs","regInfo","sort","unique","number","pattern","err","eatSpace","opts","decimal","hex","octal","parseArgs","lineStart","radix","numPart","textPart","matchPart","a","b","compareFn","textOld","anum","bnum","global","splitBySlash","matchedLines","content","nextCommand","substitute","trailing","flagsPart","count","replacePart","confirm","output","peek","matched","matcher","unescapeRegexReplace","translateRegexReplace","startPos","searchCursor","exMode","lastPos","replaceAll","getMatches","matchesLength","replaceAllNext","bind","newText","hasNext","jumpTo","_value","savedCallback","doReplace","write","save","nohlsearch","delmarks","sym","startMark","finishMark","charCodeAt","finish","insertModeChangeRegister","lastChange","selLength","logInsertModeChange","imc","repeatInsertModeChanges","changeObj","maybeReset","overwrite","somethingSelected","handleExternalSelection","markText","className","lookupKey","repeatForInsert","isAction","cachedInputState","repeatCommand","repeatInsert","changeObject","keyHandler","binding","getOffset","detach","fallthrough","_default","_monacoEditor","_cursorTypeOperations","_slicedToArray","isArray","_arrayWithHoles","_arr","_n","_d","_e","_s","_i","_iterableToArrayLimit","TypeError","_nonIterableRest","_classCallCheck","instance","Constructor","_defineProperties","descriptor","configurable","writable","_createClass","protoProps","staticProps","VerticalRevealType","EditorOptConstants","readOnly","cursorWidth","fontInfo","_window$navigator","navigator","userAgent","platform","nonASCIISingleCaseWordChar","normalize","string","lastColumnPos","lastColumnValue","toCmPos","lineNumber","toMonacoPos","Position","ok","skipTo","indentation","consume","caseInsensitive","cased","current","hideFirstChars","inner","Marker","id","monacoToCmKey","skip","addQuotes","monaco","KeyCode","keyCode","skipOnlyShiftCheck","Shift","Meta","Alt","Ctrl","Escape","startsWith","endsWith","browserEvent","altKey","ctrlKey","metaKey","shiftKey","CMAdapter","_initialiseProps","$uid","disposables","listeners","addLocalListeners","ctxInsert","createContextKey","onDidChangeCursorPosition","handleCursorChange","onDidChangeModelContent","handleChange","handleKeyDown","fromReplace","_char","getPosition","Range","lastItem","replaceStack","preventDefault","stopPropagation","getModel","getValueInRange","executeEdits","forceMoveMarkers","setPosition","getStartPosition","setTheme","getConfiguration","EditorOption","viewInfo","getOptions","insertSpaces","getRawConfiguration","getRawOptions","_len","_key","forEach","handler","l","getLineCount","maxLines","getLineContent","getDirection","SelectionDirection","LTR","getEndPosition","getAnchorForSelection","getHeadForSelection","p1","p2","fromPositions","monacoPos","validatePosition","revealPosition","force","_this","inVirtualSelectionMode","hasSel","sels","Selection","posToReveal","frm","texts","toggle","p","bm","insertLeft","$insertRight","getVisibleRanges","startLineNumber","endLineNumber","trigger","dispatch","d","dispose","config","initialCursorWidth","updateOptions","typicalFullwidthCharacterWidth","cursorBlinking","reduce","acc","amount","unit","finalAmount","editorHeight","getLayoutInfo","mPos","matchBracket","getLineFirstNonWhitespaceColumn","x","y","setScrollTop","getTopForLineNumber","viewPosition","revealRangeAtTop","revealRangeInCenter","_revealRange","caseFold","matchCase","isRegex","model","findMatches","findPrevious","highlightRanges","m","r","equalsRange","back","_pos","findPreviousMatch","isBeforeOrEqual","_pos2","findNextMatch","setEndPosition","decorationKey","deltaDecorations","stickiness","TrackedRangeStickiness","NeverGrowsWhenTypingAtEdges","zIndex","showIfCollapsed","_ref","hasBoundary","style","_this2","units","dd","bracketRange","findMatchingBracketUp","getOffsetAt","getPositionAt","cursors","_getCursors","executeCommands","TypeOperations","html","setSec","showNotification","addClass","cancelBubble","e_preventDefault","returnValue","triggerEditorAction","handle","defineExtension","_this3","defaultPrevented","handleReplaceMode","error","maxCol","getLineMaxColumn","changeHandlers","virtualSelectionMode","_default2","paths","self","getWorkerUrl","moduleId","label","pathPrefix","currentUrl","location","currentOrigin","hash","search","pathname","encodeURIComponent","Emitter","LanguageServiceDefaultsImpl","languageId","diagnosticsOptions","modeConfiguration","_onDidChange","_languageId","setDiagnosticsOptions","setModeConfiguration","_modeConfiguration","_diagnosticsOptions","create","fire","diagnosticDefault","validate","lint","compatibleVendorPrefixes","vendorPrefix","duplicateProperties","emptyRules","importStatement","boxModel","universalSelector","zeroUnits","fontFaceProperties","hexColorLength","argumentsInColorFunction","unknownProperties","ieHack","unknownVendorSpecificProperties","propertyIgnoredDueToDisplay","important","float","idSelector","modeConfigurationDefault","completionItems","hovers","documentSymbols","definitions","references","documentHighlights","rename","colors","foldingRanges","diagnostics","selectionRanges","cssDefaults","scssDefaults","lessDefaults","getMode","languages","css","onLanguage","then","setupMode","jsonDefaults","allowComments","schemas","enableSchemaRequest","documentFormattingEdits","documentRangeFormattingEdits","json","extensions","mimetypes","setOptions","_options","formatDefaults","wrapLineLength","unformatted","contentUnformatted","indentInnerHtml","preserveNewLines","maxPreserveNewLines","indentHandlebars","endWithNewline","extraLiners","wrapAttributes","handlebarOptionsDefault","format","suggest","html5","razorOptionsDefault","razor","getConfigurationDefault","links","htmlLanguageId","htmlDefaults","angular1","ionic","handlebarDefaults","razorDefaults","VimStatusBar","node","removeInputListeners","setInnerHtml_","inputKeyUp","inputBlur","closeOnBlur","inputKeyDown","_this$input","closeOnEnter","blur","modeInfoNode","document","createElement","secInfoNode","notifNode","keyInfoNode","setAttribute","appendChild","ev","textContent","querySelector","select","addInputListeners","display","clearInterval","notifTimeout","addEventListener","inputKeyInput","removeEventListener","sp","htmlContents","children","removeChild","innerHTML","_editor","_diff","cache","_getRequireWildcardCache","has","newObj","hasPropertyDescriptor","getOwnPropertyDescriptor","_interopRequireWildcard","_propTypes","_react","_utils","WeakMap","ownKeys","object","enumerableOnly","getOwnPropertySymbols","symbols","_setPrototypeOf","o","setPrototypeOf","__proto__","_possibleConstructorReturn","_assertThisInitialized","ReferenceError","_isNativeReflectConstruct","Reflect","construct","sham","Proxy","Date","_getPrototypeOf","getPrototypeOf","_defineProperty","MonacoEditor","_React$Component","subClass","superClass","_inherits","Derived","_super","Super","NewTarget","component","containerElement","initMonaco","prevProps","_this$props","language","theme","getValue","__prevent_trigger_change_event","pushEditOperations","getFullModelRange","setModelLanguage","layout","destroyMonaco","_subscription","_this$props2","overrideServices","assign","editorWillMount","getOwnPropertyDescriptors","defineProperties","_objectSpread","editorDidMount","_this$props3","ref","assignRef","Component","propTypes","oneOfType","defaultProps","ReactPropTypesSecret","emptyFunction","emptyFunctionWithReset","resetWarningCache","shim","propName","componentName","propFullName","secret","getShim","isRequired","ReactPropTypes","array","bool","symbol","arrayOf","elementType","instanceOf","objectOf","oneOf","shape","exact","checkPropTypes","PropTypes","MonacoDiffEditor","_this$editor$getModel","original","modified","setValue","modifiedEditor","onDidChangeContent","originalModel","createModel","modifiedModel","setModel","createDiffEditor","initModels","_this$editor$getModel2","loader","filenames","extendStatics","__extends","__","ForceRetokenizeAction","nls","alias","precondition","run","accessor","hasModel","resetTokenization","sw","forceTokenization","log","elapsed"],"mappings":"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","file":"vendors~node-playground-editor.js","sourcesContent":["/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\r\nimport './editor.all.js';\r\nimport './standalone/browser/accessibilityHelp/accessibilityHelp.js';\r\nimport './standalone/browser/iPadShowKeyboard/iPadShowKeyboard.js';\r\nimport './standalone/browser/inspectTokens/inspectTokens.js';\r\nimport './standalone/browser/quickOpen/gotoLine.js';\r\nimport './standalone/browser/quickOpen/quickCommand.js';\r\nimport './standalone/browser/quickOpen/quickOutline.js';\r\nimport './standalone/browser/referenceSearch/standaloneReferenceSearch.js';\r\nimport './standalone/browser/toggleHighContrast/toggleHighContrast.js';\r\nexport * from './editor.api.js';\r\n","/**\n * Copyright (c) 2013-present, Facebook, Inc.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\nif (process.env.NODE_ENV !== 'production') {\n  var ReactIs = require('react-is');\n\n  // By explicitly using `prop-types` you are opting into new development behavior.\n  // http://fb.me/prop-types-in-prod\n  var throwOnDirectAccess = true;\n  module.exports = require('./factoryWithTypeCheckers')(ReactIs.isElement, throwOnDirectAccess);\n} else {\n  // By explicitly using `prop-types` you are opting into new production behavior.\n  // http://fb.me/prop-types-in-prod\n  module.exports = require('./factoryWithThrowingShims')();\n}\n","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.processSize = processSize;\nexports.noop = noop;\n\nfunction processSize(size) {\n  return !/^\\d+$/.test(size) ? size : \"\".concat(size, \"px\");\n}\n\nfunction noop() {}","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.initVimMode = initVimMode;\nObject.defineProperty(exports, \"VimMode\", {\n  enumerable: true,\n  get: function get() {\n    return _keymap_vim[\"default\"];\n  }\n});\nObject.defineProperty(exports, \"StatusBar\", {\n  enumerable: true,\n  get: function get() {\n    return _statusbar[\"default\"];\n  }\n});\n\nvar _keymap_vim = _interopRequireDefault(require(\"./cm/keymap_vim\"));\n\nvar _statusbar = _interopRequireDefault(require(\"./statusbar\"));\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { \"default\": obj }; }\n\nfunction initVimMode(editor) {\n  var statusbarNode = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : null;\n  var StatusBarClass = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : _statusbar[\"default\"];\n  var sanitizer = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : null;\n  var vimAdapter = new _keymap_vim[\"default\"](editor);\n\n  if (!statusbarNode) {\n    vimAdapter.attach();\n    return vimAdapter;\n  }\n\n  var statusBar = new StatusBarClass(statusbarNode, editor, sanitizer);\n  var keyBuffer = '';\n  vimAdapter.on('vim-mode-change', function (mode) {\n    statusBar.setMode(mode);\n  });\n  vimAdapter.on('vim-keypress', function (key) {\n    if (key === ':') {\n      keyBuffer = '';\n    } else {\n      keyBuffer += key;\n    }\n\n    statusBar.setKeyBuffer(keyBuffer);\n  });\n  vimAdapter.on('vim-command-done', function () {\n    keyBuffer = '';\n    statusBar.setKeyBuffer(keyBuffer);\n  });\n  vimAdapter.on('dispose', function () {\n    statusBar.toggleVisibility(false);\n    statusBar.closeInput();\n    statusBar.clear();\n  });\n  statusBar.toggleVisibility(true);\n  vimAdapter.setStatusBar(statusBar);\n  vimAdapter.attach();\n  return vimAdapter;\n}","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports[\"default\"] = exports.Vim = void 0;\n\nvar _cm_adapter = _interopRequireDefault(require(\"../cm_adapter\"));\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { \"default\": obj }; }\n\nfunction _typeof(obj) { if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") { _typeof = function _typeof(obj) { return typeof obj; }; } else { _typeof = function _typeof(obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }; } return _typeof(obj); }\n\nvar defaultKeymap = [// Key to key mapping. This goes first to make it possible to override\n// existing mappings.\n{\n  keys: '<Left>',\n  type: 'keyToKey',\n  toKeys: 'h'\n}, {\n  keys: '<Right>',\n  type: 'keyToKey',\n  toKeys: 'l'\n}, {\n  keys: '<Up>',\n  type: 'keyToKey',\n  toKeys: 'k'\n}, {\n  keys: '<Down>',\n  type: 'keyToKey',\n  toKeys: 'j'\n}, {\n  keys: '<Space>',\n  type: 'keyToKey',\n  toKeys: 'l'\n}, {\n  keys: '<BS>',\n  type: 'keyToKey',\n  toKeys: 'h',\n  context: 'normal'\n}, {\n  keys: '<C-Space>',\n  type: 'keyToKey',\n  toKeys: 'W'\n}, {\n  keys: '<C-BS>',\n  type: 'keyToKey',\n  toKeys: 'B',\n  context: 'normal'\n}, {\n  keys: '<S-Space>',\n  type: 'keyToKey',\n  toKeys: 'w'\n}, {\n  keys: '<S-BS>',\n  type: 'keyToKey',\n  toKeys: 'b',\n  context: 'normal'\n}, {\n  keys: '<C-n>',\n  type: 'keyToKey',\n  toKeys: 'j'\n}, {\n  keys: '<C-p>',\n  type: 'keyToKey',\n  toKeys: 'k'\n}, {\n  keys: '<C-[>',\n  type: 'keyToKey',\n  toKeys: '<Esc>'\n}, {\n  keys: '<C-c>',\n  type: 'keyToKey',\n  toKeys: '<Esc>'\n}, {\n  keys: '<C-[>',\n  type: 'keyToKey',\n  toKeys: '<Esc>',\n  context: 'insert'\n}, {\n  keys: '<C-c>',\n  type: 'keyToKey',\n  toKeys: '<Esc>',\n  context: 'insert'\n}, {\n  keys: 's',\n  type: 'keyToKey',\n  toKeys: 'cl',\n  context: 'normal'\n}, {\n  keys: 's',\n  type: 'keyToKey',\n  toKeys: 'c',\n  context: 'visual'\n}, {\n  keys: 'S',\n  type: 'keyToKey',\n  toKeys: 'cc',\n  context: 'normal'\n}, {\n  keys: 'S',\n  type: 'keyToKey',\n  toKeys: 'VdO',\n  context: 'visual'\n}, {\n  keys: '<Home>',\n  type: 'keyToKey',\n  toKeys: '0'\n}, {\n  keys: '<End>',\n  type: 'keyToKey',\n  toKeys: '$'\n}, {\n  keys: '<PageUp>',\n  type: 'keyToKey',\n  toKeys: '<C-b>'\n}, {\n  keys: '<PageDown>',\n  type: 'keyToKey',\n  toKeys: '<C-f>'\n}, {\n  keys: '<CR>',\n  type: 'keyToKey',\n  toKeys: 'j^',\n  context: 'normal'\n}, {\n  keys: '<CR>',\n  type: 'keyToKey',\n  toKeys: 'j^',\n  context: 'visual'\n}, {\n  keys: '<Ins>',\n  type: 'action',\n  action: 'toggleOverwrite',\n  context: 'insert'\n}, // Motions\n{\n  keys: 'H',\n  type: 'motion',\n  motion: 'moveToTopLine',\n  motionArgs: {\n    linewise: true,\n    toJumplist: true\n  }\n}, {\n  keys: 'M',\n  type: 'motion',\n  motion: 'moveToMiddleLine',\n  motionArgs: {\n    linewise: true,\n    toJumplist: true\n  }\n}, {\n  keys: 'L',\n  type: 'motion',\n  motion: 'moveToBottomLine',\n  motionArgs: {\n    linewise: true,\n    toJumplist: true\n  }\n}, {\n  keys: 'h',\n  type: 'motion',\n  motion: 'moveByCharacters',\n  motionArgs: {\n    forward: false\n  }\n}, {\n  keys: 'l',\n  type: 'motion',\n  motion: 'moveByCharacters',\n  motionArgs: {\n    forward: true\n  }\n}, {\n  keys: 'j',\n  type: 'motion',\n  motion: 'moveByLines',\n  motionArgs: {\n    forward: true,\n    linewise: true\n  }\n}, {\n  keys: 'k',\n  type: 'motion',\n  motion: 'moveByLines',\n  motionArgs: {\n    forward: false,\n    linewise: true\n  }\n}, {\n  keys: 'gj',\n  type: 'motion',\n  motion: 'moveByDisplayLines',\n  motionArgs: {\n    forward: true\n  }\n}, {\n  keys: 'gk',\n  type: 'motion',\n  motion: 'moveByDisplayLines',\n  motionArgs: {\n    forward: false\n  }\n}, {\n  keys: 'w',\n  type: 'motion',\n  motion: 'moveByWords',\n  motionArgs: {\n    forward: true,\n    wordEnd: false\n  }\n}, {\n  keys: 'W',\n  type: 'motion',\n  motion: 'moveByWords',\n  motionArgs: {\n    forward: true,\n    wordEnd: false,\n    bigWord: true\n  }\n}, {\n  keys: 'e',\n  type: 'motion',\n  motion: 'moveByWords',\n  motionArgs: {\n    forward: true,\n    wordEnd: true,\n    inclusive: true\n  }\n}, {\n  keys: 'E',\n  type: 'motion',\n  motion: 'moveByWords',\n  motionArgs: {\n    forward: true,\n    wordEnd: true,\n    bigWord: true,\n    inclusive: true\n  }\n}, {\n  keys: 'b',\n  type: 'motion',\n  motion: 'moveByWords',\n  motionArgs: {\n    forward: false,\n    wordEnd: false\n  }\n}, {\n  keys: 'B',\n  type: 'motion',\n  motion: 'moveByWords',\n  motionArgs: {\n    forward: false,\n    wordEnd: false,\n    bigWord: true\n  }\n}, {\n  keys: 'ge',\n  type: 'motion',\n  motion: 'moveByWords',\n  motionArgs: {\n    forward: false,\n    wordEnd: true,\n    inclusive: true\n  }\n}, {\n  keys: 'gE',\n  type: 'motion',\n  motion: 'moveByWords',\n  motionArgs: {\n    forward: false,\n    wordEnd: true,\n    bigWord: true,\n    inclusive: true\n  }\n}, {\n  keys: '{',\n  type: 'motion',\n  motion: 'moveByParagraph',\n  motionArgs: {\n    forward: false,\n    toJumplist: true\n  }\n}, {\n  keys: '}',\n  type: 'motion',\n  motion: 'moveByParagraph',\n  motionArgs: {\n    forward: true,\n    toJumplist: true\n  }\n}, {\n  keys: '(',\n  type: 'motion',\n  motion: 'moveBySentence',\n  motionArgs: {\n    forward: false\n  }\n}, {\n  keys: ')',\n  type: 'motion',\n  motion: 'moveBySentence',\n  motionArgs: {\n    forward: true\n  }\n}, {\n  keys: '<C-f>',\n  type: 'motion',\n  motion: 'moveByPage',\n  motionArgs: {\n    forward: true\n  }\n}, {\n  keys: '<C-b>',\n  type: 'motion',\n  motion: 'moveByPage',\n  motionArgs: {\n    forward: false\n  }\n}, {\n  keys: '<C-d>',\n  type: 'motion',\n  motion: 'moveByScroll',\n  motionArgs: {\n    forward: true,\n    explicitRepeat: true\n  }\n}, {\n  keys: '<C-u>',\n  type: 'motion',\n  motion: 'moveByScroll',\n  motionArgs: {\n    forward: false,\n    explicitRepeat: true\n  }\n}, {\n  keys: 'gg',\n  type: 'motion',\n  motion: 'moveToLineOrEdgeOfDocument',\n  motionArgs: {\n    forward: false,\n    explicitRepeat: true,\n    linewise: true,\n    toJumplist: true\n  }\n}, {\n  keys: 'G',\n  type: 'motion',\n  motion: 'moveToLineOrEdgeOfDocument',\n  motionArgs: {\n    forward: true,\n    explicitRepeat: true,\n    linewise: true,\n    toJumplist: true\n  }\n}, {\n  keys: '0',\n  type: 'motion',\n  motion: 'moveToStartOfLine'\n}, {\n  keys: '^',\n  type: 'motion',\n  motion: 'moveToFirstNonWhiteSpaceCharacter'\n}, {\n  keys: '+',\n  type: 'motion',\n  motion: 'moveByLines',\n  motionArgs: {\n    forward: true,\n    toFirstChar: true\n  }\n}, {\n  keys: '-',\n  type: 'motion',\n  motion: 'moveByLines',\n  motionArgs: {\n    forward: false,\n    toFirstChar: true\n  }\n}, {\n  keys: '_',\n  type: 'motion',\n  motion: 'moveByLines',\n  motionArgs: {\n    forward: true,\n    toFirstChar: true,\n    repeatOffset: -1\n  }\n}, {\n  keys: '$',\n  type: 'motion',\n  motion: 'moveToEol',\n  motionArgs: {\n    inclusive: true\n  }\n}, {\n  keys: '%',\n  type: 'motion',\n  motion: 'moveToMatchedSymbol',\n  motionArgs: {\n    inclusive: true,\n    toJumplist: true\n  }\n}, {\n  keys: 'f<character>',\n  type: 'motion',\n  motion: 'moveToCharacter',\n  motionArgs: {\n    forward: true,\n    inclusive: true\n  }\n}, {\n  keys: 'F<character>',\n  type: 'motion',\n  motion: 'moveToCharacter',\n  motionArgs: {\n    forward: false\n  }\n}, {\n  keys: 't<character>',\n  type: 'motion',\n  motion: 'moveTillCharacter',\n  motionArgs: {\n    forward: true,\n    inclusive: true\n  }\n}, {\n  keys: 'T<character>',\n  type: 'motion',\n  motion: 'moveTillCharacter',\n  motionArgs: {\n    forward: false\n  }\n}, {\n  keys: ';',\n  type: 'motion',\n  motion: 'repeatLastCharacterSearch',\n  motionArgs: {\n    forward: true\n  }\n}, {\n  keys: ',',\n  type: 'motion',\n  motion: 'repeatLastCharacterSearch',\n  motionArgs: {\n    forward: false\n  }\n}, {\n  keys: '\\'<character>',\n  type: 'motion',\n  motion: 'goToMark',\n  motionArgs: {\n    toJumplist: true,\n    linewise: true\n  }\n}, {\n  keys: '`<character>',\n  type: 'motion',\n  motion: 'goToMark',\n  motionArgs: {\n    toJumplist: true\n  }\n}, {\n  keys: ']`',\n  type: 'motion',\n  motion: 'jumpToMark',\n  motionArgs: {\n    forward: true\n  }\n}, {\n  keys: '[`',\n  type: 'motion',\n  motion: 'jumpToMark',\n  motionArgs: {\n    forward: false\n  }\n}, {\n  keys: ']\\'',\n  type: 'motion',\n  motion: 'jumpToMark',\n  motionArgs: {\n    forward: true,\n    linewise: true\n  }\n}, {\n  keys: '[\\'',\n  type: 'motion',\n  motion: 'jumpToMark',\n  motionArgs: {\n    forward: false,\n    linewise: true\n  }\n}, // the next two aren't motions but must come before more general motion declarations\n{\n  keys: ']p',\n  type: 'action',\n  action: 'paste',\n  isEdit: true,\n  actionArgs: {\n    after: true,\n    isEdit: true,\n    matchIndent: true\n  }\n}, {\n  keys: '[p',\n  type: 'action',\n  action: 'paste',\n  isEdit: true,\n  actionArgs: {\n    after: false,\n    isEdit: true,\n    matchIndent: true\n  }\n}, {\n  keys: ']<character>',\n  type: 'motion',\n  motion: 'moveToSymbol',\n  motionArgs: {\n    forward: true,\n    toJumplist: true\n  }\n}, {\n  keys: '[<character>',\n  type: 'motion',\n  motion: 'moveToSymbol',\n  motionArgs: {\n    forward: false,\n    toJumplist: true\n  }\n}, {\n  keys: '|',\n  type: 'motion',\n  motion: 'moveToColumn'\n}, {\n  keys: 'o',\n  type: 'motion',\n  motion: 'moveToOtherHighlightedEnd',\n  context: 'visual'\n}, {\n  keys: 'O',\n  type: 'motion',\n  motion: 'moveToOtherHighlightedEnd',\n  motionArgs: {\n    sameLine: true\n  },\n  context: 'visual'\n}, // Operators\n{\n  keys: 'd',\n  type: 'operator',\n  operator: 'delete'\n}, {\n  keys: 'y',\n  type: 'operator',\n  operator: 'yank'\n}, {\n  keys: 'c',\n  type: 'operator',\n  operator: 'change'\n}, {\n  keys: '>',\n  type: 'operator',\n  operator: 'indent',\n  operatorArgs: {\n    indentRight: true\n  }\n}, {\n  keys: '<',\n  type: 'operator',\n  operator: 'indent',\n  operatorArgs: {\n    indentRight: false\n  }\n}, {\n  keys: 'g~',\n  type: 'operator',\n  operator: 'changeCase'\n}, {\n  keys: 'gu',\n  type: 'operator',\n  operator: 'changeCase',\n  operatorArgs: {\n    toLower: true\n  },\n  isEdit: true\n}, {\n  keys: 'gU',\n  type: 'operator',\n  operator: 'changeCase',\n  operatorArgs: {\n    toLower: false\n  },\n  isEdit: true\n}, {\n  keys: 'n',\n  type: 'motion',\n  motion: 'findNext',\n  motionArgs: {\n    forward: true,\n    toJumplist: true\n  }\n}, {\n  keys: 'N',\n  type: 'motion',\n  motion: 'findNext',\n  motionArgs: {\n    forward: false,\n    toJumplist: true\n  }\n}, // Operator-Motion dual commands\n{\n  keys: 'x',\n  type: 'operatorMotion',\n  operator: 'delete',\n  motion: 'moveByCharacters',\n  motionArgs: {\n    forward: true\n  },\n  operatorMotionArgs: {\n    visualLine: false\n  }\n}, {\n  keys: 'X',\n  type: 'operatorMotion',\n  operator: 'delete',\n  motion: 'moveByCharacters',\n  motionArgs: {\n    forward: false\n  },\n  operatorMotionArgs: {\n    visualLine: true\n  }\n}, {\n  keys: 'D',\n  type: 'operatorMotion',\n  operator: 'delete',\n  motion: 'moveToEol',\n  motionArgs: {\n    inclusive: true\n  },\n  context: 'normal'\n}, {\n  keys: 'D',\n  type: 'operator',\n  operator: 'delete',\n  operatorArgs: {\n    linewise: true\n  },\n  context: 'visual'\n}, {\n  keys: 'Y',\n  type: 'operatorMotion',\n  operator: 'yank',\n  motion: 'expandToLine',\n  motionArgs: {\n    linewise: true\n  },\n  context: 'normal'\n}, {\n  keys: 'Y',\n  type: 'operator',\n  operator: 'yank',\n  operatorArgs: {\n    linewise: true\n  },\n  context: 'visual'\n}, {\n  keys: 'C',\n  type: 'operatorMotion',\n  operator: 'change',\n  motion: 'moveToEol',\n  motionArgs: {\n    inclusive: true\n  },\n  context: 'normal'\n}, {\n  keys: 'C',\n  type: 'operator',\n  operator: 'change',\n  operatorArgs: {\n    linewise: true\n  },\n  context: 'visual'\n}, {\n  keys: '~',\n  type: 'operatorMotion',\n  operator: 'changeCase',\n  motion: 'moveByCharacters',\n  motionArgs: {\n    forward: true\n  },\n  operatorArgs: {\n    shouldMoveCursor: true\n  },\n  context: 'normal'\n}, {\n  keys: '~',\n  type: 'operator',\n  operator: 'changeCase',\n  context: 'visual'\n}, {\n  keys: '<C-w>',\n  type: 'operatorMotion',\n  operator: 'delete',\n  motion: 'moveByWords',\n  motionArgs: {\n    forward: false,\n    wordEnd: false\n  },\n  context: 'insert'\n}, // Actions\n{\n  keys: '<C-i>',\n  type: 'action',\n  action: 'jumpListWalk',\n  actionArgs: {\n    forward: true\n  }\n}, {\n  keys: '<C-o>',\n  type: 'action',\n  action: 'jumpListWalk',\n  actionArgs: {\n    forward: false\n  }\n}, {\n  keys: '<C-e>',\n  type: 'action',\n  action: 'scroll',\n  actionArgs: {\n    forward: true,\n    linewise: true\n  }\n}, {\n  keys: '<C-y>',\n  type: 'action',\n  action: 'scroll',\n  actionArgs: {\n    forward: false,\n    linewise: true\n  }\n}, {\n  keys: 'a',\n  type: 'action',\n  action: 'enterInsertMode',\n  isEdit: true,\n  actionArgs: {\n    insertAt: 'charAfter'\n  },\n  context: 'normal'\n}, {\n  keys: 'A',\n  type: 'action',\n  action: 'enterInsertMode',\n  isEdit: true,\n  actionArgs: {\n    insertAt: 'eol'\n  },\n  context: 'normal'\n}, {\n  keys: 'A',\n  type: 'action',\n  action: 'enterInsertMode',\n  isEdit: true,\n  actionArgs: {\n    insertAt: 'endOfSelectedArea'\n  },\n  context: 'visual'\n}, {\n  keys: 'i',\n  type: 'action',\n  action: 'enterInsertMode',\n  isEdit: true,\n  actionArgs: {\n    insertAt: 'inplace'\n  },\n  context: 'normal'\n}, {\n  keys: 'I',\n  type: 'action',\n  action: 'enterInsertMode',\n  isEdit: true,\n  actionArgs: {\n    insertAt: 'firstNonBlank'\n  },\n  context: 'normal'\n}, {\n  keys: 'I',\n  type: 'action',\n  action: 'enterInsertMode',\n  isEdit: true,\n  actionArgs: {\n    insertAt: 'startOfSelectedArea'\n  },\n  context: 'visual'\n}, {\n  keys: 'o',\n  type: 'action',\n  action: 'newLineAndEnterInsertMode',\n  isEdit: true,\n  interlaceInsertRepeat: true,\n  actionArgs: {\n    after: true\n  },\n  context: 'normal'\n}, {\n  keys: 'O',\n  type: 'action',\n  action: 'newLineAndEnterInsertMode',\n  isEdit: true,\n  interlaceInsertRepeat: true,\n  actionArgs: {\n    after: false\n  },\n  context: 'normal'\n}, {\n  keys: 'v',\n  type: 'action',\n  action: 'toggleVisualMode'\n}, {\n  keys: 'V',\n  type: 'action',\n  action: 'toggleVisualMode',\n  actionArgs: {\n    linewise: true\n  }\n}, {\n  keys: '<C-v>',\n  type: 'action',\n  action: 'toggleVisualMode',\n  actionArgs: {\n    blockwise: true\n  }\n}, {\n  keys: '<C-q>',\n  type: 'action',\n  action: 'toggleVisualMode',\n  actionArgs: {\n    blockwise: true\n  }\n}, {\n  keys: 'gv',\n  type: 'action',\n  action: 'reselectLastSelection'\n}, {\n  keys: 'J',\n  type: 'action',\n  action: 'joinLines',\n  isEdit: true\n}, {\n  keys: 'p',\n  type: 'action',\n  action: 'paste',\n  isEdit: true,\n  actionArgs: {\n    after: true,\n    isEdit: true\n  }\n}, {\n  keys: 'P',\n  type: 'action',\n  action: 'paste',\n  isEdit: true,\n  actionArgs: {\n    after: false,\n    isEdit: true\n  }\n}, {\n  keys: 'r<character>',\n  type: 'action',\n  action: 'replace',\n  isEdit: true\n}, {\n  keys: '@<character>',\n  type: 'action',\n  action: 'replayMacro'\n}, {\n  keys: 'q<character>',\n  type: 'action',\n  action: 'enterMacroRecordMode'\n}, // Handle Replace-mode as a special case of insert mode.\n{\n  keys: 'R',\n  type: 'action',\n  action: 'enterInsertMode',\n  isEdit: true,\n  actionArgs: {\n    replace: true\n  }\n}, {\n  keys: 'u',\n  type: 'action',\n  action: 'undo',\n  context: 'normal'\n}, {\n  keys: 'u',\n  type: 'operator',\n  operator: 'changeCase',\n  operatorArgs: {\n    toLower: true\n  },\n  context: 'visual',\n  isEdit: true\n}, {\n  keys: 'U',\n  type: 'operator',\n  operator: 'changeCase',\n  operatorArgs: {\n    toLower: false\n  },\n  context: 'visual',\n  isEdit: true\n}, {\n  keys: '<C-r>',\n  type: 'action',\n  action: 'redo'\n}, {\n  keys: 'm<character>',\n  type: 'action',\n  action: 'setMark'\n}, {\n  keys: '\"<character>',\n  type: 'action',\n  action: 'setRegister'\n}, {\n  keys: 'zz',\n  type: 'action',\n  action: 'scrollToCursor',\n  actionArgs: {\n    position: 'center'\n  }\n}, {\n  keys: 'z.',\n  type: 'action',\n  action: 'scrollToCursor',\n  actionArgs: {\n    position: 'center'\n  },\n  motion: 'moveToFirstNonWhiteSpaceCharacter'\n}, {\n  keys: 'zt',\n  type: 'action',\n  action: 'scrollToCursor',\n  actionArgs: {\n    position: 'top'\n  }\n}, {\n  keys: 'z<CR>',\n  type: 'action',\n  action: 'scrollToCursor',\n  actionArgs: {\n    position: 'top'\n  },\n  motion: 'moveToFirstNonWhiteSpaceCharacter'\n}, {\n  keys: 'z-',\n  type: 'action',\n  action: 'scrollToCursor',\n  actionArgs: {\n    position: 'bottom'\n  }\n}, {\n  keys: 'zb',\n  type: 'action',\n  action: 'scrollToCursor',\n  actionArgs: {\n    position: 'bottom'\n  },\n  motion: 'moveToFirstNonWhiteSpaceCharacter'\n}, {\n  keys: '.',\n  type: 'action',\n  action: 'repeatLastEdit'\n}, {\n  keys: '<C-a>',\n  type: 'action',\n  action: 'incrementNumberToken',\n  isEdit: true,\n  actionArgs: {\n    increase: true,\n    backtrack: false\n  }\n}, {\n  keys: '<C-x>',\n  type: 'action',\n  action: 'incrementNumberToken',\n  isEdit: true,\n  actionArgs: {\n    increase: false,\n    backtrack: false\n  }\n}, {\n  keys: '<C-t>',\n  type: 'action',\n  action: 'indent',\n  actionArgs: {\n    indentRight: true\n  },\n  context: 'insert'\n}, {\n  keys: '<C-d>',\n  type: 'action',\n  action: 'indent',\n  actionArgs: {\n    indentRight: false\n  },\n  context: 'insert'\n}, // Text object motions\n{\n  keys: 'a<character>',\n  type: 'motion',\n  motion: 'textObjectManipulation'\n}, {\n  keys: 'i<character>',\n  type: 'motion',\n  motion: 'textObjectManipulation',\n  motionArgs: {\n    textObjectInner: true\n  }\n}, // Search\n{\n  keys: '/',\n  type: 'search',\n  searchArgs: {\n    forward: true,\n    querySrc: 'prompt',\n    toJumplist: true\n  }\n}, {\n  keys: '?',\n  type: 'search',\n  searchArgs: {\n    forward: false,\n    querySrc: 'prompt',\n    toJumplist: true\n  }\n}, {\n  keys: '*',\n  type: 'search',\n  searchArgs: {\n    forward: true,\n    querySrc: 'wordUnderCursor',\n    wholeWordOnly: true,\n    toJumplist: true\n  }\n}, {\n  keys: '#',\n  type: 'search',\n  searchArgs: {\n    forward: false,\n    querySrc: 'wordUnderCursor',\n    wholeWordOnly: true,\n    toJumplist: true\n  }\n}, {\n  keys: 'g*',\n  type: 'search',\n  searchArgs: {\n    forward: true,\n    querySrc: 'wordUnderCursor',\n    toJumplist: true\n  }\n}, {\n  keys: 'g#',\n  type: 'search',\n  searchArgs: {\n    forward: false,\n    querySrc: 'wordUnderCursor',\n    toJumplist: true\n  }\n}, // Ex command\n{\n  keys: ':',\n  type: 'ex'\n}];\n/**\n * Ex commands\n * Care must be taken when adding to the default Ex command map. For any\n * pair of commands that have a shared prefix, at least one of their\n * shortNames must not match the prefix of the other command.\n */\n\nvar defaultExCommandMap = [{\n  name: 'colorscheme',\n  shortName: 'colo'\n}, {\n  name: 'map'\n}, {\n  name: 'imap',\n  shortName: 'im'\n}, {\n  name: 'nmap',\n  shortName: 'nm'\n}, {\n  name: 'vmap',\n  shortName: 'vm'\n}, {\n  name: 'unmap'\n}, {\n  name: 'write',\n  shortName: 'w'\n}, {\n  name: 'undo',\n  shortName: 'u'\n}, {\n  name: 'redo',\n  shortName: 'red'\n}, {\n  name: 'set',\n  shortName: 'se'\n}, {\n  name: 'set',\n  shortName: 'se'\n}, {\n  name: 'setlocal',\n  shortName: 'setl'\n}, {\n  name: 'setglobal',\n  shortName: 'setg'\n}, {\n  name: 'sort',\n  shortName: 'sor'\n}, {\n  name: 'substitute',\n  shortName: 's',\n  possiblyAsync: true\n}, {\n  name: 'nohlsearch',\n  shortName: 'noh'\n}, {\n  name: 'yank',\n  shortName: 'y'\n}, {\n  name: 'delmarks',\n  shortName: 'delm'\n}, {\n  name: 'registers',\n  shortName: 'reg',\n  excludeFromCommandHistory: true\n}, {\n  name: 'global',\n  shortName: 'g'\n}];\nvar Pos = _cm_adapter[\"default\"].Pos;\n\nvar Vim = function Vim() {\n  function enterVimMode(cm) {\n    cm.setOption('disableInput', true);\n    cm.setOption('showCursorWhenSelecting', false);\n\n    _cm_adapter[\"default\"].signal(cm, \"vim-mode-change\", {\n      mode: \"normal\"\n    });\n\n    cm.on('cursorActivity', onCursorActivity);\n    maybeInitVimState(cm); // CodeMirror.on(cm.getInputField(), 'paste', getOnPasteFn(cm));\n\n    cm.enterVimMode();\n  }\n\n  function leaveVimMode(cm) {\n    cm.setOption('disableInput', false);\n    cm.off('cursorActivity', onCursorActivity); // CodeMirror.off(cm.getInputField(), 'paste', getOnPasteFn(cm));\n\n    cm.state.vim = null;\n    cm.leaveVimMode();\n  }\n\n  function detachVimMap(cm, next) {\n    cm.attached = false;\n\n    if (this == _cm_adapter[\"default\"].keyMap.vim) {\n      _cm_adapter[\"default\"].rmClass(cm.getWrapperElement(), \"cm-fat-cursor\"); // if (cm.getOption(\"inputStyle\") == \"contenteditable\" && document.body.style.caretColor != null) {\n      //   disableFatCursorMark(cm);\n      //   cm.getInputField().style.caretColor = \"\";\n      // }\n\n    }\n\n    if (!next || next.attach != attachVimMap) leaveVimMode(cm);\n  }\n\n  function attachVimMap(cm, prev) {\n    if (this == _cm_adapter[\"default\"].keyMap.vim) {\n      cm.attached = true;\n    }\n\n    if (!prev || prev.attach != attachVimMap) enterVimMode(cm);\n  }\n\n  function fatCursorMarks(cm) {\n    var ranges = cm.listSelections(),\n        result = [];\n\n    for (var i = 0; i < ranges.length; i++) {\n      var range = ranges[i];\n\n      if (range.empty()) {\n        if (range.anchor.ch < cm.getLine(range.anchor.line).length) {\n          result.push(cm.markText(range.anchor, Pos(range.anchor.line, range.anchor.ch + 1), {\n            className: \"cm-fat-cursor-mark\"\n          }));\n        } else {\n          var widget = document.createElement(\"span\");\n          widget.textContent = \"\\xA0\";\n          widget.className = \"cm-fat-cursor-mark\";\n          result.push(cm.setBookmark(range.anchor, {\n            widget: widget\n          }));\n        }\n      }\n    }\n\n    return result;\n  }\n\n  function updateFatCursorMark(cm) {\n    var marks = cm.state.fatCursorMarks;\n    if (marks) for (var i = 0; i < marks.length; i++) {\n      marks[i].clear();\n    }\n    cm.state.fatCursorMarks = fatCursorMarks(cm);\n  }\n\n  function enableFatCursorMark(cm) {\n    cm.state.fatCursorMarks = fatCursorMarks(cm);\n    cm.on(\"cursorActivity\", updateFatCursorMark);\n  }\n\n  function disableFatCursorMark(cm) {\n    var marks = cm.state.fatCursorMarks;\n    if (marks) for (var i = 0; i < marks.length; i++) {\n      marks[i].clear();\n    }\n    cm.state.fatCursorMarks = null;\n    cm.off(\"cursorActivity\", updateFatCursorMark);\n  } // Deprecated, simply setting the keymap works again.\n\n\n  _cm_adapter[\"default\"].defineOption('vimMode', false, function (cm, val, prev) {\n    if (val && cm.getOption(\"keyMap\") != \"vim\") cm.setOption(\"keyMap\", \"vim\");else if (!val && prev != _cm_adapter[\"default\"].Init && /^vim/.test(cm.getOption(\"keyMap\"))) cm.setOption(\"keyMap\", \"default\");\n  });\n\n  function cmKey(key, cm) {\n    if (!cm) {\n      return undefined;\n    }\n\n    if (this[key]) {\n      return this[key];\n    }\n\n    var vimKey = cmKeyToVimKey(key);\n\n    if (!vimKey) {\n      return false;\n    }\n\n    var cmd = _cm_adapter[\"default\"].Vim.findKey(cm, vimKey);\n\n    if (typeof cmd == 'function') {\n      _cm_adapter[\"default\"].signal(cm, 'vim-keypress', vimKey);\n    }\n\n    return cmd;\n  }\n\n  var modifiers = {\n    'Shift': 'S',\n    'Ctrl': 'C',\n    'Alt': 'A',\n    'Cmd': 'D',\n    'Mod': 'A'\n  };\n  var specialKeys = {\n    Enter: 'CR',\n    Backspace: 'BS',\n    Delete: 'Del',\n    Insert: 'Ins'\n  };\n\n  function cmKeyToVimKey(key) {\n    if (key.charAt(0) == '\\'') {\n      // Keypress character binding of format \"'a'\"\n      return key.charAt(1);\n    }\n\n    var pieces = key.split(/-(?!$)/);\n    var lastPiece = pieces[pieces.length - 1];\n\n    if (pieces.length == 1 && pieces[0].length == 1) {\n      // No-modifier bindings use literal character bindings above. Skip.\n      return false;\n    } else if (pieces.length == 2 && pieces[0] == 'Shift' && lastPiece.length == 1) {\n      // Ignore Shift+char bindings as they should be handled by literal character.\n      return false;\n    }\n\n    var hasCharacter = false;\n\n    for (var i = 0; i < pieces.length; i++) {\n      var piece = pieces[i];\n\n      if (piece in modifiers) {\n        pieces[i] = modifiers[piece];\n      } else {\n        hasCharacter = true;\n      }\n\n      if (piece in specialKeys) {\n        pieces[i] = specialKeys[piece];\n      }\n    }\n\n    if (!hasCharacter) {\n      // Vim does not support modifier only keys.\n      return false;\n    } // TODO: Current bindings expect the character to be lower case, but\n    // it looks like vim key notation uses upper case.\n\n\n    if (isUpperCase(lastPiece)) {\n      pieces[pieces.length - 1] = lastPiece.toLowerCase();\n    }\n\n    return '<' + pieces.join('-') + '>';\n  }\n\n  function getOnPasteFn(cm) {\n    var vim = cm.state.vim;\n\n    if (!vim || !vim.onPasteFn) {\n      vim.onPasteFn = function () {\n        if (!vim.insertMode) {\n          cm.setCursor(offsetCursor(cm.getCursor(), 0, 1));\n          actions.enterInsertMode(cm, {}, vim);\n        }\n      };\n    }\n\n    return vim.onPasteFn;\n  }\n\n  var numberRegex = /[\\d]/;\n  var wordCharTest = [_cm_adapter[\"default\"].isWordChar, function (ch) {\n    return ch && !_cm_adapter[\"default\"].isWordChar(ch) && !/\\s/.test(ch);\n  }],\n      bigWordCharTest = [function (ch) {\n    return /\\S/.test(ch);\n  }];\n\n  function makeKeyRange(start, size) {\n    var keys = [];\n\n    for (var i = start; i < start + size; i++) {\n      keys.push(String.fromCharCode(i));\n    }\n\n    return keys;\n  }\n\n  var upperCaseAlphabet = makeKeyRange(65, 26);\n  var lowerCaseAlphabet = makeKeyRange(97, 26);\n  var numbers = makeKeyRange(48, 10);\n  var validMarks = [].concat(upperCaseAlphabet, lowerCaseAlphabet, numbers, ['<', '>']);\n  var validRegisters = [].concat(upperCaseAlphabet, lowerCaseAlphabet, numbers, ['-', '\"', '.', ':', '/']);\n\n  function isLine(cm, line) {\n    return line >= cm.firstLine() && line <= cm.lastLine();\n  }\n\n  function isLowerCase(k) {\n    return /^[a-z]$/.test(k);\n  }\n\n  function isMatchableSymbol(k) {\n    return '()[]{}'.indexOf(k) != -1;\n  }\n\n  function isNumber(k) {\n    return numberRegex.test(k);\n  }\n\n  function isUpperCase(k) {\n    return /^[A-Z]$/.test(k);\n  }\n\n  function isWhiteSpaceString(k) {\n    return /^\\s*$/.test(k);\n  }\n\n  function isEndOfSentenceSymbol(k) {\n    return '.?!'.indexOf(k) != -1;\n  }\n\n  function inArray(val, arr) {\n    for (var i = 0; i < arr.length; i++) {\n      if (arr[i] == val) {\n        return true;\n      }\n    }\n\n    return false;\n  }\n\n  var options = {};\n\n  function defineOption(name, defaultValue, type, aliases, callback) {\n    if (defaultValue === undefined && !callback) {\n      throw Error('defaultValue is required unless callback is provided');\n    }\n\n    if (!type) {\n      type = 'string';\n    }\n\n    options[name] = {\n      type: type,\n      defaultValue: defaultValue,\n      callback: callback\n    };\n\n    if (aliases) {\n      for (var i = 0; i < aliases.length; i++) {\n        options[aliases[i]] = options[name];\n      }\n    }\n\n    if (defaultValue) {\n      setOption(name, defaultValue);\n    }\n  }\n\n  function setOption(name, value, cm, cfg) {\n    var option = options[name];\n    cfg = cfg || {};\n    var scope = cfg.scope;\n\n    if (!option) {\n      return new Error('Unknown option: ' + name);\n    }\n\n    if (option.type == 'boolean') {\n      if (value && value !== true) {\n        return new Error('Invalid argument: ' + name + '=' + value);\n      } else if (value !== false) {\n        // Boolean options are set to true if value is not defined.\n        value = true;\n      }\n    }\n\n    if (option.callback) {\n      if (scope !== 'local') {\n        option.callback(value, undefined);\n      }\n\n      if (scope !== 'global' && cm) {\n        option.callback(value, cm);\n      }\n    } else {\n      if (scope !== 'local') {\n        option.value = option.type == 'boolean' ? !!value : value;\n      }\n\n      if (scope !== 'global' && cm) {\n        cm.state.vim.options[name] = {\n          value: value\n        };\n      }\n    }\n  }\n\n  function getOption(name, cm, cfg) {\n    var option = options[name];\n    cfg = cfg || {};\n    var scope = cfg.scope;\n\n    if (!option) {\n      return new Error('Unknown option: ' + name);\n    }\n\n    if (option.callback) {\n      var local = cm && option.callback(undefined, cm);\n\n      if (scope !== 'global' && local !== undefined) {\n        return local;\n      }\n\n      if (scope !== 'local') {\n        return option.callback();\n      }\n\n      return;\n    } else {\n      var local = scope !== 'global' && cm && cm.state.vim.options[name];\n      return (local || scope !== 'local' && option || {}).value;\n    }\n  }\n\n  defineOption('filetype', undefined, 'string', ['ft'], function (name, cm) {\n    // Option is local. Do nothing for global.\n    if (cm === undefined) {\n      return;\n    } // The 'filetype' option proxies to the CodeMirror 'mode' option.\n\n\n    if (name === undefined) {\n      var mode = cm.getOption('mode');\n      return mode == 'null' ? '' : mode;\n    } else {\n      var mode = name == '' ? 'null' : name;\n      cm.setOption('mode', mode);\n    }\n  });\n\n  var createCircularJumpList = function createCircularJumpList() {\n    var size = 100;\n    var pointer = -1;\n    var head = 0;\n    var tail = 0;\n    var buffer = new Array(size);\n\n    function add(cm, oldCur, newCur) {\n      var current = pointer % size;\n      var curMark = buffer[current];\n\n      function useNextSlot(cursor) {\n        var next = ++pointer % size;\n        var trashMark = buffer[next];\n\n        if (trashMark) {\n          trashMark.clear();\n        }\n\n        buffer[next] = cm.setBookmark(cursor);\n      }\n\n      if (curMark) {\n        var markPos = curMark.find(); // avoid recording redundant cursor position\n\n        if (markPos && !cursorEqual(markPos, oldCur)) {\n          useNextSlot(oldCur);\n        }\n      } else {\n        useNextSlot(oldCur);\n      }\n\n      useNextSlot(newCur);\n      head = pointer;\n      tail = pointer - size + 1;\n\n      if (tail < 0) {\n        tail = 0;\n      }\n    }\n\n    function move(cm, offset) {\n      pointer += offset;\n\n      if (pointer > head) {\n        pointer = head;\n      } else if (pointer < tail) {\n        pointer = tail;\n      }\n\n      var mark = buffer[(size + pointer) % size]; // skip marks that are temporarily removed from text buffer\n\n      if (mark && !mark.find()) {\n        var inc = offset > 0 ? 1 : -1;\n        var newCur;\n        var oldCur = cm.getCursor();\n\n        do {\n          pointer += inc;\n          mark = buffer[(size + pointer) % size]; // skip marks that are the same as current position\n\n          if (mark && (newCur = mark.find()) && !cursorEqual(oldCur, newCur)) {\n            break;\n          }\n        } while (pointer < head && pointer > tail);\n      }\n\n      return mark;\n    }\n\n    return {\n      cachedCursor: undefined,\n      //used for # and * jumps\n      add: add,\n      move: move\n    };\n  }; // Returns an object to track the changes associated insert mode.  It\n  // clones the object that is passed in, or creates an empty object one if\n  // none is provided.\n\n\n  var createInsertModeChanges = function createInsertModeChanges(c) {\n    if (c) {\n      // Copy construction\n      return {\n        changes: c.changes,\n        expectCursorActivityForChange: c.expectCursorActivityForChange\n      };\n    }\n\n    return {\n      // Change list\n      changes: [],\n      // Set to true on change, false on cursorActivity.\n      expectCursorActivityForChange: false\n    };\n  };\n\n  function MacroModeState() {\n    this.latestRegister = undefined;\n    this.isPlaying = false;\n    this.isRecording = false;\n    this.replaySearchQueries = [];\n    this.onRecordingDone = undefined;\n    this.lastInsertModeChanges = createInsertModeChanges();\n  }\n\n  MacroModeState.prototype = {\n    exitMacroRecordMode: function exitMacroRecordMode() {\n      var macroModeState = vimGlobalState.macroModeState;\n\n      if (macroModeState.onRecordingDone) {\n        macroModeState.onRecordingDone(); // close dialog\n      }\n\n      macroModeState.onRecordingDone = undefined;\n      macroModeState.isRecording = false;\n    },\n    enterMacroRecordMode: function enterMacroRecordMode(cm, registerName) {\n      var register = vimGlobalState.registerController.getRegister(registerName);\n\n      if (register) {\n        register.clear();\n        this.latestRegister = registerName;\n\n        if (cm.openDialog) {\n          this.onRecordingDone = cm.openDialog('(recording)[' + registerName + ']', null, {\n            bottom: true\n          });\n        }\n\n        this.isRecording = true;\n      }\n    }\n  };\n\n  function maybeInitVimState(cm) {\n    if (!cm.state.vim) {\n      // Store instance state in the CodeMirror object.\n      cm.state.vim = {\n        inputState: new InputState(),\n        // Vim's input state that triggered the last edit, used to repeat\n        // motions and operators with '.'.\n        lastEditInputState: undefined,\n        // Vim's action command before the last edit, used to repeat actions\n        // with '.' and insert mode repeat.\n        lastEditActionCommand: undefined,\n        // When using jk for navigation, if you move from a longer line to a\n        // shorter line, the cursor may clip to the end of the shorter line.\n        // If j is pressed again and cursor goes to the next line, the\n        // cursor should go back to its horizontal position on the longer\n        // line if it can. This is to keep track of the horizontal position.\n        lastHPos: -1,\n        // Doing the same with screen-position for gj/gk\n        lastHSPos: -1,\n        // The last motion command run. Cleared if a non-motion command gets\n        // executed in between.\n        lastMotion: null,\n        marks: {},\n        // Mark for rendering fake cursor for visual mode.\n        fakeCursor: null,\n        insertMode: false,\n        // Repeat count for changes made in insert mode, triggered by key\n        // sequences like 3,i. Only exists when insertMode is true.\n        insertModeRepeat: undefined,\n        visualMode: false,\n        // If we are in visual line mode. No effect if visualMode is false.\n        visualLine: false,\n        visualBlock: false,\n        lastSelection: null,\n        lastPastedText: null,\n        sel: {},\n        // Buffer-local/window-local values of vim options.\n        options: {}\n      };\n    }\n\n    return cm.state.vim;\n  }\n\n  var vimGlobalState;\n\n  function resetVimGlobalState() {\n    vimGlobalState = {\n      // The current search query.\n      searchQuery: null,\n      // Whether we are searching backwards.\n      searchIsReversed: false,\n      // Replace part of the last substituted pattern\n      lastSubstituteReplacePart: undefined,\n      jumpList: createCircularJumpList(),\n      macroModeState: new MacroModeState(),\n      // Recording latest f, t, F or T motion command.\n      lastCharacterSearch: {\n        increment: 0,\n        forward: true,\n        selectedCharacter: ''\n      },\n      registerController: new RegisterController({}),\n      // search history buffer\n      searchHistoryController: new HistoryController(),\n      // ex Command history buffer\n      exCommandHistoryController: new HistoryController()\n    };\n\n    for (var optionName in options) {\n      var option = options[optionName];\n      option.value = option.defaultValue;\n    }\n  }\n\n  var lastInsertModeKeyTimer;\n  var vimApi = {\n    buildKeyMap: function buildKeyMap() {// TODO: Convert keymap into dictionary format for fast lookup.\n    },\n    // Testing hook, though it might be useful to expose the register\n    // controller anyways.\n    getRegisterController: function getRegisterController() {\n      return vimGlobalState.registerController;\n    },\n    // Testing hook.\n    resetVimGlobalState_: resetVimGlobalState,\n    // Testing hook.\n    getVimGlobalState_: function getVimGlobalState_() {\n      return vimGlobalState;\n    },\n    // Testing hook.\n    maybeInitVimState_: maybeInitVimState,\n    suppressErrorLogging: false,\n    InsertModeKey: InsertModeKey,\n    map: function map(lhs, rhs, ctx) {\n      // Add user defined key bindings.\n      exCommandDispatcher.map(lhs, rhs, ctx);\n    },\n    unmap: function unmap(lhs, ctx) {\n      exCommandDispatcher.unmap(lhs, ctx);\n    },\n    // TODO: Expose setOption and getOption as instance methods. Need to decide how to namespace\n    // them, or somehow make them work with the existing CodeMirror setOption/getOption API.\n    setOption: setOption,\n    getOption: getOption,\n    defineOption: defineOption,\n    defineEx: function defineEx(name, prefix, func) {\n      if (!prefix) {\n        prefix = name;\n      } else if (name.indexOf(prefix) !== 0) {\n        throw new Error('(Vim.defineEx) \"' + prefix + '\" is not a prefix of \"' + name + '\", command not registered');\n      }\n\n      exCommands[name] = func;\n      exCommandDispatcher.commandMap_[prefix] = {\n        name: name,\n        shortName: prefix,\n        type: 'api'\n      };\n    },\n    handleKey: function handleKey(cm, key, origin) {\n      var command = this.findKey(cm, key, origin);\n\n      if (typeof command === 'function') {\n        return command();\n      }\n    },\n\n    /**\n     * This is the outermost function called by CodeMirror, after keys have\n     * been mapped to their Vim equivalents.\n     *\n     * Finds a command based on the key (and cached keys if there is a\n     * multi-key sequence). Returns `undefined` if no key is matched, a noop\n     * function if a partial match is found (multi-key), and a function to\n     * execute the bound command if a a key is matched. The function always\n     * returns true.\n     */\n    findKey: function findKey(cm, key, origin) {\n      var vim = maybeInitVimState(cm);\n\n      function handleMacroRecording() {\n        var macroModeState = vimGlobalState.macroModeState;\n\n        if (macroModeState.isRecording) {\n          if (key == 'q') {\n            macroModeState.exitMacroRecordMode();\n            clearInputState(cm);\n            return true;\n          }\n\n          if (origin != 'mapping') {\n            logKey(macroModeState, key);\n          }\n        }\n      }\n\n      function handleEsc() {\n        if (key == '<Esc>') {\n          // Clear input state and get back to normal mode.\n          clearInputState(cm);\n\n          if (vim.visualMode) {\n            exitVisualMode(cm);\n          } else if (vim.insertMode) {\n            exitInsertMode(cm);\n          }\n\n          return true;\n        }\n      }\n\n      function doKeyToKey(keys) {\n        // TODO: prevent infinite recursion.\n        var match;\n\n        while (keys) {\n          // Pull off one command key, which is either a single character\n          // or a special sequence wrapped in '<' and '>', e.g. '<Space>'.\n          match = /<\\w+-.+?>|<\\w+>|./.exec(keys);\n          key = match[0];\n          keys = keys.substring(match.index + key.length);\n\n          _cm_adapter[\"default\"].Vim.handleKey(cm, key, 'mapping');\n        }\n      }\n\n      function handleKeyInsertMode() {\n        if (handleEsc()) {\n          return true;\n        }\n\n        var keys = vim.inputState.keyBuffer = vim.inputState.keyBuffer + key;\n        var keysAreChars = key.length == 1;\n        var match = commandDispatcher.matchCommand(keys, defaultKeymap, vim.inputState, 'insert'); // Need to check all key substrings in insert mode.\n\n        while (keys.length > 1 && match.type != 'full') {\n          var keys = vim.inputState.keyBuffer = keys.slice(1);\n          var thisMatch = commandDispatcher.matchCommand(keys, defaultKeymap, vim.inputState, 'insert');\n\n          if (thisMatch.type != 'none') {\n            match = thisMatch;\n          }\n        }\n\n        if (match.type == 'none') {\n          clearInputState(cm);\n          return false;\n        } else if (match.type == 'partial') {\n          if (lastInsertModeKeyTimer) {\n            window.clearTimeout(lastInsertModeKeyTimer);\n          }\n\n          lastInsertModeKeyTimer = window.setTimeout(function () {\n            if (vim.insertMode && vim.inputState.keyBuffer) {\n              clearInputState(cm);\n            }\n          }, getOption('insertModeEscKeysTimeout'));\n          return !keysAreChars;\n        }\n\n        if (lastInsertModeKeyTimer) {\n          window.clearTimeout(lastInsertModeKeyTimer);\n        }\n\n        if (keysAreChars) {\n          var selections = cm.listSelections();\n\n          for (var i = 0; i < selections.length; i++) {\n            var here = selections[i].head;\n            cm.replaceRange('', offsetCursor(here, 0, -(keys.length - 1)), here, '+input');\n          }\n\n          vimGlobalState.macroModeState.lastInsertModeChanges.changes.pop();\n        }\n\n        clearInputState(cm);\n        return match.command;\n      }\n\n      function handleKeyNonInsertMode() {\n        if (handleMacroRecording() || handleEsc()) {\n          return true;\n        }\n\n        var keys = vim.inputState.keyBuffer = vim.inputState.keyBuffer + key;\n\n        if (/^[1-9]\\d*$/.test(keys)) {\n          return true;\n        }\n\n        var keysMatcher = /^(\\d*)(.*)$/.exec(keys);\n\n        if (!keysMatcher) {\n          clearInputState(cm);\n          return false;\n        }\n\n        var context = vim.visualMode ? 'visual' : 'normal';\n        var match = commandDispatcher.matchCommand(keysMatcher[2] || keysMatcher[1], defaultKeymap, vim.inputState, context);\n\n        if (match.type == 'none') {\n          clearInputState(cm);\n          return false;\n        } else if (match.type == 'partial') {\n          return true;\n        }\n\n        vim.inputState.keyBuffer = '';\n        var keysMatcher = /^(\\d*)(.*)$/.exec(keys);\n\n        if (keysMatcher[1] && keysMatcher[1] != '0') {\n          vim.inputState.pushRepeatDigit(keysMatcher[1]);\n        }\n\n        return match.command;\n      }\n\n      var command;\n\n      if (vim.insertMode) {\n        command = handleKeyInsertMode();\n      } else {\n        command = handleKeyNonInsertMode();\n      }\n\n      if (command === false) {\n        return !vim.insertMode && key.length === 1 ? function () {\n          return true;\n        } : undefined;\n      } else if (command === true) {\n        // TODO: Look into using CodeMirror's multi-key handling.\n        // Return no-op since we are caching the key. Counts as handled, but\n        // don't want act on it just yet.\n        return function () {\n          return true;\n        };\n      } else {\n        return function () {\n          return cm.operation(function () {\n            cm.curOp.isVimOp = true;\n\n            try {\n              if (command.type == 'keyToKey') {\n                doKeyToKey(command.toKeys);\n              } else {\n                commandDispatcher.processCommand(cm, vim, command);\n              }\n            } catch (e) {\n              // clear VIM state in case it's in a bad state.\n              cm.state.vim = undefined;\n              maybeInitVimState(cm);\n\n              if (!_cm_adapter[\"default\"].Vim.suppressErrorLogging) {\n                console['log'](e);\n              }\n\n              throw e;\n            }\n\n            return true;\n          });\n        };\n      }\n    },\n    handleEx: function handleEx(cm, input) {\n      exCommandDispatcher.processCommand(cm, input);\n    },\n    defineMotion: defineMotion,\n    defineAction: defineAction,\n    defineOperator: defineOperator,\n    mapCommand: mapCommand,\n    _mapCommand: _mapCommand,\n    defineRegister: defineRegister,\n    exitVisualMode: exitVisualMode,\n    exitInsertMode: exitInsertMode\n  }; // Represents the current input state.\n\n  function InputState() {\n    this.prefixRepeat = [];\n    this.motionRepeat = [];\n    this.operator = null;\n    this.operatorArgs = null;\n    this.motion = null;\n    this.motionArgs = null;\n    this.keyBuffer = []; // For matching multi-key commands.\n\n    this.registerName = null; // Defaults to the unnamed register.\n  }\n\n  InputState.prototype.pushRepeatDigit = function (n) {\n    if (!this.operator) {\n      this.prefixRepeat = this.prefixRepeat.concat(n);\n    } else {\n      this.motionRepeat = this.motionRepeat.concat(n);\n    }\n  };\n\n  InputState.prototype.getRepeat = function () {\n    var repeat = 0;\n\n    if (this.prefixRepeat.length > 0 || this.motionRepeat.length > 0) {\n      repeat = 1;\n\n      if (this.prefixRepeat.length > 0) {\n        repeat *= parseInt(this.prefixRepeat.join(''), 10);\n      }\n\n      if (this.motionRepeat.length > 0) {\n        repeat *= parseInt(this.motionRepeat.join(''), 10);\n      }\n    }\n\n    return repeat;\n  };\n\n  function clearInputState(cm, reason) {\n    cm.state.vim.inputState = new InputState();\n\n    _cm_adapter[\"default\"].signal(cm, 'vim-command-done', reason);\n  }\n  /*\n   * Register stores information about copy and paste registers.  Besides\n   * text, a register must store whether it is linewise (i.e., when it is\n   * pasted, should it insert itself into a new line, or should the text be\n   * inserted at the cursor position.)\n   */\n\n\n  function Register(text, linewise, blockwise) {\n    this.clear();\n    this.keyBuffer = [text || ''];\n    this.insertModeChanges = [];\n    this.searchQueries = [];\n    this.linewise = !!linewise;\n    this.blockwise = !!blockwise;\n  }\n\n  Register.prototype = {\n    setText: function setText(text, linewise, blockwise) {\n      this.keyBuffer = [text || ''];\n      this.linewise = !!linewise;\n      this.blockwise = !!blockwise;\n    },\n    pushText: function pushText(text, linewise) {\n      // if this register has ever been set to linewise, use linewise.\n      if (linewise) {\n        if (!this.linewise) {\n          this.keyBuffer.push('\\n');\n        }\n\n        this.linewise = true;\n      }\n\n      this.keyBuffer.push(text);\n    },\n    pushInsertModeChanges: function pushInsertModeChanges(changes) {\n      this.insertModeChanges.push(createInsertModeChanges(changes));\n    },\n    pushSearchQuery: function pushSearchQuery(query) {\n      this.searchQueries.push(query);\n    },\n    clear: function clear() {\n      this.keyBuffer = [];\n      this.insertModeChanges = [];\n      this.searchQueries = [];\n      this.linewise = false;\n    },\n    toString: function toString() {\n      return this.keyBuffer.join('');\n    }\n  };\n  /**\n   * Defines an external register.\n   *\n   * The name should be a single character that will be used to reference the register.\n   * The register should support setText, pushText, clear, and toString(). See Register\n   * for a reference implementation.\n   */\n\n  function defineRegister(name, register) {\n    var registers = vimGlobalState.registerController.registers;\n\n    if (!name || name.length != 1) {\n      throw Error('Register name must be 1 character');\n    }\n\n    if (registers[name]) {\n      throw Error('Register already defined ' + name);\n    }\n\n    registers[name] = register;\n    validRegisters.push(name);\n  }\n  /*\n   * vim registers allow you to keep many independent copy and paste buffers.\n   * See http://usevim.com/2012/04/13/registers/ for an introduction.\n   *\n   * RegisterController keeps the state of all the registers.  An initial\n   * state may be passed in.  The unnamed register '\"' will always be\n   * overridden.\n   */\n\n\n  function RegisterController(registers) {\n    this.registers = registers;\n    this.unnamedRegister = registers['\"'] = new Register();\n    registers['.'] = new Register();\n    registers[':'] = new Register();\n    registers['/'] = new Register();\n  }\n\n  RegisterController.prototype = {\n    pushText: function pushText(registerName, operator, text, linewise, blockwise) {\n      if (linewise && text.charAt(text.length - 1) !== '\\n') {\n        text += '\\n';\n      } // Lowercase and uppercase registers refer to the same register.\n      // Uppercase just means append.\n\n\n      var register = this.isValidRegister(registerName) ? this.getRegister(registerName) : null; // if no register/an invalid register was specified, things go to the\n      // default registers\n\n      if (!register) {\n        switch (operator) {\n          case 'yank':\n            // The 0 register contains the text from the most recent yank.\n            this.registers['0'] = new Register(text, linewise, blockwise);\n            break;\n\n          case 'delete':\n          case 'change':\n            if (text.indexOf('\\n') == -1) {\n              // Delete less than 1 line. Update the small delete register.\n              this.registers['-'] = new Register(text, linewise);\n            } else {\n              // Shift down the contents of the numbered registers and put the\n              // deleted text into register 1.\n              this.shiftNumericRegisters_();\n              this.registers['1'] = new Register(text, linewise);\n            }\n\n            break;\n        } // Make sure the unnamed register is set to what just happened\n\n\n        this.unnamedRegister.setText(text, linewise, blockwise);\n        return;\n      } // If we've gotten to this point, we've actually specified a register\n\n\n      var append = isUpperCase(registerName);\n\n      if (append) {\n        register.pushText(text, linewise);\n      } else {\n        register.setText(text, linewise, blockwise);\n      } // The unnamed register always has the same value as the last used\n      // register.\n\n\n      this.unnamedRegister.setText(register.toString(), linewise);\n    },\n    // Gets the register named @name.  If one of @name doesn't already exist,\n    // create it.  If @name is invalid, return the unnamedRegister.\n    getRegister: function getRegister(name) {\n      if (!this.isValidRegister(name)) {\n        return this.unnamedRegister;\n      }\n\n      name = name.toLowerCase();\n\n      if (!this.registers[name]) {\n        this.registers[name] = new Register();\n      }\n\n      return this.registers[name];\n    },\n    isValidRegister: function isValidRegister(name) {\n      return name && inArray(name, validRegisters);\n    },\n    shiftNumericRegisters_: function shiftNumericRegisters_() {\n      for (var i = 9; i >= 2; i--) {\n        this.registers[i] = this.getRegister('' + (i - 1));\n      }\n    }\n  };\n\n  function HistoryController() {\n    this.historyBuffer = [];\n    this.iterator = 0;\n    this.initialPrefix = null;\n  }\n\n  HistoryController.prototype = {\n    // the input argument here acts a user entered prefix for a small time\n    // until we start autocompletion in which case it is the autocompleted.\n    nextMatch: function nextMatch(input, up) {\n      var historyBuffer = this.historyBuffer;\n      var dir = up ? -1 : 1;\n      if (this.initialPrefix === null) this.initialPrefix = input;\n\n      for (var i = this.iterator + dir; up ? i >= 0 : i < historyBuffer.length; i += dir) {\n        var element = historyBuffer[i];\n\n        for (var j = 0; j <= element.length; j++) {\n          if (this.initialPrefix == element.substring(0, j)) {\n            this.iterator = i;\n            return element;\n          }\n        }\n      } // should return the user input in case we reach the end of buffer.\n\n\n      if (i >= historyBuffer.length) {\n        this.iterator = historyBuffer.length;\n        return this.initialPrefix;\n      } // return the last autocompleted query or exCommand as it is.\n\n\n      if (i < 0) return input;\n    },\n    pushInput: function pushInput(input) {\n      var index = this.historyBuffer.indexOf(input);\n      if (index > -1) this.historyBuffer.splice(index, 1);\n      if (input.length) this.historyBuffer.push(input);\n    },\n    reset: function reset() {\n      this.initialPrefix = null;\n      this.iterator = this.historyBuffer.length;\n    }\n  };\n  var commandDispatcher = {\n    matchCommand: function matchCommand(keys, keyMap, inputState, context) {\n      var matches = commandMatches(keys, keyMap, context, inputState);\n\n      if (!matches.full && !matches.partial) {\n        return {\n          type: 'none'\n        };\n      } else if (!matches.full && matches.partial) {\n        return {\n          type: 'partial'\n        };\n      }\n\n      var bestMatch;\n\n      for (var i = 0; i < matches.full.length; i++) {\n        var match = matches.full[i];\n\n        if (!bestMatch) {\n          bestMatch = match;\n        }\n      }\n\n      if (bestMatch.keys.slice(-11) == '<character>') {\n        var character = lastChar(keys);\n        if (!character) return {\n          type: 'none'\n        };\n        inputState.selectedCharacter = character;\n      }\n\n      return {\n        type: 'full',\n        command: bestMatch\n      };\n    },\n    processCommand: function processCommand(cm, vim, command) {\n      vim.inputState.repeatOverride = command.repeatOverride;\n\n      switch (command.type) {\n        case 'motion':\n          this.processMotion(cm, vim, command);\n          break;\n\n        case 'operator':\n          this.processOperator(cm, vim, command); // cm.pushUndoStop();\n\n          break;\n\n        case 'operatorMotion':\n          this.processOperatorMotion(cm, vim, command); // cm.pushUndoStop();\n\n          break;\n\n        case 'action':\n          this.processAction(cm, vim, command);\n          break;\n\n        case 'search':\n          this.processSearch(cm, vim, command);\n          break;\n\n        case 'ex':\n        case 'keyToEx':\n          this.processEx(cm, vim, command);\n          break;\n\n        default:\n          break;\n      }\n    },\n    processMotion: function processMotion(cm, vim, command) {\n      vim.inputState.motion = command.motion;\n      vim.inputState.motionArgs = copyArgs(command.motionArgs);\n      this.evalInput(cm, vim);\n    },\n    processOperator: function processOperator(cm, vim, command) {\n      var inputState = vim.inputState;\n\n      if (inputState.operator) {\n        if (inputState.operator == command.operator) {\n          // Typing an operator twice like 'dd' makes the operator operate\n          // linewise\n          inputState.motion = 'expandToLine';\n          inputState.motionArgs = {\n            linewise: true\n          };\n          this.evalInput(cm, vim);\n          return;\n        } else {\n          // 2 different operators in a row doesn't make sense.\n          clearInputState(cm);\n        }\n      }\n\n      inputState.operator = command.operator;\n      inputState.operatorArgs = copyArgs(command.operatorArgs);\n\n      if (vim.visualMode) {\n        // Operating on a selection in visual mode. We don't need a motion.\n        this.evalInput(cm, vim);\n      }\n    },\n    processOperatorMotion: function processOperatorMotion(cm, vim, command) {\n      var visualMode = vim.visualMode;\n      var operatorMotionArgs = copyArgs(command.operatorMotionArgs);\n\n      if (operatorMotionArgs) {\n        // Operator motions may have special behavior in visual mode.\n        if (visualMode && operatorMotionArgs.visualLine) {\n          vim.visualLine = true;\n        }\n      }\n\n      this.processOperator(cm, vim, command);\n\n      if (!visualMode) {\n        this.processMotion(cm, vim, command);\n      }\n    },\n    processAction: function processAction(cm, vim, command) {\n      var inputState = vim.inputState;\n      var repeat = inputState.getRepeat();\n      var repeatIsExplicit = !!repeat;\n      var actionArgs = copyArgs(command.actionArgs) || {};\n\n      if (inputState.selectedCharacter) {\n        actionArgs.selectedCharacter = inputState.selectedCharacter;\n      } // Actions may or may not have motions and operators. Do these first.\n\n\n      if (command.operator) {\n        this.processOperator(cm, vim, command);\n      }\n\n      if (command.motion) {\n        this.processMotion(cm, vim, command);\n      }\n\n      if (command.motion || command.operator) {\n        this.evalInput(cm, vim);\n      }\n\n      actionArgs.repeat = repeat || 1;\n      actionArgs.repeatIsExplicit = repeatIsExplicit;\n      actionArgs.registerName = inputState.registerName;\n      clearInputState(cm);\n      vim.lastMotion = null;\n\n      if (command.isEdit) {\n        this.recordLastEdit(vim, inputState, command);\n      }\n\n      actions[command.action](cm, actionArgs, vim);\n    },\n    processSearch: function processSearch(cm, vim, command) {\n      if (!cm.getSearchCursor) {\n        // Search depends on SearchCursor.\n        return;\n      }\n\n      var forward = command.searchArgs.forward;\n      var wholeWordOnly = command.searchArgs.wholeWordOnly;\n      getSearchState(cm).setReversed(!forward);\n      var promptPrefix = forward ? '/' : '?';\n      var originalQuery = getSearchState(cm).getQuery();\n      var originalScrollPos = cm.getScrollInfo();\n\n      function handleQuery(query, ignoreCase, smartCase) {\n        vimGlobalState.searchHistoryController.pushInput(query);\n        vimGlobalState.searchHistoryController.reset();\n\n        try {\n          updateSearchQuery(cm, query, ignoreCase, smartCase);\n        } catch (e) {\n          showConfirm(cm, 'Invalid regex: ' + query);\n          clearInputState(cm);\n          return;\n        }\n\n        commandDispatcher.processMotion(cm, vim, {\n          type: 'motion',\n          motion: 'findNext',\n          motionArgs: {\n            forward: true,\n            toJumplist: command.searchArgs.toJumplist\n          }\n        });\n      }\n\n      function onPromptClose(query) {\n        cm.scrollTo(originalScrollPos.left, originalScrollPos.top);\n        handleQuery(query, true\n        /** ignoreCase */\n        , true\n        /** smartCase */\n        );\n        var macroModeState = vimGlobalState.macroModeState;\n\n        if (macroModeState.isRecording) {\n          logSearchQuery(macroModeState, query);\n        }\n      }\n\n      function onPromptKeyUp(e, query, close) {\n        var keyName = _cm_adapter[\"default\"].keyName(e),\n            up,\n            offset;\n\n        if (keyName == 'Up' || keyName == 'Down') {\n          up = keyName == 'Up' ? true : false;\n          offset = e.target ? e.target.selectionEnd : 0;\n          query = vimGlobalState.searchHistoryController.nextMatch(query, up) || '';\n          close(query);\n          if (offset && e.target) e.target.selectionEnd = e.target.selectionStart = Math.min(offset, e.target.value.length);\n        } else {\n          if (keyName != 'Left' && keyName != 'Right' && keyName != 'Ctrl' && keyName != 'Alt' && keyName != 'Shift') vimGlobalState.searchHistoryController.reset();\n        }\n\n        var parsedQuery;\n\n        try {\n          parsedQuery = updateSearchQuery(cm, query, true\n          /** ignoreCase */\n          , true\n          /** smartCase */\n          );\n        } catch (e) {// Swallow bad regexes for incremental search.\n        }\n\n        if (parsedQuery) {\n          cm.scrollIntoView(_findNext(cm, !forward, parsedQuery), 30);\n        } else {\n          clearSearchHighlight(cm);\n          cm.scrollTo(originalScrollPos.left, originalScrollPos.top);\n        }\n      }\n\n      function onPromptKeyDown(e, query, close) {\n        var keyName = _cm_adapter[\"default\"].keyName(e);\n\n        if (keyName == 'Esc' || keyName == 'Ctrl-C' || keyName == 'Ctrl-[' || keyName == 'Backspace' && query == '') {\n          vimGlobalState.searchHistoryController.pushInput(query);\n          vimGlobalState.searchHistoryController.reset();\n          updateSearchQuery(cm, originalQuery);\n          clearSearchHighlight(cm);\n          cm.scrollTo(originalScrollPos.left, originalScrollPos.top);\n\n          _cm_adapter[\"default\"].e_stop(e);\n\n          clearInputState(cm);\n          close();\n          cm.focus();\n        } else if (keyName == 'Up' || keyName == 'Down') {\n          _cm_adapter[\"default\"].e_stop(e);\n        } else if (keyName == 'Ctrl-U') {\n          // Ctrl-U clears input.\n          _cm_adapter[\"default\"].e_stop(e);\n\n          close('');\n        }\n      }\n\n      switch (command.searchArgs.querySrc) {\n        case 'prompt':\n          var macroModeState = vimGlobalState.macroModeState;\n\n          if (macroModeState.isPlaying) {\n            var query = macroModeState.replaySearchQueries.shift();\n            handleQuery(query, true\n            /** ignoreCase */\n            , false\n            /** smartCase */\n            );\n          } else {\n            showPrompt(cm, {\n              onClose: onPromptClose,\n              prefix: promptPrefix,\n              desc: searchPromptDesc,\n              onKeyUp: onPromptKeyUp,\n              onKeyDown: onPromptKeyDown\n            });\n          }\n\n          break;\n\n        case 'wordUnderCursor':\n          var word = expandWordUnderCursor(cm, false\n          /** inclusive */\n          , true\n          /** forward */\n          , false\n          /** bigWord */\n          , true\n          /** noSymbol */\n          );\n          var isKeyword = true;\n\n          if (!word) {\n            word = expandWordUnderCursor(cm, false\n            /** inclusive */\n            , true\n            /** forward */\n            , false\n            /** bigWord */\n            , false\n            /** noSymbol */\n            );\n            isKeyword = false;\n          }\n\n          if (!word) {\n            return;\n          }\n\n          var query = cm.getLine(word.start.line).substring(word.start.ch, word.end.ch);\n\n          if (isKeyword && wholeWordOnly) {\n            query = '\\\\b' + query + '\\\\b';\n          } else {\n            query = escapeRegex(query);\n          } // cachedCursor is used to save the old position of the cursor\n          // when * or # causes vim to seek for the nearest word and shift\n          // the cursor before entering the motion.\n\n\n          vimGlobalState.jumpList.cachedCursor = cm.getCursor();\n          cm.setCursor(word.start);\n          handleQuery(query, true\n          /** ignoreCase */\n          , false\n          /** smartCase */\n          );\n          break;\n      }\n    },\n    processEx: function processEx(cm, vim, command) {\n      function onPromptClose(input) {\n        // Give the prompt some time to close so that if processCommand shows\n        // an error, the elements don't overlap.\n        vimGlobalState.exCommandHistoryController.pushInput(input);\n        vimGlobalState.exCommandHistoryController.reset();\n        exCommandDispatcher.processCommand(cm, input);\n      }\n\n      function onPromptKeyDown(e, input, close) {\n        var keyName = _cm_adapter[\"default\"].keyName(e),\n            up,\n            offset;\n\n        if (keyName == 'Esc' || keyName == 'Ctrl-C' || keyName == 'Ctrl-[' || keyName == 'Backspace' && input == '') {\n          vimGlobalState.exCommandHistoryController.pushInput(input);\n          vimGlobalState.exCommandHistoryController.reset();\n\n          _cm_adapter[\"default\"].e_stop(e);\n\n          clearInputState(cm);\n          close();\n          cm.focus();\n        }\n\n        if (keyName == 'Up' || keyName == 'Down') {\n          _cm_adapter[\"default\"].e_stop(e);\n\n          up = keyName == 'Up' ? true : false;\n          offset = e.target ? e.target.selectionEnd : 0;\n          input = vimGlobalState.exCommandHistoryController.nextMatch(input, up) || '';\n          close(input);\n          if (offset && e.target) e.target.selectionEnd = e.target.selectionStart = Math.min(offset, e.target.value.length);\n        } else if (keyName == 'Ctrl-U') {\n          // Ctrl-U clears input.\n          _cm_adapter[\"default\"].e_stop(e);\n\n          close('');\n        } else {\n          if (keyName != 'Left' && keyName != 'Right' && keyName != 'Ctrl' && keyName != 'Alt' && keyName != 'Shift') vimGlobalState.exCommandHistoryController.reset();\n        }\n      }\n\n      if (command.type == 'keyToEx') {\n        // Handle user defined Ex to Ex mappings\n        exCommandDispatcher.processCommand(cm, command.exArgs.input);\n      } else {\n        if (vim.visualMode) {\n          showPrompt(cm, {\n            onClose: onPromptClose,\n            prefix: ':',\n            value: '\\'<,\\'>',\n            onKeyDown: onPromptKeyDown,\n            selectValueOnOpen: false\n          });\n        } else {\n          showPrompt(cm, {\n            onClose: onPromptClose,\n            prefix: ':',\n            onKeyDown: onPromptKeyDown\n          });\n        }\n      }\n    },\n    evalInput: function evalInput(cm, vim) {\n      // If the motion command is set, execute both the operator and motion.\n      // Otherwise return.\n      var inputState = vim.inputState;\n      var motion = inputState.motion;\n      var motionArgs = inputState.motionArgs || {};\n      var operator = inputState.operator;\n      var operatorArgs = inputState.operatorArgs || {};\n      var registerName = inputState.registerName;\n      var sel = vim.sel; // TODO: Make sure cm and vim selections are identical outside visual mode.\n\n      var origHead = copyCursor(vim.visualMode ? clipCursorToContent(cm, sel.head) : cm.getCursor('head'));\n      var origAnchor = copyCursor(vim.visualMode ? clipCursorToContent(cm, sel.anchor) : cm.getCursor('anchor'));\n      var oldHead = copyCursor(origHead);\n      var oldAnchor = copyCursor(origAnchor);\n      var newHead, newAnchor;\n      var repeat;\n\n      if (operator) {\n        this.recordLastEdit(vim, inputState);\n      }\n\n      if (inputState.repeatOverride !== undefined) {\n        // If repeatOverride is specified, that takes precedence over the\n        // input state's repeat. Used by Ex mode and can be user defined.\n        repeat = inputState.repeatOverride;\n      } else {\n        repeat = inputState.getRepeat();\n      }\n\n      if (repeat > 0 && motionArgs.explicitRepeat) {\n        motionArgs.repeatIsExplicit = true;\n      } else if (motionArgs.noRepeat || !motionArgs.explicitRepeat && repeat === 0) {\n        repeat = 1;\n        motionArgs.repeatIsExplicit = false;\n      }\n\n      if (inputState.selectedCharacter) {\n        // If there is a character input, stick it in all of the arg arrays.\n        motionArgs.selectedCharacter = operatorArgs.selectedCharacter = inputState.selectedCharacter;\n      }\n\n      motionArgs.repeat = repeat;\n      clearInputState(cm);\n\n      if (motion) {\n        var motionResult = motions[motion](cm, origHead, motionArgs, vim);\n        vim.lastMotion = motions[motion];\n\n        if (!motionResult) {\n          return;\n        }\n\n        if (motionArgs.toJumplist) {\n          var jumpList = vimGlobalState.jumpList; // if the current motion is # or *, use cachedCursor\n\n          var cachedCursor = jumpList.cachedCursor;\n\n          if (cachedCursor) {\n            recordJumpPosition(cm, cachedCursor, motionResult);\n            delete jumpList.cachedCursor;\n          } else {\n            recordJumpPosition(cm, origHead, motionResult);\n          }\n        }\n\n        if (motionResult instanceof Array) {\n          newAnchor = motionResult[0];\n          newHead = motionResult[1];\n        } else {\n          newHead = motionResult;\n        } // TODO: Handle null returns from motion commands better.\n\n\n        if (!newHead) {\n          newHead = copyCursor(origHead);\n        }\n\n        if (vim.visualMode) {\n          if (!(vim.visualBlock && newHead.ch === Infinity)) {\n            newHead = clipCursorToContent(cm, newHead, vim.visualBlock);\n          }\n\n          if (newAnchor) {\n            newAnchor = clipCursorToContent(cm, newAnchor, true);\n          }\n\n          newAnchor = newAnchor || oldAnchor;\n          sel.anchor = newAnchor;\n          sel.head = newHead;\n          updateCmSelection(cm);\n          updateMark(cm, vim, '<', cursorIsBefore(newAnchor, newHead) ? newAnchor : newHead);\n          updateMark(cm, vim, '>', cursorIsBefore(newAnchor, newHead) ? newHead : newAnchor);\n        } else if (!operator) {\n          newHead = clipCursorToContent(cm, newHead);\n          cm.setCursor(newHead.line, newHead.ch);\n        }\n      }\n\n      if (operator) {\n        if (operatorArgs.lastSel) {\n          // Replaying a visual mode operation\n          newAnchor = oldAnchor;\n          var lastSel = operatorArgs.lastSel;\n          var lineOffset = Math.abs(lastSel.head.line - lastSel.anchor.line);\n          var chOffset = Math.abs(lastSel.head.ch - lastSel.anchor.ch);\n\n          if (lastSel.visualLine) {\n            // Linewise Visual mode: The same number of lines.\n            newHead = Pos(oldAnchor.line + lineOffset, oldAnchor.ch);\n          } else if (lastSel.visualBlock) {\n            // Blockwise Visual mode: The same number of lines and columns.\n            newHead = Pos(oldAnchor.line + lineOffset, oldAnchor.ch + chOffset);\n          } else if (lastSel.head.line == lastSel.anchor.line) {\n            // Normal Visual mode within one line: The same number of characters.\n            newHead = Pos(oldAnchor.line, oldAnchor.ch + chOffset);\n          } else {\n            // Normal Visual mode with several lines: The same number of lines, in the\n            // last line the same number of characters as in the last line the last time.\n            newHead = Pos(oldAnchor.line + lineOffset, oldAnchor.ch);\n          }\n\n          vim.visualMode = true;\n          vim.visualLine = lastSel.visualLine;\n          vim.visualBlock = lastSel.visualBlock;\n          sel = vim.sel = {\n            anchor: newAnchor,\n            head: newHead\n          };\n          updateCmSelection(cm);\n        } else if (vim.visualMode) {\n          operatorArgs.lastSel = {\n            anchor: copyCursor(sel.anchor),\n            head: copyCursor(sel.head),\n            visualBlock: vim.visualBlock,\n            visualLine: vim.visualLine\n          };\n        }\n\n        var curStart, curEnd, linewise, mode;\n        var cmSel;\n\n        if (vim.visualMode) {\n          // Init visual op\n          curStart = cursorMin(sel.head, sel.anchor);\n          curEnd = cursorMax(sel.head, sel.anchor);\n          linewise = vim.visualLine || operatorArgs.linewise;\n          mode = vim.visualBlock ? 'block' : linewise ? 'line' : 'char';\n          cmSel = makeCmSelection(cm, {\n            anchor: curStart,\n            head: curEnd\n          }, mode);\n\n          if (linewise) {\n            var ranges = cmSel.ranges;\n\n            if (mode == 'block') {\n              // Linewise operators in visual block mode extend to end of line\n              for (var i = 0; i < ranges.length; i++) {\n                ranges[i].head.ch = lineLength(cm, ranges[i].head.line);\n              }\n            } else if (mode == 'line') {\n              ranges[0].head = Pos(ranges[0].head.line + 1, 0);\n            }\n          }\n        } else {\n          // Init motion op\n          curStart = copyCursor(newAnchor || oldAnchor);\n          curEnd = copyCursor(newHead || oldHead);\n\n          if (cursorIsBefore(curEnd, curStart)) {\n            var tmp = curStart;\n            curStart = curEnd;\n            curEnd = tmp;\n          }\n\n          linewise = motionArgs.linewise || operatorArgs.linewise;\n\n          if (linewise) {\n            // Expand selection to entire line.\n            expandSelectionToLine(cm, curStart, curEnd);\n          } else if (motionArgs.forward) {\n            // Clip to trailing newlines only if the motion goes forward.\n            clipToLine(cm, curStart, curEnd);\n          }\n\n          mode = 'char';\n          var exclusive = !motionArgs.inclusive || linewise;\n          cmSel = makeCmSelection(cm, {\n            anchor: curStart,\n            head: curEnd\n          }, mode, exclusive);\n        }\n\n        cm.setSelections(cmSel.ranges, cmSel.primary);\n        vim.lastMotion = null;\n        operatorArgs.repeat = repeat; // For indent in visual mode.\n\n        operatorArgs.registerName = registerName; // Keep track of linewise as it affects how paste and change behave.\n\n        operatorArgs.linewise = linewise;\n        var operatorMoveTo = operators[operator](cm, operatorArgs, cmSel.ranges, oldAnchor, newHead);\n\n        if (vim.visualMode) {\n          exitVisualMode(cm, operatorMoveTo != null);\n        }\n\n        if (operatorMoveTo) {\n          cm.setCursor(operatorMoveTo);\n        }\n      }\n    },\n    recordLastEdit: function recordLastEdit(vim, inputState, actionCommand) {\n      var macroModeState = vimGlobalState.macroModeState;\n\n      if (macroModeState.isPlaying) {\n        return;\n      }\n\n      vim.lastEditInputState = inputState;\n      vim.lastEditActionCommand = actionCommand;\n      macroModeState.lastInsertModeChanges.changes = [];\n      macroModeState.lastInsertModeChanges.expectCursorActivityForChange = false;\n    }\n  };\n  /**\n   * typedef {Object{line:number,ch:number}} Cursor An object containing the\n   *     position of the cursor.\n   */\n  // All of the functions below return Cursor objects.\n\n  var motions = {\n    moveToTopLine: function moveToTopLine(cm, _head, motionArgs) {\n      var line = getUserVisibleLines(cm).top + motionArgs.repeat - 1;\n      return Pos(line, cm.findFirstNonWhiteSpaceCharacter(line));\n    },\n    moveToMiddleLine: function moveToMiddleLine(cm) {\n      var range = getUserVisibleLines(cm);\n      var line = Math.floor((range.top + range.bottom) * 0.5);\n      return Pos(line, cm.findFirstNonWhiteSpaceCharacter(line));\n    },\n    moveToBottomLine: function moveToBottomLine(cm, _head, motionArgs) {\n      var line = getUserVisibleLines(cm).bottom - motionArgs.repeat + 1;\n      return Pos(line, cm.findFirstNonWhiteSpaceCharacter(line));\n    },\n    expandToLine: function expandToLine(_cm, head, motionArgs) {\n      // Expands forward to end of line, and then to next line if repeat is\n      // >1. Does not handle backward motion!\n      var cur = head;\n      return Pos(cur.line + motionArgs.repeat - 1, Infinity);\n    },\n    findNext: function findNext(cm, _head, motionArgs) {\n      var state = getSearchState(cm);\n      var query = state.getQuery();\n\n      if (!query) {\n        return;\n      }\n\n      var prev = !motionArgs.forward; // If search is initiated with ? instead of /, negate direction.\n\n      prev = state.isReversed() ? !prev : prev;\n      highlightSearchMatches(cm, query);\n      return _findNext(cm, prev\n      /** prev */\n      , query, motionArgs.repeat);\n    },\n    goToMark: function goToMark(cm, _head, motionArgs, vim) {\n      var pos = getMarkPos(cm, vim, motionArgs.selectedCharacter);\n\n      if (pos) {\n        return motionArgs.linewise ? {\n          line: pos.line,\n          ch: cm.findFirstNonWhiteSpaceCharacter(pos.line)\n        } : pos;\n      }\n\n      return null;\n    },\n    moveToOtherHighlightedEnd: function moveToOtherHighlightedEnd(cm, _head, motionArgs, vim) {\n      if (vim.visualBlock && motionArgs.sameLine) {\n        var sel = vim.sel;\n        return [clipCursorToContent(cm, Pos(sel.anchor.line, sel.head.ch)), clipCursorToContent(cm, Pos(sel.head.line, sel.anchor.ch))];\n      } else {\n        return [vim.sel.head, vim.sel.anchor];\n      }\n    },\n    jumpToMark: function jumpToMark(cm, head, motionArgs, vim) {\n      var best = head;\n\n      for (var i = 0; i < motionArgs.repeat; i++) {\n        var cursor = best;\n\n        for (var key in vim.marks) {\n          if (!isLowerCase(key)) {\n            continue;\n          }\n\n          var mark = vim.marks[key].find();\n          var isWrongDirection = motionArgs.forward ? cursorIsBefore(mark, cursor) : cursorIsBefore(cursor, mark);\n\n          if (isWrongDirection) {\n            continue;\n          }\n\n          if (motionArgs.linewise && mark.line == cursor.line) {\n            continue;\n          }\n\n          var equal = cursorEqual(cursor, best);\n          var between = motionArgs.forward ? cursorIsBetween(cursor, mark, best) : cursorIsBetween(best, mark, cursor);\n\n          if (equal || between) {\n            best = mark;\n          }\n        }\n      }\n\n      if (motionArgs.linewise) {\n        // Vim places the cursor on the first non-whitespace character of\n        // the line if there is one, else it places the cursor at the end\n        // of the line, regardless of whether a mark was found.\n        best = Pos(best.line, cm.findFirstNonWhiteSpaceCharacter(best.line));\n      }\n\n      return best;\n    },\n    moveByCharacters: function moveByCharacters(_cm, head, motionArgs) {\n      var cur = head;\n      var repeat = motionArgs.repeat;\n      var ch = motionArgs.forward ? cur.ch + repeat : cur.ch - repeat;\n      return Pos(cur.line, ch);\n    },\n    moveByLines: function moveByLines(cm, head, motionArgs, vim) {\n      var cur = head;\n      var endCh = cur.ch; // Depending what our last motion was, we may want to do different\n      // things. If our last motion was moving vertically, we want to\n      // preserve the HPos from our last horizontal move.  If our last motion\n      // was going to the end of a line, moving vertically we should go to\n      // the end of the line, etc.\n\n      switch (vim.lastMotion) {\n        case this.moveByLines:\n        case this.moveByDisplayLines:\n        case this.moveByScroll:\n        case this.moveToColumn:\n        case this.moveToEol:\n          endCh = vim.lastHPos;\n          break;\n\n        default:\n          vim.lastHPos = endCh;\n      }\n\n      var repeat = motionArgs.repeat + (motionArgs.repeatOffset || 0);\n      var line = motionArgs.forward ? cur.line + repeat : cur.line - repeat;\n      var first = cm.firstLine();\n      var last = cm.lastLine(); // Vim go to line begin or line end when cursor at first/last line and\n      // move to previous/next line is triggered.\n\n      if (line < first && cur.line == first) {\n        return this.moveToStartOfLine(cm, head, motionArgs, vim);\n      } else if (line > last && cur.line == last) {\n        return this.moveToEol(cm, head, motionArgs, vim);\n      }\n\n      if (motionArgs.toFirstChar) {\n        endCh = cm.findFirstNonWhiteSpaceCharacter(line);\n        vim.lastHPos = endCh;\n      }\n\n      vim.lastHSPos = cm.charCoords(Pos(line, endCh), 'div').left;\n      return Pos(line, endCh);\n    },\n    moveByDisplayLines: function moveByDisplayLines(cm, head, motionArgs, vim) {\n      var cur = head;\n\n      switch (vim.lastMotion) {\n        case this.moveByDisplayLines:\n        case this.moveByScroll:\n        case this.moveByLines:\n        case this.moveToColumn:\n        case this.moveToEol:\n          break;\n\n        default:\n          vim.lastHSPos = cm.charCoords(cur, 'div').left;\n      }\n\n      var repeat = motionArgs.repeat;\n      var res = cm.findPosV(cur, motionArgs.forward ? repeat : -repeat, 'line', vim.lastHSPos);\n\n      if (res.hitSide) {\n        if (motionArgs.forward) {\n          var lastCharCoords = cm.charCoords(res, 'div');\n          var goalCoords = {\n            top: lastCharCoords.top + 8,\n            left: vim.lastHSPos\n          };\n          var res = cm.coordsChar(goalCoords, 'div');\n        } else {\n          var resCoords = cm.charCoords(Pos(cm.firstLine(), 0), 'div');\n          resCoords.left = vim.lastHSPos;\n          res = cm.coordsChar(resCoords, 'div');\n        }\n      }\n\n      vim.lastHPos = res.ch;\n      return res;\n    },\n    moveByPage: function moveByPage(cm, head, motionArgs) {\n      // CodeMirror only exposes functions that move the cursor page down, so\n      // doing this bad hack to move the cursor and move it back. evalInput\n      // will move the cursor to where it should be in the end.\n      var curStart = head;\n      var repeat = motionArgs.repeat;\n      return cm.findPosV(curStart, motionArgs.forward ? repeat : -repeat, 'page');\n    },\n    moveByParagraph: function moveByParagraph(cm, head, motionArgs) {\n      var dir = motionArgs.forward ? 1 : -1;\n      return findParagraph(cm, head, motionArgs.repeat, dir);\n    },\n    moveBySentence: function moveBySentence(cm, head, motionArgs) {\n      var dir = motionArgs.forward ? 1 : -1;\n      return findSentence(cm, head, motionArgs.repeat, dir);\n    },\n    moveByScroll: function moveByScroll(cm, head, motionArgs, vim) {\n      var scrollbox = cm.getScrollInfo();\n      var curEnd = null;\n      var repeat = motionArgs.repeat;\n\n      if (!repeat) {\n        repeat = Math.floor(scrollbox.clientHeight / (2 * cm.defaultTextHeight()));\n      }\n\n      var orig = cm.charCoords(head, 'local');\n      motionArgs.repeat = repeat;\n      var curEnd = motions.moveByDisplayLines(cm, head, motionArgs, vim);\n\n      if (!curEnd) {\n        return null;\n      }\n\n      var dest = cm.charCoords(curEnd, 'local');\n      cm.scrollTo(null, scrollbox.top + dest.top - orig.top);\n      return curEnd;\n    },\n    moveByWords: function moveByWords(cm, head, motionArgs) {\n      return moveToWord(cm, head, motionArgs.repeat, !!motionArgs.forward, !!motionArgs.wordEnd, !!motionArgs.bigWord);\n    },\n    moveTillCharacter: function moveTillCharacter(cm, _head, motionArgs) {\n      var repeat = motionArgs.repeat;\n\n      var curEnd = _moveToCharacter(cm, repeat, motionArgs.forward, motionArgs.selectedCharacter);\n\n      var increment = motionArgs.forward ? -1 : 1;\n      recordLastCharacterSearch(increment, motionArgs);\n      if (!curEnd) return null;\n      curEnd.ch += increment;\n      return curEnd;\n    },\n    moveToCharacter: function moveToCharacter(cm, head, motionArgs) {\n      var repeat = motionArgs.repeat;\n      recordLastCharacterSearch(0, motionArgs);\n      return _moveToCharacter(cm, repeat, motionArgs.forward, motionArgs.selectedCharacter) || head;\n    },\n    moveToSymbol: function moveToSymbol(cm, head, motionArgs) {\n      var repeat = motionArgs.repeat;\n      return findSymbol(cm, repeat, motionArgs.forward, motionArgs.selectedCharacter) || head;\n    },\n    moveToColumn: function moveToColumn(cm, head, motionArgs, vim) {\n      var repeat = motionArgs.repeat; // repeat is equivalent to which column we want to move to!\n\n      vim.lastHPos = repeat - 1;\n      vim.lastHSPos = cm.charCoords(head, 'div').left;\n      return _moveToColumn(cm, repeat);\n    },\n    moveToEol: function moveToEol(cm, head, motionArgs, vim) {\n      var cur = head;\n      vim.lastHPos = Infinity;\n      var retval = Pos(cur.line + motionArgs.repeat - 1, Infinity);\n      var end = cm.clipPos(retval);\n      end.ch--;\n      vim.lastHSPos = cm.charCoords(end, 'div').left;\n      return retval;\n    },\n    moveToFirstNonWhiteSpaceCharacter: function moveToFirstNonWhiteSpaceCharacter(cm, head) {\n      // Go to the start of the line where the text begins, or the end for\n      // whitespace-only lines\n      var cursor = head;\n      return Pos(cursor.line, cm.findFirstNonWhiteSpaceCharacter(cursor.line));\n    },\n    moveToMatchedSymbol: function moveToMatchedSymbol(cm, head) {\n      var cursor = head;\n      var line = cursor.line;\n      var ch = cursor.ch;\n      var lineText = cm.getLine(line); // var symbol;\n      // for (; ch < lineText.length; ch++) {\n      //   symbol = lineText.charAt(ch);\n      //   if (symbol && isMatchableSymbol(symbol)) {\n      //     var style = cm.getTokenTypeAt(Pos(line, ch + 1));\n      //     if (style !== \"string\" && style !== \"comment\") {\n      //       break;\n      //     }\n      //   }\n      // }\n\n      if (ch < lineText.length) {\n        var matched = cm.findMatchingBracket(Pos(line, ch));\n        return matched.to;\n      } else {\n        return cursor;\n      }\n    },\n    moveToStartOfLine: function moveToStartOfLine(_cm, head) {\n      return Pos(head.line, 0);\n    },\n    moveToLineOrEdgeOfDocument: function moveToLineOrEdgeOfDocument(cm, _head, motionArgs) {\n      var lineNum = motionArgs.forward ? cm.lastLine() : cm.firstLine();\n\n      if (motionArgs.repeatIsExplicit) {\n        lineNum = motionArgs.repeat - cm.getOption('firstLineNumber');\n      }\n\n      return Pos(lineNum, cm.findFirstNonWhiteSpaceCharacter(lineNum));\n    },\n    textObjectManipulation: function textObjectManipulation(cm, head, motionArgs, vim) {\n      // TODO: lots of possible exceptions that can be thrown here. Try da(\n      //     outside of a () block.\n      // TODO: adding <> >< to this map doesn't work, presumably because\n      // they're operators\n      var mirroredPairs = {\n        '(': ')',\n        ')': '(',\n        '{': '}',\n        '}': '{',\n        '[': ']',\n        ']': '['\n      };\n      var selfPaired = {\n        '\\'': true,\n        '\"': true\n      };\n      var character = motionArgs.selectedCharacter; // 'b' refers to  '()' block.\n      // 'B' refers to  '{}' block.\n\n      if (character == 'b') {\n        character = '(';\n      } else if (character == 'B') {\n        character = '{';\n      } // Inclusive is the difference between a and i\n      // TODO: Instead of using the additional text object map to perform text\n      //     object operations, merge the map into the defaultKeyMap and use\n      //     motionArgs to define behavior. Define separate entries for 'aw',\n      //     'iw', 'a[', 'i[', etc.\n\n\n      var inclusive = !motionArgs.textObjectInner;\n      var tmp;\n\n      if (mirroredPairs[character]) {\n        tmp = selectCompanionObject(cm, head, character, inclusive);\n      } else if (selfPaired[character]) {\n        tmp = findBeginningAndEnd(cm, head, character, inclusive);\n      } else if (character === 'W') {\n        tmp = expandWordUnderCursor(cm, inclusive, true\n        /** forward */\n        , true\n        /** bigWord */\n        );\n      } else if (character === 'w') {\n        tmp = expandWordUnderCursor(cm, inclusive, true\n        /** forward */\n        , false\n        /** bigWord */\n        );\n      } else if (character === 'p') {\n        tmp = findParagraph(cm, head, motionArgs.repeat, 0, inclusive);\n        motionArgs.linewise = true;\n\n        if (vim.visualMode) {\n          if (!vim.visualLine) {\n            vim.visualLine = true;\n          }\n        } else {\n          var operatorArgs = vim.inputState.operatorArgs;\n\n          if (operatorArgs) {\n            operatorArgs.linewise = true;\n          }\n\n          tmp.end.line--;\n        }\n      } else {\n        // No text object defined for this, don't move.\n        return null;\n      }\n\n      if (!cm.state.vim.visualMode) {\n        return [tmp.start, tmp.end];\n      } else {\n        return expandSelection(cm, tmp.start, tmp.end);\n      }\n    },\n    repeatLastCharacterSearch: function repeatLastCharacterSearch(cm, head, motionArgs) {\n      var lastSearch = vimGlobalState.lastCharacterSearch;\n      var repeat = motionArgs.repeat;\n      var forward = motionArgs.forward === lastSearch.forward;\n      var increment = (lastSearch.increment ? 1 : 0) * (forward ? -1 : 1);\n      cm.moveH(-1 * increment, 'char');\n      motionArgs.inclusive = forward ? true : false;\n\n      var curEnd = _moveToCharacter(cm, repeat, forward, lastSearch.selectedCharacter);\n\n      if (!curEnd) {\n        cm.moveH(increment, 'char');\n        return head;\n      }\n\n      curEnd.ch += increment;\n      return curEnd;\n    }\n  };\n\n  function defineMotion(name, fn) {\n    motions[name] = fn;\n  }\n\n  function fillArray(val, times) {\n    var arr = [];\n\n    for (var i = 0; i < times; i++) {\n      arr.push(val);\n    }\n\n    return arr;\n  }\n  /**\n   * An operator acts on a text selection. It receives the list of selections\n   * as input. The corresponding CodeMirror selection is guaranteed to\n  * match the input selection.\n   */\n\n\n  var operators = {\n    change: function change(cm, args, ranges) {\n      var finalHead, text;\n      var vim = cm.state.vim;\n      vimGlobalState.macroModeState.lastInsertModeChanges.inVisualBlock = vim.visualBlock;\n\n      if (!vim.visualMode) {\n        var anchor = ranges[0].anchor,\n            head = ranges[0].head;\n        text = cm.getRange(anchor, head);\n        var lastState = vim.lastEditInputState || {};\n\n        if (lastState.motion == \"moveByWords\" && !isWhiteSpaceString(text)) {\n          // Exclude trailing whitespace if the range is not all whitespace.\n          var match = /\\s+$/.exec(text);\n\n          if (match && lastState.motionArgs && lastState.motionArgs.forward) {\n            head = offsetCursor(head, 0, -match[0].length);\n            text = text.slice(0, -match[0].length);\n          }\n        }\n\n        var prevLineEnd = new Pos(anchor.line - 1, Number.MAX_VALUE);\n        var wasLastLine = cm.firstLine() == cm.lastLine();\n\n        if (head.line > cm.lastLine() && args.linewise && !wasLastLine) {\n          cm.replaceRange('', prevLineEnd, head);\n        } else {\n          cm.replaceRange('', anchor, head);\n        }\n\n        if (args.linewise) {\n          // Push the next line back down, if there is a next line.\n          if (!wasLastLine) {\n            cm.setCursor(prevLineEnd);\n\n            _cm_adapter[\"default\"].commands.newlineAndIndent(cm);\n          } // make sure cursor ends up at the end of the line.\n\n\n          anchor.ch = Number.MAX_VALUE;\n        }\n\n        finalHead = anchor;\n      } else {\n        text = cm.getSelection();\n        var replacement = fillArray('', ranges.length);\n        cm.replaceSelections(replacement);\n        finalHead = cursorMin(ranges[0].head, ranges[0].anchor);\n      }\n\n      vimGlobalState.registerController.pushText(args.registerName, 'change', text, args.linewise, ranges.length > 1);\n      actions.enterInsertMode(cm, {\n        head: finalHead\n      }, cm.state.vim);\n    },\n    // delete is a javascript keyword.\n    'delete': function _delete(cm, args, ranges) {\n      // Add to the undo stack explicitly so that this delete is recorded as a\n      // specific action instead of being bundled with generic other edits.\n      cm.pushUndoStop();\n      var finalHead, text;\n      var vim = cm.state.vim;\n\n      if (!vim.visualBlock) {\n        var anchor = ranges[0].anchor,\n            head = ranges[0].head;\n\n        if (args.linewise && head.line != cm.firstLine() && anchor.line == cm.lastLine() && anchor.line == head.line - 1) {\n          // Special case for dd on last line (and first line).\n          if (anchor.line == cm.firstLine()) {\n            anchor.ch = 0;\n          } else {\n            anchor = Pos(anchor.line - 1, lineLength(cm, anchor.line - 1));\n          }\n        }\n\n        text = cm.getRange(anchor, head);\n        cm.replaceRange('', anchor, head);\n        finalHead = anchor;\n\n        if (args.linewise) {\n          finalHead = motions.moveToFirstNonWhiteSpaceCharacter(cm, anchor);\n        }\n      } else {\n        text = cm.getSelection();\n        var replacement = fillArray('', ranges.length);\n        cm.replaceSelections(replacement);\n        finalHead = ranges[0].anchor;\n      }\n\n      vimGlobalState.registerController.pushText(args.registerName, 'delete', text, args.linewise, vim.visualBlock);\n      var includeLineBreak = vim.insertMode;\n      return clipCursorToContent(cm, finalHead, includeLineBreak);\n    },\n    indent: function indent(cm, args, ranges) {\n      var vim = cm.state.vim;\n      var startLine = ranges[0].anchor.line;\n      var endLine = vim.visualBlock ? ranges[ranges.length - 1].anchor.line : ranges[0].head.line; // In visual mode, n> shifts the selection right n times, instead of\n      // shifting n lines right once.\n\n      var repeat = vim.visualMode ? args.repeat : 1;\n\n      if (args.linewise) {\n        // The only way to delete a newline is to delete until the start of\n        // the next line, so in linewise mode evalInput will include the next\n        // line. We don't want this in indent, so we go back a line.\n        endLine--;\n      }\n\n      cm.pushUndoStop();\n\n      for (var i = startLine; i <= endLine; i++) {\n        for (var j = 0; j < repeat; j++) {\n          cm.indentLine(i, args.indentRight);\n        }\n      }\n\n      cm.pushUndoStop();\n      return motions.moveToFirstNonWhiteSpaceCharacter(cm, ranges[0].anchor);\n    },\n    changeCase: function changeCase(cm, args, ranges, oldAnchor, newHead) {\n      var selections = cm.getSelections();\n      var swapped = [];\n      var toLower = args.toLower;\n\n      for (var j = 0; j < selections.length; j++) {\n        var toSwap = selections[j];\n        var text = '';\n\n        if (toLower === true) {\n          text = toSwap.toLowerCase();\n        } else if (toLower === false) {\n          text = toSwap.toUpperCase();\n        } else {\n          for (var i = 0; i < toSwap.length; i++) {\n            var character = toSwap.charAt(i);\n            text += isUpperCase(character) ? character.toLowerCase() : character.toUpperCase();\n          }\n        }\n\n        swapped.push(text);\n      }\n\n      cm.replaceSelections(swapped);\n\n      if (args.shouldMoveCursor) {\n        return newHead;\n      } else if (!cm.state.vim.visualMode && args.linewise && ranges[0].anchor.line + 1 == ranges[0].head.line) {\n        return motions.moveToFirstNonWhiteSpaceCharacter(cm, oldAnchor);\n      } else if (args.linewise) {\n        return oldAnchor;\n      } else {\n        return cursorMin(ranges[0].anchor, ranges[0].head);\n      }\n    },\n    yank: function yank(cm, args, ranges, oldAnchor) {\n      var vim = cm.state.vim;\n      var text = cm.getSelection();\n      var endPos = vim.visualMode ? cursorMin(vim.sel.anchor, vim.sel.head, ranges[0].head, ranges[0].anchor) : oldAnchor;\n      vimGlobalState.registerController.pushText(args.registerName, 'yank', text, args.linewise, vim.visualBlock);\n      return endPos;\n    }\n  };\n\n  function defineOperator(name, fn) {\n    operators[name] = fn;\n  }\n\n  var actions = {\n    jumpListWalk: function jumpListWalk(cm, actionArgs, vim) {\n      if (vim.visualMode) {\n        return;\n      }\n\n      var repeat = actionArgs.repeat;\n      var forward = actionArgs.forward;\n      var jumpList = vimGlobalState.jumpList;\n      var mark = jumpList.move(cm, forward ? repeat : -repeat);\n      var markPos = mark ? mark.find() : undefined;\n      markPos = markPos ? markPos : cm.getCursor();\n      cm.setCursor(markPos);\n    },\n    scroll: function scroll(cm, actionArgs, vim) {\n      if (vim.visualMode) {\n        return;\n      }\n\n      var repeat = actionArgs.repeat || 1;\n      var lineHeight = cm.defaultTextHeight();\n      var top = cm.getScrollInfo().top;\n      var delta = lineHeight * repeat;\n      var newPos = actionArgs.forward ? top + delta : top - delta;\n      var cursor = copyCursor(cm.getCursor());\n      var cursorCoords = cm.charCoords(cursor, 'local');\n\n      if (actionArgs.forward) {\n        if (newPos > cursorCoords.top) {\n          cursor.line += (newPos - cursorCoords.top) / lineHeight;\n          cursor.line = Math.ceil(cursor.line);\n          cm.setCursor(cursor);\n          cursorCoords = cm.charCoords(cursor, 'local');\n          cm.scrollTo(null, cursorCoords.top);\n        } else {\n          // Cursor stays within bounds.  Just reposition the scroll window.\n          cm.scrollTo(null, newPos);\n        }\n      } else {\n        var newBottom = newPos + cm.getScrollInfo().clientHeight;\n\n        if (newBottom < cursorCoords.bottom) {\n          cursor.line -= (cursorCoords.bottom - newBottom) / lineHeight;\n          cursor.line = Math.floor(cursor.line);\n          cm.setCursor(cursor);\n          cursorCoords = cm.charCoords(cursor, 'local');\n          cm.scrollTo(null, cursorCoords.bottom - cm.getScrollInfo().clientHeight);\n        } else {\n          // Cursor stays within bounds.  Just reposition the scroll window.\n          cm.scrollTo(null, newPos);\n        }\n      }\n    },\n    scrollToCursor: function scrollToCursor(cm, actionArgs) {\n      // var lineNum = cm.getCursor().line;\n      // var charCoords = cm.charCoords(Pos(lineNum, 0), 'local');\n      // var height = cm.getScrollInfo().clientHeight;\n      // var y = charCoords.top;\n      // var lineHeight = charCoords.bottom - y;\n      // switch (actionArgs.position) {\n      //   case 'center': y = y - (height / 2) + lineHeight;\n      //     break;\n      //   case 'bottom': y = y - height + lineHeight;\n      //     break;\n      // }\n      // cm.scrollTo(null, y);\n      cm.moveCurrentLineTo(actionArgs.position);\n    },\n    replayMacro: function replayMacro(cm, actionArgs, vim) {\n      var registerName = actionArgs.selectedCharacter;\n      var repeat = actionArgs.repeat;\n      var macroModeState = vimGlobalState.macroModeState;\n\n      if (registerName == '@') {\n        registerName = macroModeState.latestRegister;\n      }\n\n      while (repeat--) {\n        executeMacroRegister(cm, vim, macroModeState, registerName);\n      }\n    },\n    enterMacroRecordMode: function enterMacroRecordMode(cm, actionArgs) {\n      var macroModeState = vimGlobalState.macroModeState;\n      var registerName = actionArgs.selectedCharacter;\n\n      if (vimGlobalState.registerController.isValidRegister(registerName)) {\n        macroModeState.enterMacroRecordMode(cm, registerName);\n      }\n    },\n    toggleOverwrite: function toggleOverwrite(cm) {\n      if (!cm.replaceMode) {\n        cm.toggleOverwrite(true);\n        cm.setOption('keyMap', 'vim-replace');\n\n        _cm_adapter[\"default\"].signal(cm, \"vim-mode-change\", {\n          mode: \"replace\"\n        });\n      } else {\n        cm.toggleOverwrite(false);\n        cm.setOption('keyMap', 'vim-insert');\n\n        _cm_adapter[\"default\"].signal(cm, \"vim-mode-change\", {\n          mode: \"insert\"\n        });\n      }\n    },\n    enterInsertMode: function enterInsertMode(cm, actionArgs, vim) {\n      if (cm.getOption('readOnly')) {\n        return;\n      }\n\n      vim.insertMode = true;\n      vim.insertModeRepeat = actionArgs && actionArgs.repeat || 1;\n      cm.leaveVimMode();\n      var insertAt = actionArgs ? actionArgs.insertAt : null;\n      var sel = vim.sel;\n      var head = actionArgs.head || cm.getCursor('head');\n      var height = cm.listSelections().length;\n\n      if (insertAt == 'eol') {\n        head = Pos(head.line, lineLength(cm, head.line));\n      } else if (insertAt == 'charAfter') {\n        head = offsetCursor(head, 0, 1);\n      } else if (insertAt == 'firstNonBlank') {\n        head = motions.moveToFirstNonWhiteSpaceCharacter(cm, head);\n      } else if (insertAt == 'startOfSelectedArea') {\n        if (!vim.visualBlock) {\n          if (sel.head.line < sel.anchor.line) {\n            head = sel.head;\n          } else {\n            head = Pos(sel.anchor.line, 0);\n          }\n        } else {\n          head = Pos(Math.min(sel.head.line, sel.anchor.line), Math.min(sel.head.ch, sel.anchor.ch));\n          height = Math.abs(sel.head.line - sel.anchor.line) + 1;\n        }\n      } else if (insertAt == 'endOfSelectedArea') {\n        if (!vim.visualBlock) {\n          if (sel.head.line >= sel.anchor.line) {\n            head = offsetCursor(sel.head, 0, 1);\n          } else {\n            head = Pos(sel.anchor.line, 0);\n          }\n        } else {\n          head = Pos(Math.min(sel.head.line, sel.anchor.line), Math.max(sel.head.ch + 1, sel.anchor.ch));\n          height = Math.abs(sel.head.line - sel.anchor.line) + 1;\n        }\n      } else if (insertAt == 'inplace') {\n        if (vim.visualMode) {\n          return;\n        }\n      }\n\n      cm.setOption('disableInput', false);\n\n      if (vim.visualMode) {\n        exitVisualMode(cm);\n      }\n\n      if (actionArgs && actionArgs.replace) {\n        // Handle Replace-mode as a special case of insert mode.\n        cm.toggleOverwrite(true);\n        cm.setOption('keyMap', 'vim-replace');\n\n        _cm_adapter[\"default\"].signal(cm, \"vim-mode-change\", {\n          mode: \"replace\"\n        });\n      } else {\n        cm.toggleOverwrite(false);\n        cm.setOption('keyMap', 'vim-insert');\n\n        _cm_adapter[\"default\"].signal(cm, \"vim-mode-change\", {\n          mode: \"insert\"\n        });\n      }\n\n      if (!vimGlobalState.macroModeState.isPlaying) {\n        // Only record if not replaying.\n        cm.on('change', onChange);\n\n        _cm_adapter[\"default\"].on(cm.getInputField(), 'keydown', onKeyEventTargetKeyDown);\n      }\n\n      selectForInsert(cm, head, height);\n    },\n    toggleVisualMode: function toggleVisualMode(cm, actionArgs, vim) {\n      var repeat = actionArgs.repeat;\n      var anchor = cm.getCursor();\n      var head; // TODO: The repeat should actually select number of characters/lines\n      //     equal to the repeat times the size of the previous visual\n      //     operation.\n\n      if (!vim.visualMode) {\n        // Entering visual mode\n        vim.visualMode = true;\n        vim.visualLine = !!actionArgs.linewise;\n        vim.visualBlock = !!actionArgs.blockwise;\n        head = clipCursorToContent(cm, Pos(anchor.line, anchor.ch + repeat - 1), true\n        /** includeLineBreak */\n        );\n        vim.sel = {\n          anchor: anchor,\n          head: head\n        };\n\n        _cm_adapter[\"default\"].signal(cm, \"vim-mode-change\", {\n          mode: \"visual\",\n          subMode: vim.visualLine ? \"linewise\" : vim.visualBlock ? \"blockwise\" : \"\"\n        });\n\n        updateCmSelection(cm);\n        updateMark(cm, vim, '<', cursorMin(anchor, head));\n        updateMark(cm, vim, '>', cursorMax(anchor, head));\n      } else if (vim.visualLine ^ actionArgs.linewise || vim.visualBlock ^ actionArgs.blockwise) {\n        // Toggling between modes\n        vim.visualLine = !!actionArgs.linewise;\n        vim.visualBlock = !!actionArgs.blockwise;\n\n        _cm_adapter[\"default\"].signal(cm, \"vim-mode-change\", {\n          mode: \"visual\",\n          subMode: vim.visualLine ? \"linewise\" : vim.visualBlock ? \"blockwise\" : \"\"\n        });\n\n        updateCmSelection(cm);\n      } else {\n        exitVisualMode(cm);\n      }\n    },\n    reselectLastSelection: function reselectLastSelection(cm, _actionArgs, vim) {\n      var lastSelection = vim.lastSelection;\n\n      if (vim.visualMode) {\n        updateLastSelection(cm, vim);\n      }\n\n      if (lastSelection) {\n        var anchor = lastSelection.anchorMark.find();\n        var head = lastSelection.headMark.find();\n\n        if (!anchor || !head) {\n          // If the marks have been destroyed due to edits, do nothing.\n          return;\n        }\n\n        vim.sel = {\n          anchor: anchor,\n          head: head\n        };\n        vim.visualMode = true;\n        vim.visualLine = lastSelection.visualLine;\n        vim.visualBlock = lastSelection.visualBlock;\n        updateCmSelection(cm);\n        updateMark(cm, vim, '<', cursorMin(anchor, head));\n        updateMark(cm, vim, '>', cursorMax(anchor, head));\n\n        _cm_adapter[\"default\"].signal(cm, 'vim-mode-change', {\n          mode: 'visual',\n          subMode: vim.visualLine ? 'linewise' : vim.visualBlock ? 'blockwise' : ''\n        });\n      }\n    },\n    joinLines: function joinLines(cm, actionArgs, vim) {\n      var curStart, curEnd;\n\n      if (vim.visualMode) {\n        curStart = cm.getCursor('anchor');\n        curEnd = cm.getCursor('head');\n\n        if (cursorIsBefore(curEnd, curStart)) {\n          var tmp = curEnd;\n          curEnd = curStart;\n          curStart = tmp;\n        }\n\n        curEnd.ch = lineLength(cm, curEnd.line) - 1;\n      } else {\n        // Repeat is the number of lines to join. Minimum 2 lines.\n        var repeat = Math.max(actionArgs.repeat, 2);\n        curStart = cm.getCursor();\n        curEnd = clipCursorToContent(cm, Pos(curStart.line + repeat - 1, Infinity));\n      }\n\n      var finalCh = 0;\n\n      for (var i = curStart.line; i < curEnd.line; i++) {\n        finalCh = lineLength(cm, curStart.line);\n        var tmp = Pos(curStart.line + 1, lineLength(cm, curStart.line + 1));\n        var text = cm.getRange(curStart, tmp);\n        text = text.replace(/\\n\\s*/g, ' ');\n        cm.replaceRange(text, curStart, tmp);\n      }\n\n      var curFinalPos = Pos(curStart.line, finalCh);\n\n      if (vim.visualMode) {\n        exitVisualMode(cm, false);\n      }\n\n      cm.setCursor(curFinalPos);\n    },\n    newLineAndEnterInsertMode: function newLineAndEnterInsertMode(cm, actionArgs, vim) {\n      vim.insertMode = true;\n      var insertAt = copyCursor(cm.getCursor());\n\n      if (insertAt.line === cm.firstLine() && !actionArgs.after) {\n        // Special case for inserting newline before start of document.\n        cm.replaceRange('\\n', Pos(cm.firstLine(), 0));\n        cm.setCursor(cm.firstLine(), 0);\n      } else {\n        insertAt.line = actionArgs.after ? insertAt.line : insertAt.line - 1;\n        insertAt.ch = lineLength(cm, insertAt.line);\n        cm.setCursor(insertAt);\n        var newlineFn = _cm_adapter[\"default\"].commands.newlineAndIndentContinueComment || _cm_adapter[\"default\"].commands.newlineAndIndent;\n        newlineFn(cm);\n      }\n\n      this.enterInsertMode(cm, {\n        repeat: actionArgs.repeat\n      }, vim);\n    },\n    paste: function paste(cm, actionArgs, vim) {\n      var cur = copyCursor(cm.getCursor());\n      var register = vimGlobalState.registerController.getRegister(actionArgs.registerName);\n      var text = register.toString();\n\n      if (!text) {\n        return;\n      }\n\n      if (actionArgs.matchIndent) {\n        var tabSize = cm.getOption(\"tabSize\"); // length that considers tabs and tabSize\n\n        var whitespaceLength = function whitespaceLength(str) {\n          var tabs = str.split(\"\\t\").length - 1;\n          var spaces = str.split(\" \").length - 1;\n          return tabs * tabSize + spaces * 1;\n        };\n\n        var currentLine = cm.getLine(cm.getCursor().line);\n        var indent = whitespaceLength(currentLine.match(/^\\s*/)[0]); // chomp last newline b/c don't want it to match /^\\s*/gm\n\n        var chompedText = text.replace(/\\n$/, '');\n        var wasChomped = text !== chompedText;\n        var firstIndent = whitespaceLength(text.match(/^\\s*/)[0]);\n        var text = chompedText.replace(/^\\s*/gm, function (wspace) {\n          var newIndent = indent + (whitespaceLength(wspace) - firstIndent);\n\n          if (newIndent < 0) {\n            return \"\";\n          } else if (cm.getOption(\"indentWithTabs\")) {\n            var quotient = Math.floor(newIndent / tabSize);\n            return Array(quotient + 1).join('\\t');\n          } else {\n            return Array(newIndent + 1).join(' ');\n          }\n        });\n        text += wasChomped ? \"\\n\" : \"\";\n      }\n\n      if (actionArgs.repeat > 1) {\n        var text = Array(actionArgs.repeat + 1).join(text);\n      }\n\n      var linewise = register.linewise;\n      var blockwise = register.blockwise;\n\n      if (linewise) {\n        if (vim.visualMode) {\n          text = vim.visualLine ? text.slice(0, -1) : '\\n' + text.slice(0, text.length - 1) + '\\n';\n        } else if (actionArgs.after) {\n          // Move the newline at the end to the start instead, and paste just\n          // before the newline character of the line we are on right now.\n          text = '\\n' + text.slice(0, text.length - 1);\n          cur.ch = lineLength(cm, cur.line);\n        } else {\n          cur.ch = 0;\n        }\n      } else {\n        if (blockwise) {\n          text = text.split('\\n');\n\n          for (var i = 0; i < text.length; i++) {\n            text[i] = text[i] == '' ? ' ' : text[i];\n          }\n        }\n\n        cur.ch += actionArgs.after ? 1 : 0;\n      }\n\n      var curPosFinal;\n      var idx;\n\n      if (vim.visualMode) {\n        //  save the pasted text for reselection if the need arises\n        vim.lastPastedText = text;\n        var lastSelectionCurEnd;\n        var selectedArea = getSelectedAreaRange(cm, vim);\n        var selectionStart = selectedArea[0];\n        var selectionEnd = selectedArea[1];\n        var selectedText = cm.getSelection();\n        var selections = cm.listSelections();\n        var emptyStrings = new Array(selections.length).join('1').split('1'); // save the curEnd marker before it get cleared due to cm.replaceRange.\n\n        if (vim.lastSelection) {\n          lastSelectionCurEnd = vim.lastSelection.headMark.find();\n        } // push the previously selected text to unnamed register\n\n\n        vimGlobalState.registerController.unnamedRegister.setText(selectedText);\n\n        if (blockwise) {\n          // first delete the selected text\n          cm.replaceSelections(emptyStrings); // Set new selections as per the block length of the yanked text\n\n          selectionEnd = Pos(selectionStart.line + text.length - 1, selectionStart.ch);\n          cm.setCursor(selectionStart);\n          selectBlock(cm, selectionEnd);\n          cm.replaceSelections(text);\n          curPosFinal = selectionStart;\n        } else if (vim.visualBlock) {\n          cm.replaceSelections(emptyStrings);\n          cm.setCursor(selectionStart);\n          cm.replaceRange(text, selectionStart, selectionStart);\n          curPosFinal = selectionStart;\n        } else {\n          cm.replaceRange(text, selectionStart, selectionEnd);\n          curPosFinal = cm.posFromIndex(cm.indexFromPos(selectionStart) + text.length - 1);\n        } // restore the the curEnd marker\n\n\n        if (lastSelectionCurEnd) {\n          vim.lastSelection.headMark = cm.setBookmark(lastSelectionCurEnd);\n        }\n\n        if (linewise) {\n          curPosFinal.ch = 0;\n        }\n      } else {\n        if (blockwise) {\n          cm.setCursor(cur);\n\n          for (var i = 0; i < text.length; i++) {\n            var line = cur.line + i;\n\n            if (line > cm.lastLine()) {\n              cm.replaceRange('\\n', Pos(line, 0));\n            }\n\n            var lastCh = lineLength(cm, line);\n\n            if (lastCh < cur.ch) {\n              extendLineToColumn(cm, line, cur.ch);\n            }\n          }\n\n          cm.setCursor(cur);\n          selectBlock(cm, Pos(cur.line + text.length - 1, cur.ch));\n          cm.replaceSelections(text);\n          curPosFinal = cur;\n        } else {\n          cm.replaceRange(text, cur); // Now fine tune the cursor to where we want it.\n\n          if (linewise && actionArgs.after) {\n            curPosFinal = Pos(cur.line + 1, cm.findFirstNonWhiteSpaceCharacter(cur.line + 1));\n          } else if (linewise && !actionArgs.after) {\n            curPosFinal = Pos(cur.line, cm.findFirstNonWhiteSpaceCharacter(cur.line));\n          } else if (!linewise && actionArgs.after) {\n            idx = cm.indexFromPos(cur);\n            curPosFinal = cm.posFromIndex(idx + text.length - 1);\n          } else {\n            idx = cm.indexFromPos(cur);\n            curPosFinal = cm.posFromIndex(idx + text.length);\n          }\n        }\n      }\n\n      if (vim.visualMode) {\n        exitVisualMode(cm, false);\n      }\n\n      cm.setCursor(curPosFinal);\n    },\n    undo: function undo(cm, actionArgs) {\n      cm.operation(function () {\n        repeatFn(cm, _cm_adapter[\"default\"].commands.undo, actionArgs.repeat)();\n        cm.setCursor(cm.getCursor('anchor'));\n      });\n    },\n    redo: function redo(cm, actionArgs) {\n      repeatFn(cm, _cm_adapter[\"default\"].commands.redo, actionArgs.repeat)();\n    },\n    setRegister: function setRegister(_cm, actionArgs, vim) {\n      vim.inputState.registerName = actionArgs.selectedCharacter;\n    },\n    setMark: function setMark(cm, actionArgs, vim) {\n      var markName = actionArgs.selectedCharacter;\n      updateMark(cm, vim, markName, cm.getCursor());\n    },\n    replace: function replace(cm, actionArgs, vim) {\n      var replaceWith = actionArgs.selectedCharacter;\n      var curStart = cm.getCursor();\n      var replaceTo;\n      var curEnd;\n      var selections = cm.listSelections();\n\n      if (vim.visualMode) {\n        curStart = cm.getCursor('start');\n        curEnd = cm.getCursor('end');\n      } else {\n        var line = cm.getLine(curStart.line);\n        replaceTo = curStart.ch + actionArgs.repeat;\n\n        if (replaceTo > line.length) {\n          replaceTo = line.length;\n        }\n\n        curEnd = Pos(curStart.line, replaceTo);\n      }\n\n      if (replaceWith == '\\n') {\n        if (!vim.visualMode) cm.replaceRange('', curStart, curEnd); // special case, where vim help says to replace by just one line-break\n\n        (_cm_adapter[\"default\"].commands.newlineAndIndentContinueComment || _cm_adapter[\"default\"].commands.newlineAndIndent)(cm);\n      } else {\n        var replaceWithStr = cm.getRange(curStart, curEnd); //replace all characters in range by selected, but keep linebreaks\n\n        replaceWithStr = replaceWithStr.replace(/[^\\n]/g, replaceWith);\n\n        if (vim.visualBlock) {\n          // Tabs are split in visua block before replacing\n          var spaces = new Array(cm.getOption(\"tabSize\") + 1).join(' ');\n          replaceWithStr = cm.getSelection();\n          replaceWithStr = replaceWithStr.replace(/\\t/g, spaces).replace(/[^\\n]/g, replaceWith).split('\\n');\n          cm.replaceSelections(replaceWithStr);\n        } else {\n          cm.replaceRange(replaceWithStr, curStart, curEnd);\n        }\n\n        if (vim.visualMode) {\n          curStart = cursorIsBefore(selections[0].anchor, selections[0].head) ? selections[0].anchor : selections[0].head;\n          cm.setCursor(curStart);\n          exitVisualMode(cm, false);\n        } else {\n          cm.setCursor(offsetCursor(curEnd, 0, -1));\n        }\n      }\n    },\n    incrementNumberToken: function incrementNumberToken(cm, actionArgs) {\n      var cur = cm.getCursor();\n      var lineStr = cm.getLine(cur.line);\n      var re = /(-?)(?:(0x)([\\da-f]+)|(0b|0|)(\\d+))/gi;\n      var match;\n      var start;\n      var end;\n      var numberStr;\n\n      while ((match = re.exec(lineStr)) !== null) {\n        start = match.index;\n        end = start + match[0].length;\n        if (cur.ch < end) break;\n      }\n\n      if (!actionArgs.backtrack && end <= cur.ch) return;\n\n      if (match) {\n        var baseStr = match[2] || match[4];\n        var digits = match[3] || match[5];\n        var increment = actionArgs.increase ? 1 : -1;\n        var base = {\n          '0b': 2,\n          '0': 8,\n          '': 10,\n          '0x': 16\n        }[baseStr.toLowerCase()];\n        var number = parseInt(match[1] + digits, base) + increment * actionArgs.repeat;\n        numberStr = number.toString(base);\n        var zeroPadding = baseStr ? new Array(digits.length - numberStr.length + 1 + match[1].length).join('0') : '';\n\n        if (numberStr.charAt(0) === '-') {\n          numberStr = '-' + baseStr + zeroPadding + numberStr.substr(1);\n        } else {\n          numberStr = baseStr + zeroPadding + numberStr;\n        }\n\n        var from = Pos(cur.line, start);\n        var to = Pos(cur.line, end);\n        cm.replaceRange(numberStr, from, to);\n      } else {\n        return;\n      }\n\n      cm.setCursor(Pos(cur.line, start + numberStr.length - 1));\n    },\n    repeatLastEdit: function repeatLastEdit(cm, actionArgs, vim) {\n      var lastEditInputState = vim.lastEditInputState;\n\n      if (!lastEditInputState) {\n        return;\n      }\n\n      var repeat = actionArgs.repeat;\n\n      if (repeat && actionArgs.repeatIsExplicit) {\n        vim.lastEditInputState.repeatOverride = repeat;\n      } else {\n        repeat = vim.lastEditInputState.repeatOverride || repeat;\n      }\n\n      _repeatLastEdit(cm, vim, repeat, false\n      /** repeatForInsert */\n      );\n    },\n    indent: function indent(cm, actionArgs) {\n      cm.indentLine(cm.getCursor().line, actionArgs.indentRight);\n    },\n    exitInsertMode: exitInsertMode\n  };\n\n  function defineAction(name, fn) {\n    actions[name] = fn;\n  }\n  /*\n   * Below are miscellaneous utility functions used by vim.js\n   */\n\n  /**\n   * Clips cursor to ensure that line is within the buffer's range\n   * If includeLineBreak is true, then allow cur.ch == lineLength.\n   */\n\n\n  function clipCursorToContent(cm, cur, includeLineBreak) {\n    var line = Math.min(Math.max(cm.firstLine(), cur.line), cm.lastLine());\n    var maxCh = lineLength(cm, line) - 1;\n    maxCh = includeLineBreak ? maxCh + 1 : maxCh;\n    var ch = Math.min(Math.max(0, cur.ch), maxCh);\n    return Pos(line, ch);\n  }\n\n  function copyArgs(args) {\n    var ret = {};\n\n    for (var prop in args) {\n      if (args.hasOwnProperty(prop)) {\n        ret[prop] = args[prop];\n      }\n    }\n\n    return ret;\n  }\n\n  function offsetCursor(cur, offsetLine, offsetCh) {\n    if (_typeof(offsetLine) === 'object') {\n      offsetCh = offsetLine.ch;\n      offsetLine = offsetLine.line;\n    }\n\n    return Pos(cur.line + offsetLine, cur.ch + offsetCh);\n  }\n\n  function getOffset(anchor, head) {\n    return {\n      line: head.line - anchor.line,\n      ch: head.line - anchor.line\n    };\n  }\n\n  function commandMatches(keys, keyMap, context, inputState) {\n    // Partial matches are not applied. They inform the key handler\n    // that the current key sequence is a subsequence of a valid key\n    // sequence, so that the key buffer is not cleared.\n    var match,\n        partial = [],\n        full = [];\n\n    for (var i = 0; i < keyMap.length; i++) {\n      var command = keyMap[i];\n\n      if (context == 'insert' && command.context != 'insert' || command.context && command.context != context || inputState.operator && command.type == 'action' || !(match = commandMatch(keys, command.keys))) {\n        continue;\n      }\n\n      if (match == 'partial') {\n        partial.push(command);\n      }\n\n      if (match == 'full') {\n        full.push(command);\n      }\n    }\n\n    return {\n      partial: partial.length && partial,\n      full: full.length && full\n    };\n  }\n\n  function commandMatch(pressed, mapped) {\n    if (mapped.slice(-11) == '<character>') {\n      // Last character matches anything.\n      var prefixLen = mapped.length - 11;\n      var pressedPrefix = pressed.slice(0, prefixLen);\n      var mappedPrefix = mapped.slice(0, prefixLen);\n      return pressedPrefix == mappedPrefix && pressed.length > prefixLen ? 'full' : mappedPrefix.indexOf(pressedPrefix) == 0 ? 'partial' : false;\n    } else {\n      return pressed == mapped ? 'full' : mapped.indexOf(pressed) == 0 ? 'partial' : false;\n    }\n  }\n\n  function lastChar(keys) {\n    var match = /^.*(<[^>]+>)$/.exec(keys);\n    var selectedCharacter = match ? match[1] : keys.slice(-1);\n\n    if (selectedCharacter.length > 1) {\n      switch (selectedCharacter) {\n        case '<CR>':\n          selectedCharacter = '\\n';\n          break;\n\n        case '<Space>':\n          selectedCharacter = ' ';\n          break;\n\n        default:\n          selectedCharacter = '';\n          break;\n      }\n    }\n\n    return selectedCharacter;\n  }\n\n  function repeatFn(cm, fn, repeat) {\n    return function () {\n      for (var i = 0; i < repeat; i++) {\n        fn(cm);\n      }\n    };\n  }\n\n  function copyCursor(cur) {\n    return Pos(cur.line, cur.ch);\n  }\n\n  function cursorEqual(cur1, cur2) {\n    return cur1.ch == cur2.ch && cur1.line == cur2.line;\n  }\n\n  function cursorIsBefore(cur1, cur2) {\n    if (cur1.line < cur2.line) {\n      return true;\n    }\n\n    if (cur1.line == cur2.line && cur1.ch < cur2.ch) {\n      return true;\n    }\n\n    return false;\n  }\n\n  function cursorMin(cur1, cur2) {\n    if (arguments.length > 2) {\n      cur2 = cursorMin.apply(undefined, Array.prototype.slice.call(arguments, 1));\n    }\n\n    return cursorIsBefore(cur1, cur2) ? cur1 : cur2;\n  }\n\n  function cursorMax(cur1, cur2) {\n    if (arguments.length > 2) {\n      cur2 = cursorMax.apply(undefined, Array.prototype.slice.call(arguments, 1));\n    }\n\n    return cursorIsBefore(cur1, cur2) ? cur2 : cur1;\n  }\n\n  function cursorIsBetween(cur1, cur2, cur3) {\n    // returns true if cur2 is between cur1 and cur3.\n    var cur1before2 = cursorIsBefore(cur1, cur2);\n    var cur2before3 = cursorIsBefore(cur2, cur3);\n    return cur1before2 && cur2before3;\n  }\n\n  function lineLength(cm, lineNum) {\n    return cm.getLine(lineNum).length;\n  }\n\n  function trim(s) {\n    if (s.trim) {\n      return s.trim();\n    }\n\n    return s.replace(/^\\s+|\\s+$/g, '');\n  }\n\n  function escapeRegex(s) {\n    return s.replace(/([.?*+$\\[\\]\\/\\\\(){}|\\-])/g, '\\\\$1');\n  }\n\n  function extendLineToColumn(cm, lineNum, column) {\n    var endCh = lineLength(cm, lineNum);\n    var spaces = new Array(column - endCh + 1).join(' ');\n    cm.setCursor(Pos(lineNum, endCh));\n    cm.replaceRange(spaces, cm.getCursor());\n  } // This functions selects a rectangular block\n  // of text with selectionEnd as any of its corner\n  // Height of block:\n  // Difference in selectionEnd.line and first/last selection.line\n  // Width of the block:\n  // Distance between selectionEnd.ch and any(first considered here) selection.ch\n\n\n  function selectBlock(cm, selectionEnd) {\n    var selections = [],\n        ranges = cm.listSelections();\n    var head = copyCursor(cm.clipPos(selectionEnd));\n    var isClipped = !cursorEqual(selectionEnd, head);\n    var curHead = cm.getCursor('head');\n    var primIndex = getIndex(ranges, curHead);\n    var wasClipped = cursorEqual(ranges[primIndex].head, ranges[primIndex].anchor);\n    var max = ranges.length - 1;\n    var index = max - primIndex > primIndex ? max : 0;\n    var base = ranges[index].anchor;\n    var firstLine = Math.min(base.line, head.line);\n    var lastLine = Math.max(base.line, head.line);\n    var baseCh = base.ch,\n        headCh = head.ch;\n    var dir = ranges[index].head.ch - baseCh;\n    var newDir = headCh - baseCh;\n\n    if (dir > 0 && newDir <= 0) {\n      baseCh++;\n\n      if (!isClipped) {\n        headCh--;\n      }\n    } else if (dir < 0 && newDir >= 0) {\n      baseCh--;\n\n      if (!wasClipped) {\n        headCh++;\n      }\n    } else if (dir < 0 && newDir == -1) {\n      baseCh--;\n      headCh++;\n    }\n\n    for (var line = firstLine; line <= lastLine; line++) {\n      var range = {\n        anchor: new Pos(line, baseCh),\n        head: new Pos(line, headCh)\n      };\n      selections.push(range);\n    }\n\n    cm.setSelections(selections);\n    selectionEnd.ch = headCh;\n    base.ch = baseCh;\n    return base;\n  }\n\n  function selectForInsert(cm, head, height) {\n    var sel = [];\n\n    for (var i = 0; i < height; i++) {\n      var lineHead = offsetCursor(head, i, 0);\n      sel.push({\n        anchor: lineHead,\n        head: lineHead\n      });\n    }\n\n    cm.setSelections(sel, 0);\n  } // getIndex returns the index of the cursor in the selections.\n\n\n  function getIndex(ranges, cursor, end) {\n    for (var i = 0; i < ranges.length; i++) {\n      var atAnchor = end != 'head' && cursorEqual(ranges[i].anchor, cursor);\n      var atHead = end != 'anchor' && cursorEqual(ranges[i].head, cursor);\n\n      if (atAnchor || atHead) {\n        return i;\n      }\n    }\n\n    return -1;\n  }\n\n  function getSelectedAreaRange(cm, vim) {\n    var lastSelection = vim.lastSelection;\n\n    var getCurrentSelectedAreaRange = function getCurrentSelectedAreaRange() {\n      var selections = cm.listSelections();\n      var start = selections[0];\n      var end = selections[selections.length - 1];\n      var selectionStart = cursorIsBefore(start.anchor, start.head) ? start.anchor : start.head;\n      var selectionEnd = cursorIsBefore(end.anchor, end.head) ? end.head : end.anchor;\n      return [selectionStart, selectionEnd];\n    };\n\n    var getLastSelectedAreaRange = function getLastSelectedAreaRange() {\n      var selectionStart = cm.getCursor();\n      var selectionEnd = cm.getCursor();\n      var block = lastSelection.visualBlock;\n\n      if (block) {\n        var width = block.width;\n        var height = block.height;\n        selectionEnd = Pos(selectionStart.line + height, selectionStart.ch + width);\n        var selections = []; // selectBlock creates a 'proper' rectangular block.\n        // We do not want that in all cases, so we manually set selections.\n\n        for (var i = selectionStart.line; i < selectionEnd.line; i++) {\n          var anchor = Pos(i, selectionStart.ch);\n          var head = Pos(i, selectionEnd.ch);\n          var range = {\n            anchor: anchor,\n            head: head\n          };\n          selections.push(range);\n        }\n\n        cm.setSelections(selections);\n      } else {\n        var start = lastSelection.anchorMark.find();\n        var end = lastSelection.headMark.find();\n        var line = end.line - start.line;\n        var ch = end.ch - start.ch;\n        selectionEnd = {\n          line: selectionEnd.line + line,\n          ch: line ? selectionEnd.ch : ch + selectionEnd.ch\n        };\n\n        if (lastSelection.visualLine) {\n          selectionStart = Pos(selectionStart.line, 0);\n          selectionEnd = Pos(selectionEnd.line, lineLength(cm, selectionEnd.line));\n        }\n\n        cm.setSelection(selectionStart, selectionEnd);\n      }\n\n      return [selectionStart, selectionEnd];\n    };\n\n    if (!vim.visualMode) {\n      // In case of replaying the action.\n      return getLastSelectedAreaRange();\n    } else {\n      return getCurrentSelectedAreaRange();\n    }\n  } // Updates the previous selection with the current selection's values. This\n  // should only be called in visual mode.\n\n\n  function updateLastSelection(cm, vim) {\n    var anchor = vim.sel.anchor;\n    var head = vim.sel.head; // To accommodate the effect of lastPastedText in the last selection\n\n    if (vim.lastPastedText) {\n      head = cm.posFromIndex(cm.indexFromPos(anchor) + vim.lastPastedText.length);\n      vim.lastPastedText = null;\n    }\n\n    vim.lastSelection = {\n      'anchorMark': cm.setBookmark(anchor),\n      'headMark': cm.setBookmark(head),\n      'anchor': copyCursor(anchor),\n      'head': copyCursor(head),\n      'visualMode': vim.visualMode,\n      'visualLine': vim.visualLine,\n      'visualBlock': vim.visualBlock\n    };\n  }\n\n  function expandSelection(cm, start, end) {\n    var sel = cm.state.vim.sel;\n    var head = sel.head;\n    var anchor = sel.anchor;\n    var tmp;\n\n    if (cursorIsBefore(end, start)) {\n      tmp = end;\n      end = start;\n      start = tmp;\n    }\n\n    if (cursorIsBefore(head, anchor)) {\n      head = cursorMin(start, head);\n      anchor = cursorMax(anchor, end);\n    } else {\n      anchor = cursorMin(start, anchor);\n      head = cursorMax(head, end);\n      head = offsetCursor(head, 0, -1);\n\n      if (head.ch == -1 && head.line != cm.firstLine()) {\n        head = Pos(head.line - 1, lineLength(cm, head.line - 1));\n      }\n    }\n\n    return [anchor, head];\n  }\n  /**\n   * Updates the CodeMirror selection to match the provided vim selection.\n   * If no arguments are given, it uses the current vim selection state.\n   */\n\n\n  function updateCmSelection(cm, sel, mode) {\n    var vim = cm.state.vim;\n    sel = sel || vim.sel;\n    var mode = mode || vim.visualLine ? 'line' : vim.visualBlock ? 'block' : 'char';\n    var cmSel = makeCmSelection(cm, sel, mode, vim.visualMode && mode === 'char');\n    cm.setSelections(cmSel.ranges, cmSel.primary);\n    updateFakeCursor(cm);\n  }\n\n  function makeCmSelection(cm, sel, mode, exclusive) {\n    var head = copyCursor(sel.head);\n    var anchor = copyCursor(sel.anchor);\n\n    if (mode == 'char') {\n      var headOffset = !exclusive && !cursorIsBefore(sel.head, sel.anchor) ? 1 : 0;\n      var anchorOffset = cursorIsBefore(sel.head, sel.anchor) ? 1 : 0;\n      head = offsetCursor(sel.head, 0, headOffset);\n      anchor = offsetCursor(sel.anchor, 0, anchorOffset);\n      return {\n        ranges: [{\n          anchor: anchor,\n          head: head\n        }],\n        primary: 0\n      };\n    } else if (mode == 'line') {\n      if (!cursorIsBefore(sel.head, sel.anchor)) {\n        anchor.ch = 0;\n        var lastLine = cm.lastLine();\n\n        if (head.line > lastLine) {\n          head.line = lastLine;\n        }\n\n        head.ch = lineLength(cm, head.line);\n      } else {\n        head.ch = 0;\n        anchor.ch = lineLength(cm, anchor.line);\n      }\n\n      return {\n        ranges: [{\n          anchor: anchor,\n          head: head\n        }],\n        primary: 0\n      };\n    } else if (mode == 'block') {\n      var top = Math.min(anchor.line, head.line),\n          left = Math.min(anchor.ch, head.ch),\n          bottom = Math.max(anchor.line, head.line),\n          right = Math.max(anchor.ch, head.ch) + 1;\n      var height = bottom - top + 1;\n      var primary = head.line == top ? 0 : height - 1;\n      var ranges = [];\n\n      for (var i = 0; i < height; i++) {\n        ranges.push({\n          anchor: Pos(top + i, left),\n          head: Pos(top + i, right)\n        });\n      }\n\n      return {\n        ranges: ranges,\n        primary: primary\n      };\n    }\n  }\n\n  function getHead(cm) {\n    var cur = cm.getCursor('head');\n\n    if (cm.getSelection().length == 1) {\n      // Small corner case when only 1 character is selected. The \"real\"\n      // head is the left of head and anchor.\n      cur = cursorMin(cur, cm.getCursor('anchor'));\n    }\n\n    return cur;\n  }\n  /**\n   * If moveHead is set to false, the CodeMirror selection will not be\n   * touched. The caller assumes the responsibility of putting the cursor\n  * in the right place.\n   */\n\n\n  function exitVisualMode(cm, moveHead) {\n    var vim = cm.state.vim;\n\n    if (moveHead !== false) {\n      cm.setCursor(clipCursorToContent(cm, vim.sel.head));\n    }\n\n    updateLastSelection(cm, vim);\n    vim.visualMode = false;\n    vim.visualLine = false;\n    vim.visualBlock = false;\n\n    _cm_adapter[\"default\"].signal(cm, \"vim-mode-change\", {\n      mode: \"normal\"\n    });\n\n    if (vim.fakeCursor) {\n      vim.fakeCursor.clear();\n    }\n  } // Remove any trailing newlines from the selection. For\n  // example, with the caret at the start of the last word on the line,\n  // 'dw' should word, but not the newline, while 'w' should advance the\n  // caret to the first character of the next line.\n\n\n  function clipToLine(cm, curStart, curEnd) {\n    var selection = cm.getRange(curStart, curEnd); // Only clip if the selection ends with trailing newline + whitespace\n\n    if (/\\n\\s*$/.test(selection)) {\n      var lines = selection.split('\\n'); // We know this is all whitespace.\n\n      lines.pop(); // Cases:\n      // 1. Last word is an empty line - do not clip the trailing '\\n'\n      // 2. Last word is not an empty line - clip the trailing '\\n'\n\n      var line; // Find the line containing the last word, and clip all whitespace up\n      // to it.\n\n      for (var line = lines.pop(); lines.length > 0 && line && isWhiteSpaceString(line); line = lines.pop()) {\n        curEnd.line--;\n        curEnd.ch = 0;\n      } // If the last word is not an empty line, clip an additional newline\n\n\n      if (line) {\n        curEnd.line--;\n        curEnd.ch = lineLength(cm, curEnd.line);\n      } else {\n        curEnd.ch = 0;\n      }\n    }\n  } // Expand the selection to line ends.\n\n\n  function expandSelectionToLine(_cm, curStart, curEnd) {\n    curStart.ch = 0;\n    curEnd.ch = 0;\n    curEnd.line++;\n  } // function findFirstNonWhiteSpaceCharacter(text) {\n  //   if (!text) {\n  //     return 0;\n  //   }\n  //   var firstNonWS = text.search(/\\S/);\n  //   return firstNonWS == -1 ? text.length : firstNonWS;\n  // }\n\n\n  function expandWordUnderCursor(cm, inclusive, _forward, bigWord, noSymbol) {\n    var cur = getHead(cm);\n    var line = cm.getLine(cur.line);\n    var idx = cur.ch; // Seek to first word or non-whitespace character, depending on if\n    // noSymbol is true.\n\n    var test = noSymbol ? wordCharTest[0] : bigWordCharTest[0];\n\n    while (!test(line.charAt(idx))) {\n      idx++;\n\n      if (idx >= line.length) {\n        return null;\n      }\n    }\n\n    if (bigWord) {\n      test = bigWordCharTest[0];\n    } else {\n      test = wordCharTest[0];\n\n      if (!test(line.charAt(idx))) {\n        test = wordCharTest[1];\n      }\n    }\n\n    var end = idx,\n        start = idx;\n\n    while (test(line.charAt(end)) && end < line.length) {\n      end++;\n    }\n\n    while (test(line.charAt(start)) && start >= 0) {\n      start--;\n    }\n\n    start++;\n\n    if (inclusive) {\n      // If present, include all whitespace after word.\n      // Otherwise, include all whitespace before word, except indentation.\n      var wordEnd = end;\n\n      while (/\\s/.test(line.charAt(end)) && end < line.length) {\n        end++;\n      }\n\n      if (wordEnd == end) {\n        var wordStart = start;\n\n        while (/\\s/.test(line.charAt(start - 1)) && start > 0) {\n          start--;\n        }\n\n        if (!start) {\n          start = wordStart;\n        }\n      }\n    }\n\n    return {\n      start: Pos(cur.line, start),\n      end: Pos(cur.line, end)\n    };\n  }\n\n  function recordJumpPosition(cm, oldCur, newCur) {\n    if (!cursorEqual(oldCur, newCur)) {\n      vimGlobalState.jumpList.add(cm, oldCur, newCur);\n    }\n  }\n\n  function recordLastCharacterSearch(increment, args) {\n    vimGlobalState.lastCharacterSearch.increment = increment;\n    vimGlobalState.lastCharacterSearch.forward = args.forward;\n    vimGlobalState.lastCharacterSearch.selectedCharacter = args.selectedCharacter;\n  }\n\n  var symbolToMode = {\n    '(': 'bracket',\n    ')': 'bracket',\n    '{': 'bracket',\n    '}': 'bracket',\n    '[': 'section',\n    ']': 'section',\n    '*': 'comment',\n    '/': 'comment',\n    'm': 'method',\n    'M': 'method',\n    '#': 'preprocess'\n  };\n  var findSymbolModes = {\n    bracket: {\n      isComplete: function isComplete(state) {\n        if (state.nextCh === state.symb) {\n          state.depth++;\n          if (state.depth >= 1) return true;\n        } else if (state.nextCh === state.reverseSymb) {\n          state.depth--;\n        }\n\n        return false;\n      }\n    },\n    section: {\n      init: function init(state) {\n        state.curMoveThrough = true;\n        state.symb = (state.forward ? ']' : '[') === state.symb ? '{' : '}';\n      },\n      isComplete: function isComplete(state) {\n        return state.index === 0 && state.nextCh === state.symb;\n      }\n    },\n    comment: {\n      isComplete: function isComplete(state) {\n        var found = state.lastCh === '*' && state.nextCh === '/';\n        state.lastCh = state.nextCh;\n        return found;\n      }\n    },\n    // TODO: The original Vim implementation only operates on level 1 and 2.\n    // The current implementation doesn't check for code block level and\n    // therefore it operates on any levels.\n    method: {\n      init: function init(state) {\n        state.symb = state.symb === 'm' ? '{' : '}';\n        state.reverseSymb = state.symb === '{' ? '}' : '{';\n      },\n      isComplete: function isComplete(state) {\n        if (state.nextCh === state.symb) return true;\n        return false;\n      }\n    },\n    preprocess: {\n      init: function init(state) {\n        state.index = 0;\n      },\n      isComplete: function isComplete(state) {\n        if (state.nextCh === '#') {\n          var token = state.lineText.match(/#(\\w+)/)[1];\n\n          if (token === 'endif') {\n            if (state.forward && state.depth === 0) {\n              return true;\n            }\n\n            state.depth++;\n          } else if (token === 'if') {\n            if (!state.forward && state.depth === 0) {\n              return true;\n            }\n\n            state.depth--;\n          }\n\n          if (token === 'else' && state.depth === 0) return true;\n        }\n\n        return false;\n      }\n    }\n  };\n\n  function findSymbol(cm, repeat, forward, symb) {\n    var cur = copyCursor(cm.getCursor());\n    var increment = forward ? 1 : -1;\n    var endLine = forward ? cm.lineCount() : -1;\n    var curCh = cur.ch;\n    var line = cur.line;\n    var lineText = cm.getLine(line);\n    var state = {\n      lineText: lineText,\n      nextCh: lineText.charAt(curCh),\n      lastCh: null,\n      index: curCh,\n      symb: symb,\n      reverseSymb: (forward ? {\n        ')': '(',\n        '}': '{'\n      } : {\n        '(': ')',\n        '{': '}'\n      })[symb],\n      forward: forward,\n      depth: 0,\n      curMoveThrough: false\n    };\n    var mode = symbolToMode[symb];\n    if (!mode) return cur;\n    var init = findSymbolModes[mode].init;\n    var isComplete = findSymbolModes[mode].isComplete;\n\n    if (init) {\n      init(state);\n    }\n\n    while (line !== endLine && repeat) {\n      state.index += increment;\n      state.nextCh = state.lineText.charAt(state.index);\n\n      if (!state.nextCh) {\n        line += increment;\n        state.lineText = cm.getLine(line) || '';\n\n        if (increment > 0) {\n          state.index = 0;\n        } else {\n          var lineLen = state.lineText.length;\n          state.index = lineLen > 0 ? lineLen - 1 : 0;\n        }\n\n        state.nextCh = state.lineText.charAt(state.index);\n      }\n\n      if (isComplete(state)) {\n        cur.line = line;\n        cur.ch = state.index;\n        repeat--;\n      }\n    }\n\n    if (state.nextCh || state.curMoveThrough) {\n      return Pos(line, state.index);\n    }\n\n    return cur;\n  }\n  /*\n   * Returns the boundaries of the next word. If the cursor in the middle of\n   * the word, then returns the boundaries of the current word, starting at\n   * the cursor. If the cursor is at the start/end of a word, and we are going\n   * forward/backward, respectively, find the boundaries of the next word.\n   *\n   * @param {CodeMirror} cm CodeMirror object.\n   * @param {Cursor} cur The cursor position.\n   * @param {boolean} forward True to search forward. False to search\n   *     backward.\n   * @param {boolean} bigWord True if punctuation count as part of the word.\n   *     False if only [a-zA-Z0-9] characters count as part of the word.\n   * @param {boolean} emptyLineIsWord True if empty lines should be treated\n   *     as words.\n   * @return {Object{from:number, to:number, line: number}} The boundaries of\n   *     the word, or null if there are no more words.\n   */\n\n\n  function findWord(cm, cur, forward, bigWord, emptyLineIsWord) {\n    var lineNum = cur.line;\n    var pos = cur.ch;\n    var line = cm.getLine(lineNum);\n    var dir = forward ? 1 : -1;\n    var charTests = bigWord ? bigWordCharTest : wordCharTest;\n\n    if (emptyLineIsWord && line == '') {\n      lineNum += dir;\n      line = cm.getLine(lineNum);\n\n      if (!isLine(cm, lineNum)) {\n        return null;\n      }\n\n      pos = forward ? 0 : line.length;\n    }\n\n    while (true) {\n      if (emptyLineIsWord && line == '') {\n        return {\n          from: 0,\n          to: 0,\n          line: lineNum\n        };\n      }\n\n      var stop = dir > 0 ? line.length : -1;\n      var wordStart = stop,\n          wordEnd = stop; // Find bounds of next word.\n\n      while (pos != stop) {\n        var foundWord = false;\n\n        for (var i = 0; i < charTests.length && !foundWord; ++i) {\n          if (charTests[i](line.charAt(pos))) {\n            wordStart = pos; // Advance to end of word.\n\n            while (pos != stop && charTests[i](line.charAt(pos))) {\n              pos += dir;\n            }\n\n            wordEnd = pos;\n            foundWord = wordStart != wordEnd;\n\n            if (wordStart == cur.ch && lineNum == cur.line && wordEnd == wordStart + dir) {\n              // We started at the end of a word. Find the next one.\n              continue;\n            } else {\n              return {\n                from: Math.min(wordStart, wordEnd + 1),\n                to: Math.max(wordStart, wordEnd),\n                line: lineNum\n              };\n            }\n          }\n        }\n\n        if (!foundWord) {\n          pos += dir;\n        }\n      } // Advance to next/prev line.\n\n\n      lineNum += dir;\n\n      if (!isLine(cm, lineNum)) {\n        return null;\n      }\n\n      line = cm.getLine(lineNum);\n      pos = dir > 0 ? 0 : line.length;\n    }\n  }\n  /**\n   * @param {CodeMirror} cm CodeMirror object.\n   * @param {Pos} cur The position to start from.\n   * @param {int} repeat Number of words to move past.\n   * @param {boolean} forward True to search forward. False to search\n   *     backward.\n   * @param {boolean} wordEnd True to move to end of word. False to move to\n   *     beginning of word.\n   * @param {boolean} bigWord True if punctuation count as part of the word.\n   *     False if only alphabet characters count as part of the word.\n   * @return {Cursor} The position the cursor should move to.\n   */\n\n\n  function moveToWord(cm, cur, repeat, forward, wordEnd, bigWord) {\n    var curStart = copyCursor(cur);\n    var words = [];\n\n    if (forward && !wordEnd || !forward && wordEnd) {\n      repeat++;\n    } // For 'e', empty lines are not considered words, go figure.\n\n\n    var emptyLineIsWord = !(forward && wordEnd);\n\n    for (var i = 0; i < repeat; i++) {\n      var word = findWord(cm, cur, forward, bigWord, emptyLineIsWord);\n\n      if (!word) {\n        var eodCh = lineLength(cm, cm.lastLine());\n        words.push(forward ? {\n          line: cm.lastLine(),\n          from: eodCh,\n          to: eodCh\n        } : {\n          line: 0,\n          from: 0,\n          to: 0\n        });\n        break;\n      }\n\n      words.push(word);\n      cur = Pos(word.line, forward ? word.to - 1 : word.from);\n    }\n\n    var shortCircuit = words.length != repeat;\n    var firstWord = words[0];\n    var lastWord = words.pop();\n\n    if (forward && !wordEnd) {\n      // w\n      if (!shortCircuit && (firstWord.from != curStart.ch || firstWord.line != curStart.line)) {\n        // We did not start in the middle of a word. Discard the extra word at the end.\n        lastWord = words.pop();\n      }\n\n      return Pos(lastWord.line, lastWord.from);\n    } else if (forward && wordEnd) {\n      return Pos(lastWord.line, lastWord.to - 1);\n    } else if (!forward && wordEnd) {\n      // ge\n      if (!shortCircuit && (firstWord.to != curStart.ch || firstWord.line != curStart.line)) {\n        // We did not start in the middle of a word. Discard the extra word at the end.\n        lastWord = words.pop();\n      }\n\n      return Pos(lastWord.line, lastWord.to);\n    } else {\n      // b\n      return Pos(lastWord.line, lastWord.from);\n    }\n  }\n\n  function _moveToCharacter(cm, repeat, forward, character) {\n    var cur = cm.getCursor();\n    var start = cur.ch;\n    var idx;\n\n    for (var i = 0; i < repeat; i++) {\n      var line = cm.getLine(cur.line);\n      idx = charIdxInLine(start, line, character, forward, true);\n\n      if (idx == -1) {\n        return null;\n      }\n\n      start = idx;\n    }\n\n    return Pos(cm.getCursor().line, idx);\n  }\n\n  function _moveToColumn(cm, repeat) {\n    // repeat is always >= 1, so repeat - 1 always corresponds\n    // to the column we want to go to.\n    var line = cm.getCursor().line;\n    return clipCursorToContent(cm, Pos(line, repeat - 1));\n  }\n\n  function updateMark(cm, vim, markName, pos) {\n    if (!inArray(markName, validMarks)) {\n      return;\n    }\n\n    if (vim.marks[markName]) {\n      vim.marks[markName].clear();\n    }\n\n    vim.marks[markName] = cm.setBookmark(pos);\n  }\n\n  function charIdxInLine(start, line, character, forward, includeChar) {\n    // Search for char in line.\n    // motion_options: {forward, includeChar}\n    // If includeChar = true, include it too.\n    // If forward = true, search forward, else search backwards.\n    // If char is not found on this line, do nothing\n    var idx;\n\n    if (forward) {\n      idx = line.indexOf(character, start + 1);\n\n      if (idx != -1 && !includeChar) {\n        idx -= 1;\n      }\n    } else {\n      idx = line.lastIndexOf(character, start - 1);\n\n      if (idx != -1 && !includeChar) {\n        idx += 1;\n      }\n    }\n\n    return idx;\n  }\n\n  function findParagraph(cm, head, repeat, dir, inclusive) {\n    var line = head.line;\n    var min = cm.firstLine();\n    var max = cm.lastLine();\n    var start,\n        end,\n        i = line;\n\n    function isEmpty(i) {\n      return !cm.getLine(i);\n    }\n\n    function isBoundary(i, dir, any) {\n      if (any) {\n        return isEmpty(i) != isEmpty(i + dir);\n      }\n\n      return !isEmpty(i) && isEmpty(i + dir);\n    }\n\n    if (dir) {\n      while (min <= i && i <= max && repeat > 0) {\n        if (isBoundary(i, dir)) {\n          repeat--;\n        }\n\n        i += dir;\n      }\n\n      return new Pos(i, 0);\n    }\n\n    var vim = cm.state.vim;\n\n    if (vim.visualLine && isBoundary(line, 1, true)) {\n      var anchor = vim.sel.anchor;\n\n      if (isBoundary(anchor.line, -1, true)) {\n        if (!inclusive || anchor.line != line) {\n          line += 1;\n        }\n      }\n    }\n\n    var startState = isEmpty(line);\n\n    for (i = line; i <= max && repeat; i++) {\n      if (isBoundary(i, 1, true)) {\n        if (!inclusive || isEmpty(i) != startState) {\n          repeat--;\n        }\n      }\n    }\n\n    end = new Pos(i, 0); // select boundary before paragraph for the last one\n\n    if (i > max && !startState) {\n      startState = true;\n    } else {\n      inclusive = false;\n    }\n\n    for (i = line; i > min; i--) {\n      if (!inclusive || isEmpty(i) == startState || i == line) {\n        if (isBoundary(i, -1, true)) {\n          break;\n        }\n      }\n    }\n\n    start = new Pos(i, 0);\n    return {\n      start: start,\n      end: end\n    };\n  }\n\n  function findSentence(cm, cur, repeat, dir) {\n    /*\n      Takes an index object\n      {\n        line: the line string,\n        ln: line number,\n        pos: index in line,\n        dir: direction of traversal (-1 or 1)\n      }\n      and modifies the line, ln, and pos members to represent the\n      next valid position or sets them to null if there are\n      no more valid positions.\n     */\n    function nextChar(cm, idx) {\n      if (idx.pos + idx.dir < 0 || idx.pos + idx.dir >= idx.line.length) {\n        idx.ln += idx.dir;\n\n        if (!isLine(cm, idx.ln)) {\n          idx.line = null;\n          idx.ln = null;\n          idx.pos = null;\n          return;\n        }\n\n        idx.line = cm.getLine(idx.ln);\n        idx.pos = idx.dir > 0 ? 0 : idx.line.length - 1;\n      } else {\n        idx.pos += idx.dir;\n      }\n    }\n    /*\n      Performs one iteration of traversal in forward direction\n      Returns an index object of the new location\n     */\n\n\n    function forward(cm, ln, pos, dir) {\n      var line = cm.getLine(ln);\n      var stop = line === \"\";\n      var curr = {\n        line: line,\n        ln: ln,\n        pos: pos,\n        dir: dir\n      };\n      var last_valid = {\n        ln: curr.ln,\n        pos: curr.pos\n      };\n      var skip_empty_lines = curr.line === \"\"; // Move one step to skip character we start on\n\n      nextChar(cm, curr);\n\n      while (curr.line !== null) {\n        last_valid.ln = curr.ln;\n        last_valid.pos = curr.pos;\n\n        if (curr.line === \"\" && !skip_empty_lines) {\n          return {\n            ln: curr.ln,\n            pos: curr.pos\n          };\n        } else if (stop && curr.line !== \"\" && !isWhiteSpaceString(curr.line[curr.pos])) {\n          return {\n            ln: curr.ln,\n            pos: curr.pos\n          };\n        } else if (isEndOfSentenceSymbol(curr.line[curr.pos]) && !stop && (curr.pos === curr.line.length - 1 || isWhiteSpaceString(curr.line[curr.pos + 1]))) {\n          stop = true;\n        }\n\n        nextChar(cm, curr);\n      }\n      /*\n        Set the position to the last non whitespace character on the last\n        valid line in the case that we reach the end of the document.\n      */\n\n\n      var line = cm.getLine(last_valid.ln);\n      last_valid.pos = 0;\n\n      for (var i = line.length - 1; i >= 0; --i) {\n        if (!isWhiteSpaceString(line[i])) {\n          last_valid.pos = i;\n          break;\n        }\n      }\n\n      return last_valid;\n    }\n    /*\n      Performs one iteration of traversal in reverse direction\n      Returns an index object of the new location\n     */\n\n\n    function reverse(cm, ln, pos, dir) {\n      var line = cm.getLine(ln);\n      var curr = {\n        line: line,\n        ln: ln,\n        pos: pos,\n        dir: dir\n      };\n      var last_valid = {\n        ln: curr.ln,\n        pos: null\n      };\n      var skip_empty_lines = curr.line === \"\"; // Move one step to skip character we start on\n\n      nextChar(cm, curr);\n\n      while (curr.line !== null) {\n        if (curr.line === \"\" && !skip_empty_lines) {\n          if (last_valid.pos !== null) {\n            return last_valid;\n          } else {\n            return {\n              ln: curr.ln,\n              pos: curr.pos\n            };\n          }\n        } else if (isEndOfSentenceSymbol(curr.line[curr.pos]) && last_valid.pos !== null && !(curr.ln === last_valid.ln && curr.pos + 1 === last_valid.pos)) {\n          return last_valid;\n        } else if (curr.line !== \"\" && !isWhiteSpaceString(curr.line[curr.pos])) {\n          skip_empty_lines = false;\n          last_valid = {\n            ln: curr.ln,\n            pos: curr.pos\n          };\n        }\n\n        nextChar(cm, curr);\n      }\n      /*\n        Set the position to the first non whitespace character on the last\n        valid line in the case that we reach the beginning of the document.\n      */\n\n\n      var line = cm.getLine(last_valid.ln);\n      last_valid.pos = 0;\n\n      for (var i = 0; i < line.length; ++i) {\n        if (!isWhiteSpaceString(line[i])) {\n          last_valid.pos = i;\n          break;\n        }\n      }\n\n      return last_valid;\n    }\n\n    var curr_index = {\n      ln: cur.line,\n      pos: cur.ch\n    };\n\n    while (repeat > 0) {\n      if (dir < 0) {\n        curr_index = reverse(cm, curr_index.ln, curr_index.pos, dir);\n      } else {\n        curr_index = forward(cm, curr_index.ln, curr_index.pos, dir);\n      }\n\n      repeat--;\n    }\n\n    return Pos(curr_index.ln, curr_index.pos);\n  } // TODO: perhaps this finagling of start and end positions belonds\n  // in codemirror/replaceRange?\n\n\n  function selectCompanionObject(cm, head, symb, inclusive) {\n    var cur = head,\n        start,\n        end;\n    var bracketRegexp = {\n      '(': /[()]/,\n      ')': /[()]/,\n      '[': /[[\\]]/,\n      ']': /[[\\]]/,\n      '{': /[{}]/,\n      '}': /[{}]/\n    }[symb];\n    var openSym = {\n      '(': '(',\n      ')': '(',\n      '[': '[',\n      ']': '[',\n      '{': '{',\n      '}': '{'\n    }[symb];\n    var curChar = cm.getLine(cur.line).charAt(cur.ch); // Due to the behavior of scanForBracket, we need to add an offset if the\n    // cursor is on a matching open bracket.\n\n    var offset = curChar === openSym ? 1 : 0;\n    start = cm.scanForBracket(Pos(cur.line, cur.ch + offset), -1, undefined, {\n      'bracketRegex': bracketRegexp\n    });\n    end = cm.scanForBracket(Pos(cur.line, cur.ch + offset), 1, undefined, {\n      'bracketRegex': bracketRegexp\n    });\n\n    if (!start || !end) {\n      return {\n        start: cur,\n        end: cur\n      };\n    }\n\n    start = start.pos;\n    end = end.pos;\n\n    if (start.line == end.line && start.ch > end.ch || start.line > end.line) {\n      var tmp = start;\n      start = end;\n      end = tmp;\n    }\n\n    if (inclusive) {\n      end.ch += 1;\n    } else {\n      start.ch += 1;\n    }\n\n    return {\n      start: start,\n      end: end\n    };\n  } // Takes in a symbol and a cursor and tries to simulate text objects that\n  // have identical opening and closing symbols\n  // TODO support across multiple lines\n\n\n  function findBeginningAndEnd(cm, head, symb, inclusive) {\n    var cur = copyCursor(head);\n    var line = cm.getLine(cur.line);\n    var chars = line.split('');\n    var start, end, i, len;\n    var firstIndex = chars.indexOf(symb); // the decision tree is to always look backwards for the beginning first,\n    // but if the cursor is in front of the first instance of the symb,\n    // then move the cursor forward\n\n    if (cur.ch < firstIndex) {\n      cur.ch = firstIndex; // Why is this line even here???\n      // cm.setCursor(cur.line, firstIndex+1);\n    } // otherwise if the cursor is currently on the closing symbol\n    else if (firstIndex < cur.ch && chars[cur.ch] == symb) {\n        end = cur.ch; // assign end to the current cursor\n\n        --cur.ch; // make sure to look backwards\n      } // if we're currently on the symbol, we've got a start\n\n\n    if (chars[cur.ch] == symb && !end) {\n      start = cur.ch + 1; // assign start to ahead of the cursor\n    } else {\n      // go backwards to find the start\n      for (i = cur.ch; i > -1 && !start; i--) {\n        if (chars[i] == symb) {\n          start = i + 1;\n        }\n      }\n    } // look forwards for the end symbol\n\n\n    if (start && !end) {\n      for (i = start, len = chars.length; i < len && !end; i++) {\n        if (chars[i] == symb) {\n          end = i;\n        }\n      }\n    } // nothing found\n\n\n    if (!start || !end) {\n      return {\n        start: cur,\n        end: cur\n      };\n    } // include the symbols\n\n\n    if (inclusive) {\n      --start;\n      ++end;\n    }\n\n    return {\n      start: Pos(cur.line, start),\n      end: Pos(cur.line, end)\n    };\n  } // Search functions\n\n\n  defineOption('pcre', true, 'boolean');\n\n  function SearchState() {}\n\n  SearchState.prototype = {\n    getQuery: function getQuery() {\n      return vimGlobalState.query;\n    },\n    setQuery: function setQuery(query) {\n      vimGlobalState.query = query;\n    },\n    getOverlay: function getOverlay() {\n      return this.searchOverlay;\n    },\n    setOverlay: function setOverlay(overlay) {\n      this.searchOverlay = overlay;\n    },\n    isReversed: function isReversed() {\n      return vimGlobalState.isReversed;\n    },\n    setReversed: function setReversed(reversed) {\n      vimGlobalState.isReversed = reversed;\n    },\n    getScrollbarAnnotate: function getScrollbarAnnotate() {\n      return this.annotate;\n    },\n    setScrollbarAnnotate: function setScrollbarAnnotate(annotate) {\n      this.annotate = annotate;\n    }\n  };\n\n  function getSearchState(cm) {\n    var vim = cm.state.vim;\n    return vim.searchState_ || (vim.searchState_ = new SearchState());\n  }\n\n  function dialog(cm, template, shortText, onClose, options) {\n    if (cm.openDialog) {\n      cm.openDialog(template, onClose, {\n        bottom: true,\n        value: options.value,\n        onKeyDown: options.onKeyDown,\n        onKeyUp: options.onKeyUp,\n        selectValueOnOpen: false\n      });\n    } else {\n      onClose(prompt(shortText, ''));\n    }\n  }\n\n  function splitBySlash(argString) {\n    return splitBySeparator(argString, '/');\n  }\n\n  function findUnescapedSlashes(argString) {\n    return findUnescapedSeparators(argString, '/');\n  }\n\n  function splitBySeparator(argString, separator) {\n    var slashes = findUnescapedSeparators(argString, separator) || [];\n    if (!slashes.length) return [];\n    var tokens = []; // in case of strings like foo/bar\n\n    if (slashes[0] !== 0) return;\n\n    for (var i = 0; i < slashes.length; i++) {\n      if (typeof slashes[i] == 'number') tokens.push(argString.substring(slashes[i] + 1, slashes[i + 1]));\n    }\n\n    return tokens;\n  }\n\n  function findUnescapedSeparators(str, separator) {\n    if (!separator) separator = '/';\n    var escapeNextChar = false;\n    var slashes = [];\n\n    for (var i = 0; i < str.length; i++) {\n      var c = str.charAt(i);\n\n      if (!escapeNextChar && c == separator) {\n        slashes.push(i);\n      }\n\n      escapeNextChar = !escapeNextChar && c == '\\\\';\n    }\n\n    return slashes;\n  } // Translates a search string from ex (vim) syntax into javascript form.\n\n\n  function translateRegex(str) {\n    // When these match, add a '\\' if unescaped or remove one if escaped.\n    var specials = '|(){'; // Remove, but never add, a '\\' for these.\n\n    var unescape = '}';\n    var escapeNextChar = false;\n    var out = [];\n\n    for (var i = -1; i < str.length; i++) {\n      var c = str.charAt(i) || '';\n      var n = str.charAt(i + 1) || '';\n      var specialComesNext = n && specials.indexOf(n) != -1;\n\n      if (escapeNextChar) {\n        if (c !== '\\\\' || !specialComesNext) {\n          out.push(c);\n        }\n\n        escapeNextChar = false;\n      } else {\n        if (c === '\\\\') {\n          escapeNextChar = true; // Treat the unescape list as special for removing, but not adding '\\'.\n\n          if (n && unescape.indexOf(n) != -1) {\n            specialComesNext = true;\n          } // Not passing this test means removing a '\\'.\n\n\n          if (!specialComesNext || n === '\\\\') {\n            out.push(c);\n          }\n        } else {\n          out.push(c);\n\n          if (specialComesNext && n !== '\\\\') {\n            out.push('\\\\');\n          }\n        }\n      }\n    }\n\n    return out.join('');\n  } // Translates the replace part of a search and replace from ex (vim) syntax into\n  // javascript form.  Similar to translateRegex, but additionally fixes back references\n  // (translates '\\[0..9]' to '$[0..9]') and follows different rules for escaping '$'.\n\n\n  var charUnescapes = {\n    '\\\\n': '\\n',\n    '\\\\r': '\\r',\n    '\\\\t': '\\t'\n  };\n\n  function translateRegexReplace(str) {\n    var escapeNextChar = false;\n    var out = [];\n\n    for (var i = -1; i < str.length; i++) {\n      var c = str.charAt(i) || '';\n      var n = str.charAt(i + 1) || '';\n\n      if (charUnescapes[c + n]) {\n        out.push(charUnescapes[c + n]);\n        i++;\n      } else if (escapeNextChar) {\n        // At any point in the loop, escapeNextChar is true if the previous\n        // character was a '\\' and was not escaped.\n        out.push(c);\n        escapeNextChar = false;\n      } else {\n        if (c === '\\\\') {\n          escapeNextChar = true;\n\n          if (isNumber(n) || n === '$') {\n            out.push('$');\n          } else if (n !== '/' && n !== '\\\\') {\n            out.push('\\\\');\n          }\n        } else {\n          if (c === '$') {\n            out.push('$');\n          }\n\n          out.push(c);\n\n          if (n === '/') {\n            out.push('\\\\');\n          }\n        }\n      }\n    }\n\n    return out.join('');\n  } // Unescape \\ and / in the replace part, for PCRE mode.\n\n\n  var unescapes = {\n    '\\\\/': '/',\n    '\\\\\\\\': '\\\\',\n    '\\\\n': '\\n',\n    '\\\\r': '\\r',\n    '\\\\t': '\\t'\n  };\n\n  function unescapeRegexReplace(str) {\n    var stream = new _cm_adapter[\"default\"].StringStream(str);\n    var output = [];\n\n    while (!stream.eol()) {\n      // Search for \\.\n      while (stream.peek() && stream.peek() != '\\\\') {\n        output.push(stream.next());\n      }\n\n      var matched = false;\n\n      for (var matcher in unescapes) {\n        if (stream.match(matcher, true)) {\n          matched = true;\n          output.push(unescapes[matcher]);\n          break;\n        }\n      }\n\n      if (!matched) {\n        // Don't change anything\n        output.push(stream.next());\n      }\n    }\n\n    return output.join('');\n  }\n  /**\n   * Extract the regular expression from the query and return a Regexp object.\n   * Returns null if the query is blank.\n   * If ignoreCase is passed in, the Regexp object will have the 'i' flag set.\n   * If smartCase is passed in, and the query contains upper case letters,\n   *   then ignoreCase is overridden, and the 'i' flag will not be set.\n   * If the query contains the /i in the flag part of the regular expression,\n   *   then both ignoreCase and smartCase are ignored, and 'i' will be passed\n   *   through to the Regex object.\n   */\n\n\n  function parseQuery(query, ignoreCase, smartCase) {\n    // First update the last search register\n    var lastSearchRegister = vimGlobalState.registerController.getRegister('/');\n    lastSearchRegister.setText(query); // Check if the query is already a regex.\n\n    if (query instanceof RegExp) {\n      return query;\n    } // First try to extract regex + flags from the input. If no flags found,\n    // extract just the regex. IE does not accept flags directly defined in\n    // the regex string in the form /regex/flags\n\n\n    var slashes = findUnescapedSlashes(query);\n    var regexPart;\n    var forceIgnoreCase;\n\n    if (!slashes.length) {\n      // Query looks like 'regexp'\n      regexPart = query;\n    } else {\n      // Query looks like 'regexp/...'\n      regexPart = query.substring(0, slashes[0]);\n      var flagsPart = query.substring(slashes[0]);\n      forceIgnoreCase = flagsPart.indexOf('i') != -1;\n    }\n\n    if (!regexPart) {\n      return null;\n    }\n\n    if (!getOption('pcre')) {\n      regexPart = translateRegex(regexPart);\n    }\n\n    if (smartCase) {\n      ignoreCase = /^[^A-Z]*$/.test(regexPart);\n    }\n\n    var regexp = new RegExp(regexPart, ignoreCase || forceIgnoreCase ? 'i' : undefined);\n    return regexp;\n  }\n\n  function showConfirm(cm, text) {\n    if (cm.openNotification) {\n      cm.openNotification('<span style=\"color: red\">' + text + '</span>', {\n        bottom: true,\n        duration: 5000\n      });\n    } else {\n      alert(text);\n    }\n  }\n\n  function makePrompt(prefix, desc) {\n    var raw = '<span style=\"font-family: monospace; white-space: pre\">' + (prefix || \"\") + '<input type=\"text\"></span>';\n    if (desc) raw += ' <span style=\"color: #888\">' + desc + '</span>';\n    return raw;\n  }\n\n  var searchPromptDesc = '(Javascript regexp)';\n\n  function showPrompt(cm, options) {\n    var shortText = (options.prefix || '') + ' ' + (options.desc || '');\n    var prompt = makePrompt(options.prefix, options.desc);\n    dialog(cm, prompt, shortText, options.onClose, options);\n  }\n\n  function regexEqual(r1, r2) {\n    if (r1 instanceof RegExp && r2 instanceof RegExp) {\n      var props = ['global', 'multiline', 'ignoreCase', 'source'];\n\n      for (var i = 0; i < props.length; i++) {\n        var prop = props[i];\n\n        if (r1[prop] !== r2[prop]) {\n          return false;\n        }\n      }\n\n      return true;\n    }\n\n    return false;\n  } // Returns true if the query is valid.\n\n\n  function updateSearchQuery(cm, rawQuery, ignoreCase, smartCase) {\n    if (!rawQuery) {\n      return;\n    }\n\n    var state = getSearchState(cm);\n    var query = parseQuery(rawQuery, !!ignoreCase, !!smartCase);\n\n    if (!query) {\n      return;\n    }\n\n    highlightSearchMatches(cm, query);\n\n    if (regexEqual(query, state.getQuery())) {\n      return query;\n    }\n\n    state.setQuery(query);\n    return query;\n  }\n\n  function searchOverlay(query) {\n    if (query.source.charAt(0) == '^') {\n      var matchSol = true;\n    }\n\n    return {\n      token: function token(stream) {\n        if (matchSol && !stream.sol()) {\n          stream.skipToEnd();\n          return;\n        }\n\n        var match = stream.match(query, false);\n\n        if (match) {\n          if (match[0].length == 0) {\n            // Matched empty string, skip to next.\n            stream.next();\n            return 'searching';\n          }\n\n          if (!stream.sol()) {\n            // Backtrack 1 to match \\b\n            stream.backUp(1);\n\n            if (!query.exec(stream.next() + match[0])) {\n              stream.next();\n              return null;\n            }\n          }\n\n          stream.match(query);\n          return 'searching';\n        }\n\n        while (!stream.eol()) {\n          stream.next();\n          if (stream.match(query, false)) break;\n        }\n      },\n      query: query\n    };\n  }\n\n  function highlightSearchMatches(cm, query) {\n    var searchState = getSearchState(cm);\n    var overlay = searchState.getOverlay();\n\n    if (!overlay || query != overlay.query) {\n      if (overlay) {\n        cm.removeOverlay(overlay);\n      }\n\n      overlay = searchOverlay(query);\n      cm.addOverlay(overlay);\n\n      if (cm.showMatchesOnScrollbar) {\n        if (searchState.getScrollbarAnnotate()) {\n          searchState.getScrollbarAnnotate().clear();\n        }\n\n        searchState.setScrollbarAnnotate(cm.showMatchesOnScrollbar(query));\n      }\n\n      searchState.setOverlay(overlay);\n    }\n  }\n\n  function _findNext(cm, prev, query, repeat) {\n    if (repeat === undefined) {\n      repeat = 1;\n    }\n\n    return cm.operation(function () {\n      var pos = cm.getCursor();\n      var cursor = cm.getSearchCursor(query, pos);\n\n      for (var i = 0; i < repeat; i++) {\n        var found = cursor.find(prev);\n\n        if (i == 0 && found && cursorEqual(cursor.from(), pos)) {\n          found = cursor.find(prev);\n        }\n\n        if (!found) {\n          // SearchCursor may have returned null because it hit EOF, wrap\n          // around and try again.\n          cursor = cm.getSearchCursor(query, prev ? Pos(cm.lastLine()) : Pos(cm.firstLine(), 0));\n\n          if (!cursor.find(prev)) {\n            return;\n          }\n        }\n      }\n\n      return cursor.from();\n    });\n  }\n\n  function clearSearchHighlight(cm) {\n    var state = getSearchState(cm);\n    cm.removeOverlay(getSearchState(cm).getOverlay());\n    state.setOverlay(null);\n\n    if (state.getScrollbarAnnotate()) {\n      state.getScrollbarAnnotate().clear();\n      state.setScrollbarAnnotate(null);\n    }\n  }\n  /**\n   * Check if pos is in the specified range, INCLUSIVE.\n   * Range can be specified with 1 or 2 arguments.\n   * If the first range argument is an array, treat it as an array of line\n   * numbers. Match pos against any of the lines.\n   * If the first range argument is a number,\n   *   if there is only 1 range argument, check if pos has the same line\n   *       number\n   *   if there are 2 range arguments, then check if pos is in between the two\n   *       range arguments.\n   */\n\n\n  function isInRange(pos, start, end) {\n    if (typeof pos != 'number') {\n      // Assume it is a cursor position. Get the line number.\n      pos = pos.line;\n    }\n\n    if (start instanceof Array) {\n      return inArray(pos, start);\n    } else {\n      if (end) {\n        return pos >= start && pos <= end;\n      } else {\n        return pos == start;\n      }\n    }\n  }\n\n  function getUserVisibleLines(cm) {\n    // var scrollInfo = cm.getScrollInfo();\n    // var occludeToleranceTop = 6;\n    // var occludeToleranceBottom = 10;\n    // var from = cm.coordsChar({left:0, top: occludeToleranceTop + scrollInfo.top}, 'local');\n    // var bottomY = scrollInfo.clientHeight - occludeToleranceBottom + scrollInfo.top;\n    // var to = cm.coordsChar({left:0, top: bottomY}, 'local');\n    // return {top: from.line, bottom: to.line};\n    return cm.getUserVisibleLines();\n  }\n\n  function getMarkPos(cm, vim, markName) {\n    if (markName == '\\'') {\n      var history = cm.doc.history.done;\n      var event = history[history.length - 2];\n      return event && event.ranges && event.ranges[0].head;\n    } else if (markName == '.') {\n      if (cm.doc.history.lastModTime == 0) {\n        return; // If no changes, bail out; don't bother to copy or reverse history array.\n      } else {\n        var changeHistory = cm.doc.history.done.filter(function (el) {\n          if (el.changes !== undefined) {\n            return el;\n          }\n        });\n        changeHistory.reverse();\n        var lastEditPos = changeHistory[0].changes[0].to;\n      }\n\n      return lastEditPos;\n    }\n\n    var mark = vim.marks[markName];\n    return mark && mark.find();\n  }\n\n  var ExCommandDispatcher = function ExCommandDispatcher() {\n    this.buildCommandMap_();\n  };\n\n  ExCommandDispatcher.prototype = {\n    processCommand: function processCommand(cm, input, opt_params) {\n      var that = this;\n      cm.operation(function () {\n        cm.curOp.isVimOp = true;\n\n        that._processCommand(cm, input, opt_params);\n      });\n    },\n    _processCommand: function _processCommand(cm, input, opt_params) {\n      var vim = cm.state.vim;\n      var commandHistoryRegister = vimGlobalState.registerController.getRegister(':');\n      var previousCommand = commandHistoryRegister.toString();\n\n      if (vim.visualMode) {\n        exitVisualMode(cm);\n      }\n\n      var inputStream = new _cm_adapter[\"default\"].StringStream(input); // update \": with the latest command whether valid or invalid\n\n      commandHistoryRegister.setText(input);\n      var params = opt_params || {};\n      params.input = input;\n\n      try {\n        this.parseInput_(cm, inputStream, params);\n      } catch (e) {\n        showConfirm(cm, e);\n        throw e;\n      }\n\n      var command;\n      var commandName;\n\n      if (!params.commandName) {\n        // If only a line range is defined, move to the line.\n        if (params.line !== undefined) {\n          commandName = 'move';\n        }\n      } else {\n        command = this.matchCommand_(params.commandName);\n\n        if (command) {\n          commandName = command.name;\n\n          if (command.excludeFromCommandHistory) {\n            commandHistoryRegister.setText(previousCommand);\n          }\n\n          this.parseCommandArgs_(inputStream, params, command);\n\n          if (command.type == 'exToKey') {\n            // Handle Ex to Key mapping.\n            for (var i = 0; i < command.toKeys.length; i++) {\n              _cm_adapter[\"default\"].Vim.handleKey(cm, command.toKeys[i], 'mapping');\n            }\n\n            return;\n          } else if (command.type == 'exToEx') {\n            // Handle Ex to Ex mapping.\n            this.processCommand(cm, command.toInput);\n            return;\n          }\n        }\n      }\n\n      if (!commandName) {\n        showConfirm(cm, 'Not an editor command \":' + input + '\"');\n        return;\n      }\n\n      try {\n        exCommands[commandName](cm, params); // Possibly asynchronous commands (e.g. substitute, which might have a\n        // user confirmation), are responsible for calling the callback when\n        // done. All others have it taken care of for them here.\n\n        if ((!command || !command.possiblyAsync) && params.callback) {\n          params.callback();\n        }\n      } catch (e) {\n        showConfirm(cm, e);\n        throw e;\n      }\n    },\n    parseInput_: function parseInput_(cm, inputStream, result) {\n      inputStream.eatWhile(':'); // Parse range.\n\n      if (inputStream.eat('%')) {\n        result.line = cm.firstLine();\n        result.lineEnd = cm.lastLine();\n      } else {\n        result.line = this.parseLineSpec_(cm, inputStream);\n\n        if (result.line !== undefined && inputStream.eat(',')) {\n          result.lineEnd = this.parseLineSpec_(cm, inputStream);\n        }\n      } // Parse command name.\n\n\n      var commandMatch = inputStream.match(/^(\\w+)/);\n\n      if (commandMatch) {\n        result.commandName = commandMatch[1];\n      } else {\n        result.commandName = inputStream.match(/.*/)[0];\n      }\n\n      return result;\n    },\n    parseLineSpec_: function parseLineSpec_(cm, inputStream) {\n      var numberMatch = inputStream.match(/^(\\d+)/);\n\n      if (numberMatch) {\n        // Absolute line number plus offset (N+M or N-M) is probably a typo,\n        // not something the user actually wanted. (NB: vim does allow this.)\n        return parseInt(numberMatch[1], 10) - 1;\n      }\n\n      switch (inputStream.next()) {\n        case '.':\n          return this.parseLineSpecOffset_(inputStream, cm.getCursor().line);\n\n        case '$':\n          return this.parseLineSpecOffset_(inputStream, cm.lastLine());\n\n        case '\\'':\n          var markName = inputStream.next();\n          var markPos = getMarkPos(cm, cm.state.vim, markName);\n          if (!markPos) throw new Error('Mark not set');\n          return this.parseLineSpecOffset_(inputStream, markPos.line);\n\n        case '-':\n        case '+':\n          inputStream.backUp(1); // Offset is relative to current line if not otherwise specified.\n\n          return this.parseLineSpecOffset_(inputStream, cm.getCursor().line);\n\n        default:\n          inputStream.backUp(1);\n          return undefined;\n      }\n    },\n    parseLineSpecOffset_: function parseLineSpecOffset_(inputStream, line) {\n      var offsetMatch = inputStream.match(/^([+-])?(\\d+)/);\n\n      if (offsetMatch) {\n        var offset = parseInt(offsetMatch[2], 10);\n\n        if (offsetMatch[1] == \"-\") {\n          line -= offset;\n        } else {\n          line += offset;\n        }\n      }\n\n      return line;\n    },\n    parseCommandArgs_: function parseCommandArgs_(inputStream, params, command) {\n      if (inputStream.eol()) {\n        return;\n      }\n\n      params.argString = inputStream.match(/.*/)[0]; // Parse command-line arguments\n\n      var delim = command.argDelimiter || /\\s+/;\n      var args = trim(params.argString).split(delim);\n\n      if (args.length && args[0]) {\n        params.args = args;\n      }\n    },\n    matchCommand_: function matchCommand_(commandName) {\n      // Return the command in the command map that matches the shortest\n      // prefix of the passed in command name. The match is guaranteed to be\n      // unambiguous if the defaultExCommandMap's shortNames are set up\n      // correctly. (see @code{defaultExCommandMap}).\n      for (var i = commandName.length; i > 0; i--) {\n        var prefix = commandName.substring(0, i);\n\n        if (this.commandMap_[prefix]) {\n          var command = this.commandMap_[prefix];\n\n          if (command.name.indexOf(commandName) === 0) {\n            return command;\n          }\n        }\n      }\n\n      return null;\n    },\n    buildCommandMap_: function buildCommandMap_() {\n      this.commandMap_ = {};\n\n      for (var i = 0; i < defaultExCommandMap.length; i++) {\n        var command = defaultExCommandMap[i];\n        var key = command.shortName || command.name;\n        this.commandMap_[key] = command;\n      }\n    },\n    map: function map(lhs, rhs, ctx) {\n      if (lhs != ':' && lhs.charAt(0) == ':') {\n        if (ctx) {\n          throw Error('Mode not supported for ex mappings');\n        }\n\n        var commandName = lhs.substring(1);\n\n        if (rhs != ':' && rhs.charAt(0) == ':') {\n          // Ex to Ex mapping\n          this.commandMap_[commandName] = {\n            name: commandName,\n            type: 'exToEx',\n            toInput: rhs.substring(1),\n            user: true\n          };\n        } else {\n          // Ex to key mapping\n          this.commandMap_[commandName] = {\n            name: commandName,\n            type: 'exToKey',\n            toKeys: rhs,\n            user: true\n          };\n        }\n      } else {\n        if (rhs != ':' && rhs.charAt(0) == ':') {\n          // Key to Ex mapping.\n          var mapping = {\n            keys: lhs,\n            type: 'keyToEx',\n            exArgs: {\n              input: rhs.substring(1)\n            }\n          };\n\n          if (ctx) {\n            mapping.context = ctx;\n          }\n\n          defaultKeymap.unshift(mapping);\n        } else {\n          // Key to key mapping\n          var mapping = {\n            keys: lhs,\n            type: 'keyToKey',\n            toKeys: rhs\n          };\n\n          if (ctx) {\n            mapping.context = ctx;\n          }\n\n          defaultKeymap.unshift(mapping);\n        }\n      }\n    },\n    unmap: function unmap(lhs, ctx) {\n      if (lhs != ':' && lhs.charAt(0) == ':') {\n        // Ex to Ex or Ex to key mapping\n        if (ctx) {\n          throw Error('Mode not supported for ex mappings');\n        }\n\n        var commandName = lhs.substring(1);\n\n        if (this.commandMap_[commandName] && this.commandMap_[commandName].user) {\n          delete this.commandMap_[commandName];\n          return;\n        }\n      } else {\n        // Key to Ex or key to key mapping\n        var keys = lhs;\n\n        for (var i = 0; i < defaultKeymap.length; i++) {\n          if (keys == defaultKeymap[i].keys && defaultKeymap[i].context === ctx) {\n            defaultKeymap.splice(i, 1);\n            return;\n          }\n        }\n      }\n\n      throw Error('No such mapping.');\n    }\n  };\n  var exCommands = {\n    colorscheme: function colorscheme(cm, params) {\n      if (!params.args || params.args.length < 1) {\n        showConfirm(cm, cm.getOption('theme'));\n        return;\n      }\n\n      cm.setOption('theme', params.args[0]);\n    },\n    map: function map(cm, params, ctx) {\n      var mapArgs = params.args;\n\n      if (!mapArgs || mapArgs.length < 2) {\n        if (cm) {\n          showConfirm(cm, 'Invalid mapping: ' + params.input);\n        }\n\n        return;\n      }\n\n      exCommandDispatcher.map(mapArgs[0], mapArgs[1], ctx);\n    },\n    imap: function imap(cm, params) {\n      this.map(cm, params, 'insert');\n    },\n    nmap: function nmap(cm, params) {\n      this.map(cm, params, 'normal');\n    },\n    vmap: function vmap(cm, params) {\n      this.map(cm, params, 'visual');\n    },\n    unmap: function unmap(cm, params, ctx) {\n      var mapArgs = params.args;\n\n      if (!mapArgs || mapArgs.length < 1) {\n        if (cm) {\n          showConfirm(cm, 'No such mapping: ' + params.input);\n        }\n\n        return;\n      }\n\n      exCommandDispatcher.unmap(mapArgs[0], ctx);\n    },\n    move: function move(cm, params) {\n      commandDispatcher.processCommand(cm, cm.state.vim, {\n        type: 'motion',\n        motion: 'moveToLineOrEdgeOfDocument',\n        motionArgs: {\n          forward: false,\n          explicitRepeat: true,\n          linewise: true\n        },\n        repeatOverride: params.line + 1\n      });\n    },\n    set: function set(cm, params) {\n      var setArgs = params.args; // Options passed through to the setOption/getOption calls. May be passed in by the\n      // local/global versions of the set command\n\n      var setCfg = params.setCfg || {};\n\n      if (!setArgs || setArgs.length < 1) {\n        if (cm) {\n          showConfirm(cm, 'Invalid mapping: ' + params.input);\n        }\n\n        return;\n      }\n\n      var expr = setArgs[0].split('=');\n      var optionName = expr[0];\n      var value = expr[1];\n      var forceGet = false;\n\n      if (optionName.charAt(optionName.length - 1) == '?') {\n        // If post-fixed with ?, then the set is actually a get.\n        if (value) {\n          throw Error('Trailing characters: ' + params.argString);\n        }\n\n        optionName = optionName.substring(0, optionName.length - 1);\n        forceGet = true;\n      }\n\n      if (value === undefined && optionName.substring(0, 2) == 'no') {\n        // To set boolean options to false, the option name is prefixed with\n        // 'no'.\n        optionName = optionName.substring(2);\n        value = false;\n      }\n\n      var optionIsBoolean = options[optionName] && options[optionName].type == 'boolean';\n\n      if (optionIsBoolean && value == undefined) {\n        // Calling set with a boolean option sets it to true.\n        value = true;\n      } // If no value is provided, then we assume this is a get.\n\n\n      if (!optionIsBoolean && value === undefined || forceGet) {\n        var oldValue = getOption(optionName, cm, setCfg);\n\n        if (oldValue instanceof Error) {\n          showConfirm(cm, oldValue.message);\n        } else if (oldValue === true || oldValue === false) {\n          showConfirm(cm, ' ' + (oldValue ? '' : 'no') + optionName);\n        } else {\n          showConfirm(cm, '  ' + optionName + '=' + oldValue);\n        }\n      } else {\n        var setOptionReturn = setOption(optionName, value, cm, setCfg);\n\n        if (setOptionReturn instanceof Error) {\n          showConfirm(cm, setOptionReturn.message);\n        }\n      }\n    },\n    setlocal: function setlocal(cm, params) {\n      // setCfg is passed through to setOption\n      params.setCfg = {\n        scope: 'local'\n      };\n      this.set(cm, params);\n    },\n    setglobal: function setglobal(cm, params) {\n      // setCfg is passed through to setOption\n      params.setCfg = {\n        scope: 'global'\n      };\n      this.set(cm, params);\n    },\n    registers: function registers(cm, params) {\n      var regArgs = params.args;\n      var registers = vimGlobalState.registerController.registers;\n      var regInfo = '----------Registers----------<br><br>';\n\n      if (!regArgs) {\n        for (var registerName in registers) {\n          var text = registers[registerName].toString();\n\n          if (text.length) {\n            regInfo += '\"' + registerName + '    ' + text + '<br>';\n          }\n        }\n      } else {\n        var registerName;\n        regArgs = regArgs.join('');\n\n        for (var i = 0; i < regArgs.length; i++) {\n          registerName = regArgs.charAt(i);\n\n          if (!vimGlobalState.registerController.isValidRegister(registerName)) {\n            continue;\n          }\n\n          var register = registers[registerName] || new Register();\n          regInfo += '\"' + registerName + '    ' + register.toString() + '<br>';\n        }\n      }\n\n      showConfirm(cm, regInfo);\n    },\n    sort: function sort(cm, params) {\n      var reverse, ignoreCase, unique, number, pattern;\n\n      function parseArgs() {\n        if (params.argString) {\n          var args = new _cm_adapter[\"default\"].StringStream(params.argString);\n\n          if (args.eat('!')) {\n            reverse = true;\n          }\n\n          if (args.eol()) {\n            return;\n          }\n\n          if (!args.eatSpace()) {\n            return 'Invalid arguments';\n          }\n\n          var opts = args.match(/([dinuox]+)?\\s*(\\/.+\\/)?\\s*/);\n\n          if (!opts && !args.eol()) {\n            return 'Invalid arguments';\n          }\n\n          if (opts[1]) {\n            ignoreCase = opts[1].indexOf('i') != -1;\n            unique = opts[1].indexOf('u') != -1;\n            var decimal = opts[1].indexOf('d') != -1 || opts[1].indexOf('n') != -1 && 1;\n            var hex = opts[1].indexOf('x') != -1 && 1;\n            var octal = opts[1].indexOf('o') != -1 && 1;\n\n            if (decimal + hex + octal > 1) {\n              return 'Invalid arguments';\n            }\n\n            number = decimal && 'decimal' || hex && 'hex' || octal && 'octal';\n          }\n\n          if (opts[2]) {\n            pattern = new RegExp(opts[2].substr(1, opts[2].length - 2), ignoreCase ? 'i' : '');\n          }\n        }\n      }\n\n      var err = parseArgs();\n\n      if (err) {\n        showConfirm(cm, err + ': ' + params.argString);\n        return;\n      }\n\n      var lineStart = params.line || cm.firstLine();\n      var lineEnd = params.lineEnd || params.line || cm.lastLine();\n\n      if (lineStart == lineEnd) {\n        return;\n      }\n\n      var curStart = Pos(lineStart, 0);\n      var curEnd = Pos(lineEnd, lineLength(cm, lineEnd));\n      var text = cm.getRange(curStart, curEnd).split('\\n');\n      var numberRegex = pattern ? pattern : number == 'decimal' ? /(-?)([\\d]+)/ : number == 'hex' ? /(-?)(?:0x)?([0-9a-f]+)/i : number == 'octal' ? /([0-7]+)/ : null;\n      var radix = number == 'decimal' ? 10 : number == 'hex' ? 16 : number == 'octal' ? 8 : null;\n      var numPart = [],\n          textPart = [];\n\n      if (number || pattern) {\n        for (var i = 0; i < text.length; i++) {\n          var matchPart = pattern ? text[i].match(pattern) : null;\n\n          if (matchPart && matchPart[0] != '') {\n            numPart.push(matchPart);\n          } else if (!pattern && numberRegex.exec(text[i])) {\n            numPart.push(text[i]);\n          } else {\n            textPart.push(text[i]);\n          }\n        }\n      } else {\n        textPart = text;\n      }\n\n      function compareFn(a, b) {\n        if (reverse) {\n          var tmp;\n          tmp = a;\n          a = b;\n          b = tmp;\n        }\n\n        if (ignoreCase) {\n          a = a.toLowerCase();\n          b = b.toLowerCase();\n        }\n\n        var anum = number && numberRegex.exec(a);\n        var bnum = number && numberRegex.exec(b);\n\n        if (!anum) {\n          return a < b ? -1 : 1;\n        }\n\n        anum = parseInt((anum[1] + anum[2]).toLowerCase(), radix);\n        bnum = parseInt((bnum[1] + bnum[2]).toLowerCase(), radix);\n        return anum - bnum;\n      }\n\n      function comparePatternFn(a, b) {\n        if (reverse) {\n          var tmp;\n          tmp = a;\n          a = b;\n          b = tmp;\n        }\n\n        if (ignoreCase) {\n          a[0] = a[0].toLowerCase();\n          b[0] = b[0].toLowerCase();\n        }\n\n        return a[0] < b[0] ? -1 : 1;\n      }\n\n      numPart.sort(pattern ? comparePatternFn : compareFn);\n\n      if (pattern) {\n        for (var i = 0; i < numPart.length; i++) {\n          numPart[i] = numPart[i].input;\n        }\n      } else if (!number) {\n        textPart.sort(compareFn);\n      }\n\n      text = !reverse ? textPart.concat(numPart) : numPart.concat(textPart);\n\n      if (unique) {\n        // Remove duplicate lines\n        var textOld = text;\n        var lastLine;\n        text = [];\n\n        for (var i = 0; i < textOld.length; i++) {\n          if (textOld[i] != lastLine) {\n            text.push(textOld[i]);\n          }\n\n          lastLine = textOld[i];\n        }\n      }\n\n      cm.replaceRange(text.join('\\n'), curStart, curEnd);\n    },\n    global: function global(cm, params) {\n      // a global command is of the form\n      // :[range]g/pattern/[cmd]\n      // argString holds the string /pattern/[cmd]\n      var argString = params.argString;\n\n      if (!argString) {\n        showConfirm(cm, 'Regular Expression missing from global');\n        return;\n      } // range is specified here\n\n\n      var lineStart = params.line !== undefined ? params.line : cm.firstLine();\n      var lineEnd = params.lineEnd || params.line || cm.lastLine(); // get the tokens from argString\n\n      var tokens = splitBySlash(argString);\n      var regexPart = argString,\n          cmd;\n\n      if (tokens.length) {\n        regexPart = tokens[0];\n        cmd = tokens.slice(1, tokens.length).join('/');\n      }\n\n      if (regexPart) {\n        // If regex part is empty, then use the previous query. Otherwise\n        // use the regex part as the new query.\n        try {\n          updateSearchQuery(cm, regexPart, true\n          /** ignoreCase */\n          , true\n          /** smartCase */\n          );\n        } catch (e) {\n          showConfirm(cm, 'Invalid regex: ' + regexPart);\n          return;\n        }\n      } // now that we have the regexPart, search for regex matches in the\n      // specified range of lines\n\n\n      var query = getSearchState(cm).getQuery();\n      var matchedLines = [],\n          content = '';\n\n      for (var i = lineStart; i <= lineEnd; i++) {\n        var matched = query.test(cm.getLine(i));\n\n        if (matched) {\n          matchedLines.push(i + 1);\n          content += cm.getLine(i) + '<br>';\n        }\n      } // if there is no [cmd], just display the list of matched lines\n\n\n      if (!cmd) {\n        showConfirm(cm, content);\n        return;\n      }\n\n      var index = 0;\n\n      var nextCommand = function nextCommand() {\n        if (index < matchedLines.length) {\n          var command = matchedLines[index] + cmd;\n          exCommandDispatcher.processCommand(cm, command, {\n            callback: nextCommand\n          });\n        }\n\n        index++;\n      };\n\n      nextCommand();\n    },\n    substitute: function substitute(cm, params) {\n      if (!cm.getSearchCursor) {\n        throw new Error('Search feature not available. Requires searchcursor.js or ' + 'any other getSearchCursor implementation.');\n      }\n\n      var argString = params.argString;\n      var tokens = argString ? splitBySeparator(argString, argString[0]) : [];\n      var regexPart,\n          replacePart = '',\n          trailing,\n          flagsPart,\n          count;\n      var confirm = false; // Whether to confirm each replace.\n\n      var global = false; // True to replace all instances on a line, false to replace only 1.\n\n      if (tokens.length) {\n        regexPart = tokens[0];\n        replacePart = tokens[1];\n\n        if (regexPart && regexPart[regexPart.length - 1] === '$') {\n          regexPart = regexPart.slice(0, regexPart.length - 1) + '\\\\n';\n          replacePart = replacePart ? replacePart + '\\n' : '\\n';\n        }\n\n        if (replacePart !== undefined) {\n          if (getOption('pcre')) {\n            replacePart = unescapeRegexReplace(replacePart);\n          } else {\n            replacePart = translateRegexReplace(replacePart);\n          }\n\n          vimGlobalState.lastSubstituteReplacePart = replacePart;\n        }\n\n        trailing = tokens[2] ? tokens[2].split(' ') : [];\n      } else {\n        // either the argString is empty or its of the form ' hello/world'\n        // actually splitBySlash returns a list of tokens\n        // only if the string starts with a '/'\n        if (argString && argString.length) {\n          showConfirm(cm, 'Substitutions should be of the form ' + ':s/pattern/replace/');\n          return;\n        }\n      } // After the 3rd slash, we can have flags followed by a space followed\n      // by count.\n\n\n      if (trailing) {\n        flagsPart = trailing[0];\n        count = parseInt(trailing[1]);\n\n        if (flagsPart) {\n          if (flagsPart.indexOf('c') != -1) {\n            confirm = true;\n            flagsPart.replace('c', '');\n          }\n\n          if (flagsPart.indexOf('g') != -1) {\n            global = true;\n            flagsPart.replace('g', '');\n          }\n\n          regexPart = regexPart.replace(/\\//g, \"\\\\/\") + '/' + flagsPart;\n        }\n      }\n\n      if (regexPart) {\n        // If regex part is empty, then use the previous query. Otherwise use\n        // the regex part as the new query.\n        try {\n          updateSearchQuery(cm, regexPart, true\n          /** ignoreCase */\n          , true\n          /** smartCase */\n          );\n        } catch (e) {\n          showConfirm(cm, 'Invalid regex: ' + regexPart);\n          return;\n        }\n      }\n\n      replacePart = replacePart || vimGlobalState.lastSubstituteReplacePart;\n\n      if (replacePart === undefined) {\n        showConfirm(cm, 'No previous substitute regular expression');\n        return;\n      }\n\n      var state = getSearchState(cm);\n      var query = state.getQuery();\n      var lineStart = params.line !== undefined ? params.line : cm.getCursor().line;\n      var lineEnd = params.lineEnd || lineStart;\n\n      if (lineStart == cm.firstLine() && lineEnd == cm.lastLine()) {\n        lineEnd = Infinity;\n      }\n\n      if (count) {\n        lineStart = lineEnd;\n        lineEnd = lineStart + count - 1;\n      }\n\n      var startPos = clipCursorToContent(cm, Pos(lineStart, 0));\n      var cursor = cm.getSearchCursor(query, startPos);\n      doReplace(cm, confirm, global, lineStart, lineEnd, cursor, query, replacePart, params.callback);\n    },\n    redo: _cm_adapter[\"default\"].commands.redo,\n    undo: _cm_adapter[\"default\"].commands.undo,\n    write: function write(cm) {\n      if (_cm_adapter[\"default\"].commands.save) {\n        // If a save command is defined, call it.\n        _cm_adapter[\"default\"].commands.save(cm);\n      } else if (cm.save) {\n        // Saves to text area if no save command is defined and cm.save() is available.\n        cm.save();\n      }\n    },\n    nohlsearch: function nohlsearch(cm) {\n      clearSearchHighlight(cm);\n    },\n    yank: function yank(cm) {\n      var cur = copyCursor(cm.getCursor());\n      var line = cur.line;\n      var lineText = cm.getLine(line);\n      vimGlobalState.registerController.pushText('0', 'yank', lineText, true, true);\n    },\n    delmarks: function delmarks(cm, params) {\n      if (!params.argString || !trim(params.argString)) {\n        showConfirm(cm, 'Argument required');\n        return;\n      }\n\n      var state = cm.state.vim;\n      var stream = new _cm_adapter[\"default\"].StringStream(trim(params.argString));\n\n      while (!stream.eol()) {\n        stream.eatSpace(); // Record the streams position at the beginning of the loop for use\n        // in error messages.\n\n        var count = stream.pos;\n\n        if (!stream.match(/[a-zA-Z]/, false)) {\n          showConfirm(cm, 'Invalid argument: ' + params.argString.substring(count));\n          return;\n        }\n\n        var sym = stream.next(); // Check if this symbol is part of a range\n\n        if (stream.match('-', true)) {\n          // This symbol is part of a range.\n          // The range must terminate at an alphabetic character.\n          if (!stream.match(/[a-zA-Z]/, false)) {\n            showConfirm(cm, 'Invalid argument: ' + params.argString.substring(count));\n            return;\n          }\n\n          var startMark = sym;\n          var finishMark = stream.next(); // The range must terminate at an alphabetic character which\n          // shares the same case as the start of the range.\n\n          if (isLowerCase(startMark) && isLowerCase(finishMark) || isUpperCase(startMark) && isUpperCase(finishMark)) {\n            var start = startMark.charCodeAt(0);\n            var finish = finishMark.charCodeAt(0);\n\n            if (start >= finish) {\n              showConfirm(cm, 'Invalid argument: ' + params.argString.substring(count));\n              return;\n            } // Because marks are always ASCII values, and we have\n            // determined that they are the same case, we can use\n            // their char codes to iterate through the defined range.\n\n\n            for (var j = 0; j <= finish - start; j++) {\n              var mark = String.fromCharCode(start + j);\n              delete state.marks[mark];\n            }\n          } else {\n            showConfirm(cm, 'Invalid argument: ' + startMark + '-');\n            return;\n          }\n        } else {\n          // This symbol is a valid mark, and is not part of a range.\n          delete state.marks[sym];\n        }\n      }\n    }\n  };\n  var exCommandDispatcher = new ExCommandDispatcher();\n  /**\n  * @param {CodeMirror} cm CodeMirror instance we are in.\n  * @param {boolean} confirm Whether to confirm each replace.\n  * @param {Cursor} lineStart Line to start replacing from.\n  * @param {Cursor} lineEnd Line to stop replacing at.\n  * @param {RegExp} query Query for performing matches with.\n  * @param {string} replaceWith Text to replace matches with. May contain $1,\n  *     $2, etc for replacing captured groups using Javascript replace.\n  * @param {function()} callback A callback for when the replace is done.\n  */\n\n  function doReplace(cm, confirm, global, lineStart, lineEnd, searchCursor, query, replaceWith, callback) {\n    // Set up all the functions.\n    cm.state.vim.exMode = true;\n    var done = false;\n    var lastPos = searchCursor.from();\n\n    function replaceAll() {\n      var matches = searchCursor.getMatches();\n      var matchesLength = matches.length;\n      cm.operation(function (matches, matchesLength) {\n        for (var i = matchesLength - 1; i >= 0; i--) {\n          replace();\n          replaceAllNext(matches, i);\n        }\n\n        done = true;\n        stop();\n      }.bind(this, matches, matchesLength));\n    }\n\n    function replace() {\n      var text = cm.getRange(searchCursor.from(), searchCursor.to());\n      var newText = text.replace(query, replaceWith);\n      searchCursor.replace(newText);\n    }\n\n    function replaceAllNext(matches, index) {\n      var hasNext = searchCursor.jumpTo(index) && isInRange(searchCursor.from(), lineStart, lineEnd);\n      var match = matches.pop();\n\n      if (hasNext && !global && lastPos && searchCursor.from().line == lastPos.line) {\n        // Skip over multiple occurrences on the same line when 'global' is\n        // not true.\n        return;\n      }\n\n      cm.scrollIntoView(searchCursor.from(), 30);\n      lastPos = searchCursor.from();\n      done = false;\n      return;\n    }\n\n    function next() {\n      // The below only loops to skip over multiple occurrences on the same\n      // line when 'global' is not true.\n      while (searchCursor.findNext() && isInRange(searchCursor.from(), lineStart, lineEnd)) {\n        if (!global && lastPos && searchCursor.from().line == lastPos.line) {\n          continue;\n        }\n\n        cm.scrollIntoView(searchCursor.from(), 30);\n        cm.setSelection(searchCursor.from(), searchCursor.to());\n        lastPos = searchCursor.from();\n        done = false;\n        return;\n      }\n\n      done = true;\n    }\n\n    function stop(close) {\n      if (close) {\n        close();\n      }\n\n      cm.focus();\n\n      if (lastPos) {\n        cm.setCursor(lastPos);\n        var vim = cm.state.vim;\n        vim.exMode = false;\n        vim.lastHPos = vim.lastHSPos = lastPos.ch;\n      }\n\n      if (callback) {\n        callback();\n      }\n    }\n\n    function onPromptKeyDown(e, _value, close) {\n      // Swallow all keys.\n      _cm_adapter[\"default\"].e_stop(e);\n\n      var keyName = _cm_adapter[\"default\"].keyName(e);\n\n      switch (keyName) {\n        case 'y':\n        case 'Y':\n          replace();\n          next();\n          break;\n\n        case 'n':\n        case 'N':\n          next();\n          break;\n\n        case 'a':\n        case 'A':\n          // replaceAll contains a call to close of its own. We don't want it\n          // to fire too early or multiple times.\n          var savedCallback = callback;\n          callback = undefined;\n          cm.operation(replaceAll);\n          callback = savedCallback;\n          break;\n\n        case 'l':\n        case 'L':\n          replace();\n        // fall through and exit.\n\n        case 'q':\n        case 'Q':\n        case 'Esc':\n        case 'Ctrl-C':\n        case 'Ctrl-[':\n          stop(close);\n          break;\n      }\n\n      if (done) {\n        stop(close);\n      }\n\n      return true;\n    } // Actually do replace.\n\n\n    next();\n\n    if (done) {\n      showConfirm(cm, 'No matches for ' + query.source);\n      return;\n    }\n\n    if (!confirm) {\n      replaceAll();\n\n      if (callback) {\n        callback();\n      }\n\n      return;\n    }\n\n    showPrompt(cm, {\n      prefix: 'replace with <strong>' + replaceWith + '</strong> (y/n/a/q/l)',\n      onKeyDown: onPromptKeyDown\n    });\n  }\n\n  _cm_adapter[\"default\"].keyMap.vim = {\n    attach: attachVimMap,\n    detach: detachVimMap,\n    call: cmKey\n  };\n\n  function exitInsertMode(cm) {\n    var vim = cm.state.vim;\n    var macroModeState = vimGlobalState.macroModeState;\n    var insertModeChangeRegister = vimGlobalState.registerController.getRegister('.');\n    var isPlaying = macroModeState.isPlaying;\n    var lastChange = macroModeState.lastInsertModeChanges; // In case of visual block, the insertModeChanges are not saved as a\n    // single word, so we convert them to a single word\n    // so as to update the \". register as expected in real vim.\n\n    var text = [];\n\n    if (!isPlaying) {\n      var selLength = lastChange.inVisualBlock && vim.lastSelection ? vim.lastSelection.visualBlock.height : 1;\n      var changes = lastChange.changes;\n      var text = [];\n      var i = 0; // In case of multiple selections in blockwise visual,\n      // the inserted text, for example: 'f<Backspace>oo', is stored as\n      // 'f', 'f', InsertModeKey 'o', 'o', 'o', 'o'. (if you have a block with 2 lines).\n      // We push the contents of the changes array as per the following:\n      // 1. In case of InsertModeKey, just increment by 1.\n      // 2. In case of a character, jump by selLength (2 in the example).\n\n      while (i < changes.length) {\n        // This loop will convert 'ff<bs>oooo' to 'f<bs>oo'.\n        text.push(changes[i]);\n\n        if (changes[i] instanceof InsertModeKey) {\n          i++;\n        } else {\n          i += selLength;\n        }\n      }\n\n      lastChange.changes = text;\n      cm.off('change', onChange);\n\n      _cm_adapter[\"default\"].off(cm.getInputField(), 'keydown', onKeyEventTargetKeyDown);\n    }\n\n    if (!isPlaying && vim.insertModeRepeat > 1) {\n      // Perform insert mode repeat for commands like 3,a and 3,o.\n      _repeatLastEdit(cm, vim, vim.insertModeRepeat - 1, true\n      /** repeatForInsert */\n      );\n\n      vim.lastEditInputState.repeatOverride = vim.insertModeRepeat;\n    }\n\n    delete vim.insertModeRepeat;\n    vim.insertMode = false;\n    cm.setCursor(cm.getCursor().line, cm.getCursor().ch - 1);\n    cm.setOption('keyMap', 'vim');\n    cm.setOption('disableInput', true);\n    cm.toggleOverwrite(false); // exit replace mode if we were in it.\n    // update the \". register before exiting insert mode\n\n    insertModeChangeRegister.setText(lastChange.changes.join(''));\n\n    _cm_adapter[\"default\"].signal(cm, \"vim-mode-change\", {\n      mode: \"normal\"\n    });\n\n    if (macroModeState.isRecording) {\n      logInsertModeChange(macroModeState);\n    }\n\n    cm.enterVimMode();\n  }\n\n  function _mapCommand(command) {\n    defaultKeymap.unshift(command);\n  }\n\n  function mapCommand(keys, type, name, args, extra) {\n    var command = {\n      keys: keys,\n      type: type\n    };\n    command[type] = name;\n    command[type + \"Args\"] = args;\n\n    for (var key in extra) {\n      command[key] = extra[key];\n    }\n\n    _mapCommand(command);\n  } // The timeout in milliseconds for the two-character ESC keymap should be\n  // adjusted according to your typing speed to prevent false positives.\n\n\n  defineOption('insertModeEscKeysTimeout', 200, 'number');\n  _cm_adapter[\"default\"].keyMap['vim-insert'] = {\n    // TODO: override navigation keys so that Esc will cancel automatic\n    // indentation from o, O, i_<CR>\n    fallthrough: ['default'],\n    attach: attachVimMap,\n    detach: detachVimMap,\n    call: cmKey\n  };\n  _cm_adapter[\"default\"].keyMap['vim-replace'] = {\n    'Backspace': 'goCharLeft',\n    fallthrough: ['vim-insert'],\n    attach: attachVimMap,\n    detach: detachVimMap,\n    call: cmKey\n  };\n\n  function executeMacroRegister(cm, vim, macroModeState, registerName) {\n    var register = vimGlobalState.registerController.getRegister(registerName);\n\n    if (registerName == ':') {\n      // Read-only register containing last Ex command.\n      if (register.keyBuffer[0]) {\n        exCommandDispatcher.processCommand(cm, register.keyBuffer[0]);\n      }\n\n      macroModeState.isPlaying = false;\n      return;\n    }\n\n    var keyBuffer = register.keyBuffer;\n    var imc = 0;\n    macroModeState.isPlaying = true;\n    macroModeState.replaySearchQueries = register.searchQueries.slice(0);\n\n    for (var i = 0; i < keyBuffer.length; i++) {\n      var text = keyBuffer[i];\n      var match, key;\n\n      while (text) {\n        // Pull off one command key, which is either a single character\n        // or a special sequence wrapped in '<' and '>', e.g. '<Space>'.\n        match = /<\\w+-.+?>|<\\w+>|./.exec(text);\n        key = match[0];\n        text = text.substring(match.index + key.length);\n\n        _cm_adapter[\"default\"].Vim.handleKey(cm, key, 'macro');\n\n        if (vim.insertMode) {\n          var changes = register.insertModeChanges[imc++].changes;\n          vimGlobalState.macroModeState.lastInsertModeChanges.changes = changes;\n          repeatInsertModeChanges(cm, changes, 1);\n          exitInsertMode(cm);\n        }\n      }\n    }\n\n    macroModeState.isPlaying = false;\n  }\n\n  function logKey(macroModeState, key) {\n    if (macroModeState.isPlaying) {\n      return;\n    }\n\n    var registerName = macroModeState.latestRegister;\n    var register = vimGlobalState.registerController.getRegister(registerName);\n\n    if (register) {\n      register.pushText(key);\n    }\n  }\n\n  function logInsertModeChange(macroModeState) {\n    if (macroModeState.isPlaying) {\n      return;\n    }\n\n    var registerName = macroModeState.latestRegister;\n    var register = vimGlobalState.registerController.getRegister(registerName);\n\n    if (register && register.pushInsertModeChanges) {\n      register.pushInsertModeChanges(macroModeState.lastInsertModeChanges);\n    }\n  }\n\n  function logSearchQuery(macroModeState, query) {\n    if (macroModeState.isPlaying) {\n      return;\n    }\n\n    var registerName = macroModeState.latestRegister;\n    var register = vimGlobalState.registerController.getRegister(registerName);\n\n    if (register && register.pushSearchQuery) {\n      register.pushSearchQuery(query);\n    }\n  }\n  /**\n   * Listens for changes made in insert mode.\n   * Should only be active in insert mode.\n   */\n\n\n  function onChange(cm, changeObj) {\n    var macroModeState = vimGlobalState.macroModeState;\n    var lastChange = macroModeState.lastInsertModeChanges;\n\n    if (!macroModeState.isPlaying) {\n      while (changeObj) {\n        lastChange.expectCursorActivityForChange = true;\n\n        if (changeObj.origin == '+input' || changeObj.origin == 'paste' || changeObj.origin === undefined\n        /* only in testing */\n        ) {\n            var text = changeObj.text.join('\\n');\n\n            if (lastChange.maybeReset) {\n              lastChange.changes = [];\n              lastChange.maybeReset = false;\n            }\n\n            if (cm.state.overwrite && !/\\n/.test(text)) {\n              lastChange.changes.push([text]);\n            } else {\n              lastChange.changes.push(text);\n            }\n          } // Change objects may be chained with next.\n\n\n        changeObj = changeObj.next;\n      }\n    }\n  }\n  /**\n  * Listens for any kind of cursor activity on CodeMirror.\n  */\n\n\n  function onCursorActivity(cm) {\n    var vim = cm.state.vim;\n\n    if (vim.insertMode) {\n      // Tracking cursor activity in insert mode (for macro support).\n      var macroModeState = vimGlobalState.macroModeState;\n\n      if (macroModeState.isPlaying) {\n        return;\n      }\n\n      var lastChange = macroModeState.lastInsertModeChanges;\n\n      if (lastChange.expectCursorActivityForChange) {\n        lastChange.expectCursorActivityForChange = false;\n      } else {\n        // Cursor moved outside the context of an edit. Reset the change.\n        lastChange.maybeReset = true;\n      }\n    } else if (!cm.curOp.isVimOp) {\n      handleExternalSelection(cm, vim);\n    }\n\n    if (vim.visualMode) {\n      updateFakeCursor(cm);\n    }\n  }\n\n  function updateFakeCursor(cm) {\n    var vim = cm.state.vim;\n    var from = clipCursorToContent(cm, copyCursor(vim.sel.head));\n    var to = offsetCursor(from, 0, 1);\n\n    if (vim.fakeCursor) {\n      vim.fakeCursor.clear();\n    }\n\n    vim.fakeCursor = cm.markText(from, to, {\n      className: 'cm-animate-fat-cursor'\n    });\n  }\n\n  function handleExternalSelection(cm, vim) {\n    var anchor = cm.getCursor('anchor');\n    var head = cm.getCursor('head'); // Enter or exit visual mode to match mouse selection.\n\n    if (vim.visualMode && !cm.somethingSelected()) {\n      exitVisualMode(cm, false);\n    } else if (!vim.visualMode && !vim.insertMode && cm.somethingSelected()) {\n      vim.visualMode = true;\n      vim.visualLine = false;\n\n      _cm_adapter[\"default\"].signal(cm, \"vim-mode-change\", {\n        mode: \"visual\"\n      });\n    }\n\n    if (vim.visualMode) {\n      // Bind CodeMirror selection model to vim selection model.\n      // Mouse selections are considered visual characterwise.\n      var headOffset = !cursorIsBefore(head, anchor) ? -1 : 0;\n      var anchorOffset = cursorIsBefore(head, anchor) ? -1 : 0;\n      head = offsetCursor(head, 0, headOffset);\n      anchor = offsetCursor(anchor, 0, anchorOffset);\n      vim.sel = {\n        anchor: anchor,\n        head: head\n      };\n      updateMark(cm, vim, '<', cursorMin(head, anchor));\n      updateMark(cm, vim, '>', cursorMax(head, anchor));\n    } else if (!vim.insertMode) {\n      // Reset lastHPos if selection was modified by something outside of vim mode e.g. by mouse.\n      vim.lastHPos = cm.getCursor().ch;\n    }\n  }\n  /** Wrapper for special keys pressed in insert mode */\n\n\n  function InsertModeKey(keyName) {\n    this.keyName = keyName;\n  }\n  /**\n  * Handles raw key down events from the text area.\n  * - Should only be active in insert mode.\n  * - For recording deletes in insert mode.\n  */\n\n\n  function onKeyEventTargetKeyDown(e) {\n    var macroModeState = vimGlobalState.macroModeState;\n    var lastChange = macroModeState.lastInsertModeChanges;\n\n    var keyName = _cm_adapter[\"default\"].keyName(e);\n\n    if (!keyName) {\n      return;\n    }\n\n    function onKeyFound() {\n      if (lastChange.maybeReset) {\n        lastChange.changes = [];\n        lastChange.maybeReset = false;\n      }\n\n      lastChange.changes.push(new InsertModeKey(keyName));\n      return true;\n    }\n\n    if (keyName.indexOf('Delete') != -1 || keyName.indexOf('Backspace') != -1) {\n      _cm_adapter[\"default\"].lookupKey(keyName, 'vim-insert', onKeyFound);\n    }\n  }\n  /**\n   * Repeats the last edit, which includes exactly 1 command and at most 1\n   * insert. Operator and motion commands are read from lastEditInputState,\n   * while action commands are read from lastEditActionCommand.\n   *\n   * If repeatForInsert is true, then the function was called by\n   * exitInsertMode to repeat the insert mode changes the user just made. The\n   * corresponding enterInsertMode call was made with a count.\n   */\n\n\n  function _repeatLastEdit(cm, vim, repeat, repeatForInsert) {\n    var macroModeState = vimGlobalState.macroModeState;\n    macroModeState.isPlaying = true;\n    var isAction = !!vim.lastEditActionCommand;\n    var cachedInputState = vim.inputState;\n\n    function repeatCommand() {\n      if (isAction) {\n        commandDispatcher.processAction(cm, vim, vim.lastEditActionCommand);\n      } else {\n        commandDispatcher.evalInput(cm, vim);\n      }\n    }\n\n    function repeatInsert(repeat) {\n      if (macroModeState.lastInsertModeChanges.changes.length > 0) {\n        // For some reason, repeat cw in desktop VIM does not repeat\n        // insert mode changes. Will conform to that behavior.\n        repeat = !vim.lastEditActionCommand ? 1 : repeat;\n        var changeObject = macroModeState.lastInsertModeChanges;\n        repeatInsertModeChanges(cm, changeObject.changes, repeat);\n      }\n    }\n\n    vim.inputState = vim.lastEditInputState;\n\n    if (isAction && vim.lastEditActionCommand.interlaceInsertRepeat) {\n      // o and O repeat have to be interlaced with insert repeats so that the\n      // insertions appear on separate lines instead of the last line.\n      for (var i = 0; i < repeat; i++) {\n        repeatCommand();\n        repeatInsert(1);\n      }\n    } else {\n      if (!repeatForInsert) {\n        // Hack to get the cursor to end up at the right place. If I is\n        // repeated in insert mode repeat, cursor will be 1 insert\n        // change set left of where it should be.\n        repeatCommand();\n      }\n\n      repeatInsert(repeat);\n    }\n\n    vim.inputState = cachedInputState;\n\n    if (vim.insertMode && !repeatForInsert) {\n      // Don't exit insert mode twice. If repeatForInsert is set, then we\n      // were called by an exitInsertMode call lower on the stack.\n      exitInsertMode(cm);\n    }\n\n    macroModeState.isPlaying = false;\n  }\n\n  function repeatInsertModeChanges(cm, changes, repeat) {\n    function keyHandler(binding) {\n      if (typeof binding == 'string') {\n        _cm_adapter[\"default\"].commands[binding](cm);\n      } else {\n        binding(cm);\n      }\n\n      return true;\n    }\n\n    var head = cm.getCursor('head');\n    var inVisualBlock = vimGlobalState.macroModeState.lastInsertModeChanges.inVisualBlock;\n\n    if (inVisualBlock) {\n      // Set up block selection again for repeating the changes.\n      var vim = cm.state.vim;\n      var lastSel = vim.lastSelection;\n      var offset = getOffset(lastSel.anchor, lastSel.head);\n      selectForInsert(cm, head, offset.line + 1);\n      repeat = cm.listSelections().length;\n      cm.setCursor(head);\n    }\n\n    for (var i = 0; i < repeat; i++) {\n      if (inVisualBlock) {\n        cm.setCursor(offsetCursor(head, i, 0));\n      }\n\n      for (var j = 0; j < changes.length; j++) {\n        var change = changes[j];\n\n        if (change instanceof InsertModeKey) {\n          _cm_adapter[\"default\"].lookupKey(change.keyName, 'vim-insert', keyHandler);\n        } else if (typeof change == \"string\") {\n          var cur = cm.getCursor();\n          cm.replaceRange(change, cur, cur);\n        } else {\n          var start = cm.getCursor();\n          var end = offsetCursor(start, 0, change[0].length);\n          cm.replaceRange(change[0], start, end);\n        }\n      }\n    }\n\n    if (inVisualBlock) {\n      cm.setCursor(offsetCursor(head, 0, 1));\n    }\n  }\n\n  resetVimGlobalState();\n  return vimApi;\n};\n\nexports.Vim = Vim;\n_cm_adapter[\"default\"].Vim = Vim();\nvar _default = _cm_adapter[\"default\"];\nexports[\"default\"] = _default;","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports[\"default\"] = void 0;\n\nvar _monacoEditor = require(\"monaco-editor\");\n\nvar _cursorTypeOperations = require(\"monaco-editor/esm/vs/editor/common/controller/cursorTypeOperations\");\n\nfunction _slicedToArray(arr, i) { return _arrayWithHoles(arr) || _iterableToArrayLimit(arr, i) || _nonIterableRest(); }\n\nfunction _nonIterableRest() { throw new TypeError(\"Invalid attempt to destructure non-iterable instance\"); }\n\nfunction _iterableToArrayLimit(arr, i) { if (!(Symbol.iterator in Object(arr) || Object.prototype.toString.call(arr) === \"[object Arguments]\")) { return; } var _arr = []; var _n = true; var _d = false; var _e = undefined; try { for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) { _arr.push(_s.value); if (i && _arr.length === i) break; } } catch (err) { _d = true; _e = err; } finally { try { if (!_n && _i[\"return\"] != null) _i[\"return\"](); } finally { if (_d) throw _e; } } return _arr; }\n\nfunction _arrayWithHoles(arr) { if (Array.isArray(arr)) return arr; }\n\nfunction _typeof(obj) { if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") { _typeof = function _typeof(obj) { return typeof obj; }; } else { _typeof = function _typeof(obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }; } return _typeof(obj); }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\nvar VerticalRevealType = {\n  Bottom: 4\n}; // for monaco 0.19.x where x < 3\n\nvar EditorOptConstants = {\n  readOnly: 65,\n  cursorWidth: 20,\n  fontInfo: 32\n};\nvar _window$navigator = window.navigator,\n    userAgent = _window$navigator.userAgent,\n    platform = _window$navigator.platform;\nvar edge = /Edge\\/(\\d+)/.exec(userAgent);\nvar ios = !edge && /AppleWebKit/.test(userAgent) && /Mobile\\/\\w+/.test(userAgent);\nvar mac = ios || /Mac/.test(platform);\nvar nonASCIISingleCaseWordChar = /[\\u00df\\u0587\\u0590-\\u05f4\\u0600-\\u06ff\\u3040-\\u309f\\u30a0-\\u30ff\\u3400-\\u4db5\\u4e00-\\u9fcc\\uac00-\\ud7af]/;\n\nfunction isWordCharBasic(ch) {\n  return /\\w/.test(ch) || ch > \"\\x80\" && (ch.toUpperCase() != ch.toLowerCase() || nonASCIISingleCaseWordChar.test(ch));\n}\n\nfunction Pos(line, column) {\n  if (!(this instanceof Pos)) {\n    return new Pos(line, column);\n  }\n\n  this.line = line;\n  this.ch = column;\n}\n\nfunction signal(cm, signal, args) {\n  cm.dispatch(signal, args);\n}\n\nfunction dummy(key) {\n  return function () {// console.log(key, 'dummy function called with', Array.prototype.slice.call(arguments));\n  };\n}\n\nvar doFold, noFold;\n\nif (String.prototype.normalize) {\n  doFold = function doFold(str) {\n    return str.normalize(\"NFD\").toLowerCase();\n  };\n\n  noFold = function noFold(str) {\n    return str.normalize(\"NFD\");\n  };\n} else {\n  doFold = function doFold(str) {\n    return str.toLowerCase();\n  };\n\n  noFold = function noFold(str) {\n    return str;\n  };\n}\n\nvar StringStream = function StringStream(string, tabSize) {\n  this.pos = this.start = 0;\n  this.string = string;\n  this.tabSize = tabSize || 8;\n  this.lastColumnPos = this.lastColumnValue = 0;\n  this.lineStart = 0;\n};\n\nStringStream.prototype = {\n  eol: function eol() {\n    return this.pos >= this.string.length;\n  },\n  sol: function sol() {\n    return this.pos == this.lineStart;\n  },\n  peek: function peek() {\n    return this.string.charAt(this.pos) || undefined;\n  },\n  next: function next() {\n    if (this.pos < this.string.length) return this.string.charAt(this.pos++);\n  },\n  eat: function eat(match) {\n    var ch = this.string.charAt(this.pos);\n    if (typeof match == \"string\") var ok = ch == match;else var ok = ch && (match.test ? match.test(ch) : match(ch));\n\n    if (ok) {\n      ++this.pos;\n      return ch;\n    }\n  },\n  eatWhile: function eatWhile(match) {\n    var start = this.pos;\n\n    while (this.eat(match)) {}\n\n    return this.pos > start;\n  },\n  eatSpace: function eatSpace() {\n    var start = this.pos;\n\n    while (/[\\s\\u00a0]/.test(this.string.charAt(this.pos))) {\n      ++this.pos;\n    }\n\n    return this.pos > start;\n  },\n  skipToEnd: function skipToEnd() {\n    this.pos = this.string.length;\n  },\n  skipTo: function skipTo(ch) {\n    var found = this.string.indexOf(ch, this.pos);\n\n    if (found > -1) {\n      this.pos = found;\n      return true;\n    }\n  },\n  backUp: function backUp(n) {\n    this.pos -= n;\n  },\n  column: function column() {\n    throw \"not implemented\";\n  },\n  indentation: function indentation() {\n    throw \"not implemented\";\n  },\n  match: function match(pattern, consume, caseInsensitive) {\n    if (typeof pattern == \"string\") {\n      var cased = function cased(str) {\n        return caseInsensitive ? str.toLowerCase() : str;\n      };\n\n      var substr = this.string.substr(this.pos, pattern.length);\n\n      if (cased(substr) == cased(pattern)) {\n        if (consume !== false) this.pos += pattern.length;\n        return true;\n      }\n    } else {\n      var match = this.string.slice(this.pos).match(pattern);\n      if (match && match.index > 0) return null;\n      if (match && consume !== false) this.pos += match[0].length;\n      return match;\n    }\n  },\n  current: function current() {\n    return this.string.slice(this.start, this.pos);\n  },\n  hideFirstChars: function hideFirstChars(n, inner) {\n    this.lineStart += n;\n\n    try {\n      return inner();\n    } finally {\n      this.lineStart -= n;\n    }\n  }\n};\n\nfunction toCmPos(pos) {\n  return new Pos(pos.lineNumber - 1, pos.column - 1);\n}\n\nfunction toMonacoPos(pos) {\n  return new _monacoEditor.Position(pos.line + 1, pos.ch + 1);\n}\n\nvar Marker =\n/*#__PURE__*/\nfunction () {\n  function Marker(cm, id, line, ch) {\n    _classCallCheck(this, Marker);\n\n    this.cm = cm;\n    this.id = id;\n    this.lineNumber = line + 1;\n    this.column = ch + 1;\n    cm.marks[this.id] = this;\n  }\n\n  _createClass(Marker, [{\n    key: \"clear\",\n    value: function clear() {\n      delete this.cm.marks[this.id];\n    }\n  }, {\n    key: \"find\",\n    value: function find() {\n      return toCmPos(this);\n    }\n  }]);\n\n  return Marker;\n}();\n\nfunction monacoToCmKey(e) {\n  var skip = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;\n  var addQuotes = true;\n  var keyName = monaco.KeyCode[e.keyCode];\n\n  if (e.key) {\n    keyName = e.key;\n    addQuotes = false;\n  }\n\n  var key = keyName;\n  var skipOnlyShiftCheck = skip;\n\n  switch (e.keyCode) {\n    case _monacoEditor.KeyCode.Shift:\n    case _monacoEditor.KeyCode.Meta:\n    case _monacoEditor.KeyCode.Alt:\n    case _monacoEditor.KeyCode.Ctrl:\n      return key;\n\n    case _monacoEditor.KeyCode.Escape:\n      skipOnlyShiftCheck = true;\n      key = 'Esc';\n      break;\n  }\n\n  if (keyName.startsWith('KEY_')) {\n    key = keyName[keyName.length - 1].toLowerCase();\n  } else if (keyName.endsWith('Arrow')) {\n    skipOnlyShiftCheck = true;\n    key = keyName.substr(0, keyName.length - 5);\n  } else if (keyName.startsWith('US_')) {\n    key = e.browserEvent.key;\n  }\n\n  if (!skipOnlyShiftCheck && !e.altKey && !e.ctrlKey && !e.metaKey) {\n    key = e.key || e.browserEvent.key;\n  } else {\n    if (e.altKey) {\n      key = \"Alt-\".concat(key);\n    }\n\n    if (e.ctrlKey) {\n      key = \"Ctrl-\".concat(key);\n    }\n\n    if (e.metaKey) {\n      key = \"Meta-\".concat(key);\n    }\n\n    if (e.shiftKey) {\n      key = \"Shift-\".concat(key);\n    }\n  }\n\n  if (key.length === 1 && addQuotes) {\n    key = \"'\".concat(key, \"'\");\n  }\n\n  return key;\n}\n\nvar CMAdapter =\n/*#__PURE__*/\nfunction () {\n  function CMAdapter(editor) {\n    _classCallCheck(this, CMAdapter);\n\n    _initialiseProps.call(this);\n\n    this.editor = editor;\n    this.state = {};\n    this.marks = {};\n    this.$uid = 0;\n    this.disposables = [];\n    this.listeners = {};\n    this.curOp = {};\n    this.attached = false;\n    this.statusBar = null;\n    this.addLocalListeners();\n    this.ctxInsert = this.editor.createContextKey('insertMode', true);\n  }\n\n  _createClass(CMAdapter, [{\n    key: \"attach\",\n    value: function attach() {\n      CMAdapter.keyMap.vim.attach(this);\n    }\n  }, {\n    key: \"addLocalListeners\",\n    value: function addLocalListeners() {\n      this.disposables.push(this.editor.onDidChangeCursorPosition(this.handleCursorChange), this.editor.onDidChangeModelContent(this.handleChange), this.editor.onKeyDown(this.handleKeyDown));\n    }\n  }, {\n    key: \"handleReplaceMode\",\n    value: function handleReplaceMode(key, e) {\n      var fromReplace = false;\n      var _char = key;\n      var pos = this.editor.getPosition();\n      var range = new _monacoEditor.Range(pos.lineNumber, pos.column, pos.lineNumber, pos.column + 1);\n      var forceMoveMarkers = true;\n\n      if (key.startsWith('\\'')) {\n        _char = key[1];\n      } else if (_char === 'Enter') {\n        _char = '\\n';\n      } else if (_char === 'Backspace') {\n        var lastItem = this.replaceStack.pop();\n\n        if (!lastItem) {\n          return;\n        }\n\n        fromReplace = true;\n        _char = lastItem;\n        range = new _monacoEditor.Range(pos.lineNumber, pos.column, pos.lineNumber, pos.column - 1);\n      } else {\n        return;\n      }\n\n      e.preventDefault();\n      e.stopPropagation();\n\n      if (!this.replaceStack) {\n        this.replaceStack = [];\n      }\n\n      if (!fromReplace) {\n        this.replaceStack.push(this.editor.getModel().getValueInRange(range));\n      }\n\n      this.editor.executeEdits('vim', [{\n        text: _char,\n        range: range,\n        forceMoveMarkers: forceMoveMarkers\n      }]);\n\n      if (fromReplace) {\n        this.editor.setPosition(range.getStartPosition());\n      }\n    }\n  }, {\n    key: \"setOption\",\n    value: function setOption(key, value) {\n      this.state[key] = value;\n\n      if (key === 'theme') {\n        _monacoEditor.editor.setTheme(value);\n      }\n    }\n  }, {\n    key: \"getConfiguration\",\n    value: function getConfiguration() {\n      var editor = this.editor;\n      var opts = EditorOptConstants;\n\n      if (typeof editor.getConfiguration === 'function') {\n        return editor.getConfiguration();\n      } else if ('EditorOption' in _monacoEditor.editor) {\n        // for monaco 0.19.3 onwards\n        opts = _monacoEditor.editor.EditorOption;\n      }\n\n      return {\n        readOnly: editor.getOption(opts.readOnly),\n        viewInfo: {\n          cursorWidth: editor.getOption(opts.cursorWidth)\n        },\n        fontInfo: editor.getOption(opts.fontInfo)\n      };\n    }\n  }, {\n    key: \"getOption\",\n    value: function getOption(key) {\n      if (key === 'readOnly') {\n        return this.getConfiguration().readOnly;\n      } else if (key === 'firstLineNumber') {\n        return this.firstLine() + 1;\n      } else if (key === 'indentWithTabs') {\n        return !this.editor.getModel().getOptions().insertSpaces;\n      } else {\n        if (typeof this.editor.getConfiguration === 'function') {\n          return this.editor.getRawConfiguration()[key];\n        }\n\n        return this.editor.getRawOptions()[key];\n      }\n\n      return this.state[key];\n    }\n  }, {\n    key: \"dispatch\",\n    value: function dispatch(signal) {\n      for (var _len = arguments.length, args = new Array(_len > 1 ? _len - 1 : 0), _key = 1; _key < _len; _key++) {\n        args[_key - 1] = arguments[_key];\n      }\n\n      var listeners = this.listeners[signal];\n\n      if (!listeners) {\n        return;\n      }\n\n      listeners.forEach(function (handler) {\n        return handler.apply(void 0, args);\n      });\n    }\n  }, {\n    key: \"on\",\n    value: function on(event, handler) {\n      if (!this.listeners[event]) {\n        this.listeners[event] = [];\n      }\n\n      this.listeners[event].push(handler);\n    }\n  }, {\n    key: \"off\",\n    value: function off(event, handler) {\n      var listeners = this.listeners[event];\n\n      if (!listeners) {\n        return;\n      }\n\n      this.listeners[event] = listeners.filter(function (l) {\n        return l !== handler;\n      });\n    }\n  }, {\n    key: \"firstLine\",\n    value: function firstLine() {\n      return 0;\n    }\n  }, {\n    key: \"lastLine\",\n    value: function lastLine() {\n      return this.lineCount() - 1;\n    }\n  }, {\n    key: \"lineCount\",\n    value: function lineCount() {\n      return this.editor.getModel().getLineCount();\n    }\n  }, {\n    key: \"defaultTextHeight\",\n    value: function defaultTextHeight() {\n      return 1;\n    }\n  }, {\n    key: \"getLine\",\n    value: function getLine(line) {\n      if (line < 0) {\n        return '';\n      }\n\n      var model = this.editor.getModel();\n      var maxLines = model.getLineCount();\n\n      if (line + 1 > maxLines) {\n        line = maxLines - 1;\n      }\n\n      return this.editor.getModel().getLineContent(line + 1);\n    }\n  }, {\n    key: \"getAnchorForSelection\",\n    value: function getAnchorForSelection(selection) {\n      if (selection.isEmpty()) {\n        return selection.getPosition();\n      }\n\n      var selDir = selection.getDirection();\n      return selDir === _monacoEditor.SelectionDirection.LTR ? selection.getStartPosition() : selection.getEndPosition();\n    }\n  }, {\n    key: \"getHeadForSelection\",\n    value: function getHeadForSelection(selection) {\n      if (selection.isEmpty()) {\n        return selection.getPosition();\n      }\n\n      var selDir = selection.getDirection();\n      return selDir === _monacoEditor.SelectionDirection.LTR ? selection.getEndPosition() : selection.getStartPosition();\n    }\n  }, {\n    key: \"getCursor\",\n    value: function getCursor() {\n      var type = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : null;\n\n      if (!type) {\n        return toCmPos(this.editor.getPosition());\n      }\n\n      var sel = this.editor.getSelection();\n      var pos;\n\n      if (sel.isEmpty()) {\n        pos = sel.getPosition();\n      } else if (type === 'anchor') {\n        pos = this.getAnchorForSelection(sel);\n      } else {\n        pos = this.getHeadForSelection(sel);\n      }\n\n      return toCmPos(pos);\n    }\n  }, {\n    key: \"getRange\",\n    value: function getRange(start, end) {\n      var p1 = toMonacoPos(start);\n      var p2 = toMonacoPos(end);\n      return this.editor.getModel().getValueInRange(_monacoEditor.Range.fromPositions(p1, p2));\n    }\n  }, {\n    key: \"getSelection\",\n    value: function getSelection() {\n      return this.editor.getModel().getValueInRange(this.editor.getSelection());\n    }\n  }, {\n    key: \"replaceRange\",\n    value: function replaceRange(text, start, end) {\n      var p1 = toMonacoPos(start);\n      var p2 = !end ? p1 : toMonacoPos(end);\n      this.editor.executeEdits('vim', [{\n        text: text,\n        range: _monacoEditor.Range.fromPositions(p1, p2)\n      }]); // @TODO - Check if this breaks any other expectation\n\n      this.pushUndoStop();\n    }\n  }, {\n    key: \"pushUndoStop\",\n    value: function pushUndoStop() {\n      this.editor.pushUndoStop();\n    }\n  }, {\n    key: \"setCursor\",\n    value: function setCursor(line, ch) {\n      var pos = line;\n\n      if (_typeof(line) !== 'object') {\n        pos = {};\n        pos.line = line;\n        pos.ch = ch;\n      }\n\n      var monacoPos = this.editor.getModel().validatePosition(toMonacoPos(pos));\n      this.editor.setPosition(toMonacoPos(pos));\n      this.editor.revealPosition(monacoPos);\n    }\n  }, {\n    key: \"somethingSelected\",\n    value: function somethingSelected() {\n      return !this.editor.getSelection().isEmpty();\n    }\n  }, {\n    key: \"operation\",\n    value: function operation(fn, force) {\n      return fn();\n    }\n  }, {\n    key: \"listSelections\",\n    value: function listSelections() {\n      var _this = this;\n\n      var selections = this.editor.getSelections();\n\n      if (!selections.length || this.inVirtualSelectionMode) {\n        return [{\n          anchor: this.getCursor('anchor'),\n          head: this.getCursor('head')\n        }];\n      }\n\n      return selections.map(function (sel) {\n        var pos = sel.getPosition();\n        var start = sel.getStartPosition();\n        var end = sel.getEndPosition();\n        return {\n          anchor: _this.clipPos(toCmPos(_this.getAnchorForSelection(sel))),\n          head: _this.clipPos(toCmPos(_this.getHeadForSelection(sel)))\n        };\n      });\n    }\n  }, {\n    key: \"focus\",\n    value: function focus() {\n      this.editor.focus();\n    }\n  }, {\n    key: \"setSelections\",\n    value: function setSelections(selections, primIndex) {\n      var hasSel = !!this.editor.getSelections().length;\n      var sels = selections.map(function (sel, index) {\n        var anchor = sel.anchor,\n            head = sel.head;\n\n        if (hasSel) {\n          return _monacoEditor.Selection.fromPositions(toMonacoPos(anchor), toMonacoPos(head));\n        } else {\n          return _monacoEditor.Selection.fromPositions(toMonacoPos(head), toMonacoPos(anchor));\n        }\n      });\n\n      if (!primIndex) {\n        sels.reverse();\n      } else if (sels[primIndex]) {\n        sels.push(sels.splice(primIndex, 1)[0]);\n      }\n\n      if (!sels.length) {\n        return;\n      }\n\n      var sel = sels[0];\n      var posToReveal;\n\n      if (sel.getDirection() === _monacoEditor.SelectionDirection.LTR) {\n        posToReveal = sel.getEndPosition();\n      } else {\n        posToReveal = sel.getStartPosition();\n      }\n\n      this.editor.setSelections(sels);\n      this.editor.revealPosition(posToReveal);\n    }\n  }, {\n    key: \"setSelection\",\n    value: function setSelection(frm, to) {\n      var range = _monacoEditor.Range.fromPositions(toMonacoPos(frm), toMonacoPos(to));\n\n      this.editor.setSelection(range);\n    }\n  }, {\n    key: \"getSelections\",\n    value: function getSelections() {\n      var editor = this.editor;\n      return editor.getSelections().map(function (sel) {\n        return editor.getModel().getValueInRange(sel);\n      });\n    }\n  }, {\n    key: \"replaceSelections\",\n    value: function replaceSelections(texts) {\n      var editor = this.editor;\n      editor.getSelections().forEach(function (sel, index) {\n        editor.executeEdits('vim', [{\n          range: sel,\n          text: texts[index],\n          forceMoveMarkers: false\n        }]);\n      });\n    }\n  }, {\n    key: \"toggleOverwrite\",\n    value: function toggleOverwrite(toggle) {\n      if (toggle) {\n        this.enterVimMode();\n        this.replaceMode = true;\n      } else {\n        this.leaveVimMode();\n        this.replaceMode = false;\n        this.replaceStack = [];\n      }\n    }\n  }, {\n    key: \"charCoords\",\n    value: function charCoords(pos, mode) {\n      return {\n        top: pos.line,\n        left: pos.ch\n      };\n    }\n  }, {\n    key: \"coordsChar\",\n    value: function coordsChar(pos, mode) {\n      if (mode === 'local') {}\n    }\n  }, {\n    key: \"clipPos\",\n    value: function clipPos(p) {\n      var pos = this.editor.getModel().validatePosition(toMonacoPos(p));\n      return toCmPos(pos);\n    }\n  }, {\n    key: \"setBookmark\",\n    value: function setBookmark(cursor, options) {\n      var bm = new Marker(this, this.$uid++, cursor.line, cursor.ch);\n\n      if (!options || !options.insertLeft) {\n        bm.$insertRight = true;\n      }\n\n      this.marks[bm.id] = bm;\n      return bm;\n    }\n  }, {\n    key: \"getScrollInfo\",\n    value: function getScrollInfo() {\n      var editor = this.editor;\n\n      var _editor$getVisibleRan = editor.getVisibleRanges(),\n          _editor$getVisibleRan2 = _slicedToArray(_editor$getVisibleRan, 1),\n          range = _editor$getVisibleRan2[0];\n\n      return {\n        left: 0,\n        top: range.startLineNumber - 1,\n        height: editor.getModel().getLineCount(),\n        clientHeight: range.endLineNumber - range.startLineNumber + 1\n      };\n    }\n  }, {\n    key: \"triggerEditorAction\",\n    value: function triggerEditorAction(action) {\n      this.editor.trigger('vim', action);\n    }\n  }, {\n    key: \"dispose\",\n    value: function dispose() {\n      this.dispatch('dispose');\n      this.removeOverlay();\n\n      if (CMAdapter.keyMap.vim) {\n        CMAdapter.keyMap.vim.detach(this);\n      }\n\n      this.disposables.forEach(function (d) {\n        return d.dispose();\n      });\n    }\n  }, {\n    key: \"getInputField\",\n    value: function getInputField() {}\n  }, {\n    key: \"getWrapperElement\",\n    value: function getWrapperElement() {}\n  }, {\n    key: \"enterVimMode\",\n    value: function enterVimMode() {\n      var toVim = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : true;\n      this.ctxInsert.set(false);\n      var config = this.getConfiguration();\n      this.initialCursorWidth = config.viewInfo.cursorWidth || 0;\n      this.editor.updateOptions({\n        cursorWidth: config.fontInfo.typicalFullwidthCharacterWidth,\n        cursorBlinking: 'solid'\n      });\n    }\n  }, {\n    key: \"leaveVimMode\",\n    value: function leaveVimMode() {\n      this.ctxInsert.set(true);\n      this.editor.updateOptions({\n        cursorWidth: this.initialCursorWidth || 0,\n        cursorBlinking: 'blink'\n      });\n    }\n  }, {\n    key: \"virtualSelectionMode\",\n    value: function virtualSelectionMode() {\n      return this.inVirtualSelectionMode;\n    }\n  }, {\n    key: \"markText\",\n    value: function markText() {\n      // only used for fat-cursor, not needed\n      return {\n        clear: function clear() {},\n        find: function find() {}\n      };\n    }\n  }, {\n    key: \"getUserVisibleLines\",\n    value: function getUserVisibleLines() {\n      var ranges = this.editor.getVisibleRanges();\n\n      if (!ranges.length) {\n        return {\n          top: 0,\n          bottom: 0\n        };\n      }\n\n      var res = {\n        top: Infinity,\n        bottom: 0\n      };\n      ranges.reduce(function (acc, range) {\n        if (range.startLineNumber < acc.top) {\n          acc.top = range.startLineNumber;\n        }\n\n        if (range.endLineNumber > acc.bottom) {\n          acc.bottom = range.endLineNumber;\n        }\n\n        return acc;\n      }, res);\n      res.top -= 1;\n      res.bottom -= 1;\n      return res;\n    }\n  }, {\n    key: \"findPosV\",\n    value: function findPosV(startPos, amount, unit) {\n      var editor = this.editor;\n      var finalAmount = amount;\n      var finalUnit = unit;\n      var pos = toMonacoPos(startPos);\n\n      if (unit === 'page') {\n        var editorHeight = editor.getLayoutInfo().height;\n        var lineHeight = this.getConfiguration().fontInfo.lineHeight;\n        finalAmount = finalAmount * Math.floor(editorHeight / lineHeight);\n        finalUnit = 'line';\n      }\n\n      if (unit === 'line') {\n        pos.lineNumber += finalAmount;\n      }\n\n      return toCmPos(pos);\n    }\n  }, {\n    key: \"findMatchingBracket\",\n    value: function findMatchingBracket(pos) {\n      var mPos = toMonacoPos(pos);\n      var res = this.editor.getModel().matchBracket(mPos);\n\n      if (!res || !(res.length === 2)) {\n        return {\n          to: null\n        };\n      }\n\n      return {\n        to: toCmPos(res[1].getStartPosition())\n      };\n    }\n  }, {\n    key: \"findFirstNonWhiteSpaceCharacter\",\n    value: function findFirstNonWhiteSpaceCharacter(line) {\n      return this.editor.getModel().getLineFirstNonWhitespaceColumn(line + 1) - 1;\n    }\n  }, {\n    key: \"scrollTo\",\n    value: function scrollTo(x, y) {\n      if (!x && !y) {\n        return;\n      }\n\n      if (!x) {\n        if (y < 0) {\n          y = this.editor.getPosition().lineNumber - y;\n        }\n\n        this.editor.setScrollTop(this.editor.getTopForLineNumber(y + 1));\n      }\n    }\n  }, {\n    key: \"moveCurrentLineTo\",\n    value: function moveCurrentLineTo(viewPosition) {\n      var editor = this.editor;\n      var pos = editor.getPosition();\n\n      var range = _monacoEditor.Range.fromPositions(pos, pos);\n\n      switch (viewPosition) {\n        case 'top':\n          editor.revealRangeAtTop(range);\n          return;\n\n        case 'center':\n          editor.revealRangeInCenter(range);\n          return;\n\n        case 'bottom':\n          // private api. no other way\n          editor._revealRange(range, VerticalRevealType.Bottom);\n\n          return;\n      }\n    }\n  }, {\n    key: \"getSearchCursor\",\n    value: function getSearchCursor(query, pos, caseFold) {\n      var matchCase = false;\n      var isRegex = false;\n\n      if (query instanceof RegExp && !query.global) {\n        matchCase = !query.ignoreCase;\n        query = query.source;\n        isRegex = true;\n      }\n\n      if (pos.ch == undefined) pos.ch = Number.MAX_VALUE;\n      var monacoPos = toMonacoPos(pos);\n      var context = this;\n      var editor = this.editor;\n      var lastSearch = null;\n      var model = editor.getModel();\n      var matches = model.findMatches(query, false, isRegex, matchCase) || [];\n      return {\n        getMatches: function getMatches() {\n          return matches;\n        },\n        findNext: function findNext() {\n          return this.find(false);\n        },\n        findPrevious: function findPrevious() {\n          return this.find(true);\n        },\n        jumpTo: function jumpTo(index) {\n          if (!matches || !matches.length) {\n            return false;\n          }\n\n          var match = matches[index];\n          lastSearch = match.range;\n          context.highlightRanges([lastSearch], 'currentFindMatch');\n          context.highlightRanges(matches.map(function (m) {\n            return m.range;\n          }).filter(function (r) {\n            return !r.equalsRange(lastSearch);\n          }));\n          return lastSearch;\n        },\n        find: function find(back) {\n          if (!matches || !matches.length) {\n            return false;\n          }\n\n          var match;\n\n          if (back) {\n            var _pos = lastSearch ? lastSearch.getStartPosition() : monacoPos;\n\n            match = model.findPreviousMatch(query, _pos, isRegex, matchCase);\n\n            if (!match || !match.range.getStartPosition().isBeforeOrEqual(_pos)) {\n              return false;\n            }\n          } else {\n            var _pos2 = lastSearch ? lastSearch.getEndPosition() : monacoPos;\n\n            match = model.findNextMatch(query, _pos2, isRegex, matchCase);\n\n            if (!match || !_pos2.isBeforeOrEqual(match.range.getStartPosition())) {\n              return false;\n            }\n          }\n\n          lastSearch = match.range;\n          context.highlightRanges([lastSearch], 'currentFindMatch');\n          context.highlightRanges(matches.map(function (m) {\n            return m.range;\n          }).filter(function (r) {\n            return !r.equalsRange(lastSearch);\n          }));\n          return lastSearch;\n        },\n        from: function from() {\n          return lastSearch && toCmPos(lastSearch.getStartPosition());\n        },\n        to: function to() {\n          return lastSearch && toCmPos(lastSearch.getEndPosition());\n        },\n        replace: function replace(text) {\n          if (lastSearch) {\n            editor.executeEdits('vim', [{\n              range: lastSearch,\n              text: text,\n              forceMoveMarkers: true\n            }]);\n            lastSearch.setEndPosition(editor.getPosition());\n            editor.setPosition(lastSearch.getStartPosition());\n          }\n        }\n      };\n    }\n  }, {\n    key: \"highlightRanges\",\n    value: function highlightRanges(ranges) {\n      var className = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 'findMatch';\n      var decorationKey = \"decoration\".concat(className);\n      this[decorationKey] = this.editor.deltaDecorations(this[decorationKey] || [], ranges.map(function (range) {\n        return {\n          range: range,\n          options: {\n            stickiness: _monacoEditor.editor.TrackedRangeStickiness.NeverGrowsWhenTypingAtEdges,\n            zIndex: 13,\n            className: className,\n            showIfCollapsed: true\n          }\n        };\n      }));\n      return this[decorationKey];\n    }\n  }, {\n    key: \"addOverlay\",\n    value: function addOverlay(_ref, hasBoundary, style) {\n      var query = _ref.query;\n      var matchCase = false;\n      var isRegex = false;\n\n      if (query && query instanceof RegExp && !query.global) {\n        isRegex = true;\n        matchCase = !query.ignoreCase;\n        query = query.source;\n      }\n\n      var match = this.editor.getModel().findNextMatch(query, this.editor.getPosition(), isRegex, matchCase);\n\n      if (!match || !match.range) {\n        return;\n      }\n\n      this.highlightRanges([match.range]);\n    }\n  }, {\n    key: \"removeOverlay\",\n    value: function removeOverlay() {\n      var _this2 = this;\n\n      ['currentFindMatch', 'findMatch'].forEach(function (key) {\n        _this2.editor.deltaDecorations(_this2[\"decoration\".concat(key)] || [], []);\n      });\n    }\n  }, {\n    key: \"scrollIntoView\",\n    value: function scrollIntoView(pos) {\n      if (!pos) {\n        return;\n      }\n\n      this.editor.revealPosition(toMonacoPos(pos));\n    }\n  }, {\n    key: \"moveH\",\n    value: function moveH(units, type) {\n      if (type !== 'char') {\n        return;\n      }\n\n      var pos = this.editor.getPosition();\n      this.editor.setPosition(new _monacoEditor.Position(pos.lineNumber, pos.column + units));\n    }\n    /**\n     * Uses internal apis which not sure why is internal\n     */\n\n  }, {\n    key: \"scanForBracket\",\n    value: function scanForBracket(pos, dir, dd, config) {\n      var mPos = toMonacoPos(pos);\n      var model = this.editor.getModel();\n      var range = model.matchBracket(mPos);\n\n      if (!range || range.length !== 2) {\n        var bracket = '{([';\n\n        for (var i = 0; i < bracket.length; i++) {\n          var bracketRange = model.findMatchingBracketUp(bracket[i], mPos);\n\n          if (bracketRange) {\n            range = model.matchBracket(bracketRange.getEndPosition());\n            break;\n          }\n        }\n      }\n\n      if (!range || range.length !== 2) {\n        return null;\n      }\n\n      var res;\n\n      if (dir === -1) {\n        res = range[1].getStartPosition();\n      } else {\n        res = range[0].getStartPosition();\n      }\n\n      return {\n        pos: toCmPos(res),\n        ch: model.getValueInRange(dir === -1 ? range[0] : range[1])\n      };\n    }\n  }, {\n    key: \"indexFromPos\",\n    value: function indexFromPos(pos) {\n      return this.editor.getModel().getOffsetAt(toMonacoPos(pos));\n    }\n  }, {\n    key: \"posFromIndex\",\n    value: function posFromIndex(offset) {\n      return toCmPos(this.editor.getModel().getPositionAt(offset));\n    }\n  }, {\n    key: \"indentLine\",\n    value: function indentLine(line) {\n      var indentRight = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : true;\n      var editor = this.editor;\n\n      var cursors = editor._getCursors();\n\n      var pos = new _monacoEditor.Position(line + 1, 1);\n\n      var sel = _monacoEditor.Selection.fromPositions(pos, pos); // no other way than to use internal apis to preserve the undoStack for a batch of indents\n\n\n      editor.executeCommands(\"editor.action.\".concat(indentRight ? 'indent' : 'outdent', \"Lines\"), _cursorTypeOperations.TypeOperations[indentRight ? 'indent' : 'outdent'](cursors.context.config, this.editor.getModel(), [sel]));\n    }\n  }, {\n    key: \"setStatusBar\",\n    value: function setStatusBar(statusBar) {\n      this.statusBar = statusBar;\n    }\n  }, {\n    key: \"openDialog\",\n    value: function openDialog(html, callback, options) {\n      if (!this.statusBar) {\n        return;\n      }\n\n      return this.statusBar.setSec(html, callback, options);\n    }\n  }, {\n    key: \"openNotification\",\n    value: function openNotification(html) {\n      if (!this.statusBar) {\n        return;\n      }\n\n      this.statusBar.showNotification(html);\n    }\n  }]);\n\n  return CMAdapter;\n}();\n\nCMAdapter.Pos = Pos;\nCMAdapter.signal = signal;\nCMAdapter.on = dummy('on');\nCMAdapter.off = dummy('off');\nCMAdapter.addClass = dummy('addClass');\nCMAdapter.rmClass = dummy('rmClass');\nCMAdapter.defineOption = dummy('defineOption');\nCMAdapter.keyMap = {\n  'default': function _default(key) {\n    return function (cm) {\n      return true;\n    };\n  }\n};\nCMAdapter.isWordChar = isWordCharBasic;\nCMAdapter.keyName = monacoToCmKey;\nCMAdapter.StringStream = StringStream;\n\nCMAdapter.e_stop = function (e) {\n  if (e.stopPropagation) {\n    e.stopPropagation();\n  } else {\n    e.cancelBubble = true;\n  }\n\n  CMAdapter.e_preventDefault(e);\n  return false;\n};\n\nCMAdapter.e_preventDefault = function (e) {\n  if (e.preventDefault) {\n    e.preventDefault();\n\n    if (e.browserEvent) {\n      e.browserEvent.preventDefault();\n    }\n  } else {\n    e.returnValue = false;\n  }\n\n  return false;\n};\n\nCMAdapter.commands = {\n  redo: function redo(cm) {\n    cm.triggerEditorAction('redo');\n  },\n  undo: function undo(cm) {\n    cm.triggerEditorAction('undo');\n  },\n  newlineAndIndent: function newlineAndIndent(cm) {\n    cm.triggerEditorAction('editor.action.insertLineAfter');\n  }\n};\n\nCMAdapter.lookupKey = function lookupKey(key, map, handle) {\n  if (typeof map === 'string') {\n    map = CMAdapter.keyMap[map];\n  }\n\n  var found = typeof map == \"function\" ? map(key) : map[key];\n  if (found === false) return \"nothing\";\n  if (found === \"...\") return \"multi\";\n  if (found != null && handle(found)) return \"handled\";\n\n  if (map.fallthrough) {\n    if (!Array.isArray(map.fallthrough)) return lookupKey(key, map.fallthrough, handle);\n\n    for (var i = 0; i < map.fallthrough.length; i++) {\n      var result = lookupKey(key, map.fallthrough[i], handle);\n      if (result) return result;\n    }\n  }\n};\n\nCMAdapter.defineExtension = function (name, fn) {\n  CMAdapter.prototype[name] = fn;\n};\n\nvar _initialiseProps = function _initialiseProps() {\n  var _this3 = this;\n\n  this.handleKeyDown = function (e) {\n    // Allow previously registered keydown listeners to handle the event and\n    // prevent this extension from also handling it.\n    if (e.browserEvent.defaultPrevented & e.keyCode !== _monacoEditor.KeyCode.Escape) {\n      return;\n    }\n\n    if (!_this3.attached) {\n      return;\n    }\n\n    var key = monacoToCmKey(e);\n\n    if (_this3.replaceMode) {\n      _this3.handleReplaceMode(key, e);\n    }\n\n    if (!key) {\n      return;\n    }\n\n    if (CMAdapter.keyMap.vim && CMAdapter.keyMap.vim.call) {\n      var cmd = CMAdapter.keyMap.vim.call(key, _this3);\n\n      if (cmd) {\n        e.preventDefault();\n        e.stopPropagation();\n\n        try {\n          cmd();\n        } catch (err) {\n          console.error(err);\n        }\n      }\n    }\n  };\n\n  this.handleCursorChange = function (e) {\n    var position = e.position,\n        source = e.source;\n    var editor = _this3.editor;\n    var selection = editor.getSelection();\n\n    if (!_this3.ctxInsert.get() && e.source === 'mouse' && selection.isEmpty()) {\n      var maxCol = editor.getModel().getLineMaxColumn(position.lineNumber);\n\n      if (e.position.column === maxCol) {\n        editor.setPosition(new _monacoEditor.Position(e.position.lineNumber, maxCol - 1));\n        return;\n      }\n    }\n\n    _this3.dispatch('cursorActivity', _this3, e);\n  };\n\n  this.handleChange = function (e) {\n    var changes = e.changes;\n    var change = {\n      text: changes.reduce(function (acc, change) {\n        acc.push(change.text);\n        return acc;\n      }, []),\n      origin: '+input'\n    };\n    var curOp = _this3.curOp = _this3.curOp || {};\n\n    if (!curOp.changeHandlers) {\n      curOp.changeHandlers = _this3.listeners['change'] && _this3.listeners['change'].slice();\n    }\n\n    if (_this3.virtualSelectionMode()) {\n      return;\n    }\n\n    if (!curOp.lastChange) {\n      curOp.lastChange = curOp.change = change;\n    } else {\n      curOp.lastChange.next = curOp.lastChange = change;\n    }\n\n    _this3.dispatch('change', _this3, change);\n  };\n};\n\nvar _default2 = CMAdapter;\nexports[\"default\"] = _default2;","self[\"MonacoEnvironment\"] = (function (paths) {\n      function stripTrailingSlash(str) {\n        return str.replace(/\\/$/, '');\n      }\n      return {\n        getWorkerUrl: function (moduleId, label) {\n          var pathPrefix = typeof __webpack_public_path__ === 'string' ? __webpack_public_path__ : \"/dist/\";\n          var result = (pathPrefix ? stripTrailingSlash(pathPrefix) + '/' : '') + paths[label];\n          if (/^(http:)|(https:)|(file:)/.test(result)) {\n            var currentUrl = String(window.location);\n            var currentOrigin = currentUrl.substr(0, currentUrl.length - window.location.hash.length - window.location.search.length - window.location.pathname.length);\n            if (result.substring(0, currentOrigin.length) !== currentOrigin) {\n              var js = '/*' + label + '*/importScripts(\"' + result + '\");';\n              return 'data:text/javascript;charset=utf-8,' + encodeURIComponent(js);\n            }\n          }\n          return result;\n        }\n      };\n    })({\n  \"editorWorkerService\": \"editor.worker.js\",\n  \"typescript\": \"ts.worker.js\",\n  \"javascript\": \"ts.worker.js\"\n});\nrequire(\"./standalone/browser/accessibilityHelp/accessibilityHelp.js\");\nrequire(\"./contrib/bracketMatching/bracketMatching.js\");\nrequire(\"./contrib/caretOperations/caretOperations.js\");\nrequire(\"./contrib/clipboard/clipboard.js\");\nrequire(\"./contrib/codeAction/codeActionContributions.js\");\nrequire(\"./contrib/codelens/codelensController.js\");\nrequire(\"./contrib/colorPicker/colorDetector.js\");\nrequire(\"./contrib/comment/comment.js\");\nrequire(\"./contrib/contextmenu/contextmenu.js\");\nrequire(\"./browser/controller/coreCommands.js\");\nrequire(\"./contrib/cursorUndo/cursorUndo.js\");\nrequire(\"./contrib/dnd/dnd.js\");\nrequire(\"./contrib/find/findController.js\");\nrequire(\"./contrib/folding/folding.js\");\nrequire(\"./contrib/fontZoom/fontZoom.js\");\nrequire(\"./contrib/format/formatActions.js\");\nrequire(\"./contrib/gotoError/gotoError.js\");\nrequire(\"./standalone/browser/quickOpen/gotoLine.js\");\nrequire(\"./contrib/gotoSymbol/goToCommands.js\");\nrequire(\"./contrib/gotoSymbol/link/goToDefinitionAtPosition.js\");\nrequire(\"./contrib/hover/hover.js\");\nrequire(\"./standalone/browser/iPadShowKeyboard/iPadShowKeyboard.js\");\nrequire(\"./contrib/inPlaceReplace/inPlaceReplace.js\");\nrequire(\"./standalone/browser/inspectTokens/inspectTokens.js\");\nrequire(\"./contrib/linesOperations/linesOperations.js\");\nrequire(\"./contrib/links/links.js\");\nrequire(\"./contrib/multicursor/multicursor.js\");\nrequire(\"./contrib/parameterHints/parameterHints.js\");\nrequire(\"./standalone/browser/quickOpen/quickCommand.js\");\nrequire(\"./standalone/browser/quickOpen/quickOutline.js\");\nrequire(\"./standalone/browser/referenceSearch/standaloneReferenceSearch.js\");\nrequire(\"./contrib/rename/rename.js\");\nrequire(\"./contrib/smartSelect/smartSelect.js\");\nrequire(\"./contrib/snippet/snippetController2.js\");\nrequire(\"./contrib/suggest/suggestController.js\");\nrequire(\"./standalone/browser/toggleHighContrast/toggleHighContrast.js\");\nrequire(\"./contrib/toggleTabFocusMode/toggleTabFocusMode.js\");\nrequire(\"./contrib/caretOperations/transpose.js\");\nrequire(\"./contrib/wordHighlighter/wordHighlighter.js\");\nrequire(\"./contrib/wordOperations/wordOperations.js\");\nrequire(\"./contrib/wordPartOperations/wordPartOperations.js\");\nmodule.exports = require(\"!!./editor.main.js\");\nrequire(\"../basic-languages/typescript/typescript.contribution.js\");\nrequire(\"../language/typescript/monaco.contribution.js\");\nrequire(\"../basic-languages/javascript/javascript.contribution.js\");","import '../language/typescript/monaco.contribution';\nimport '../language/css/monaco.contribution';\nimport '../language/json/monaco.contribution';\nimport '../language/html/monaco.contribution';\nimport '../basic-languages/monaco.contribution';\n\nexport * from './edcore.main';","import '../../editor/editor.api.js';\n/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\r\n'use strict';\r\nvar Emitter = monaco.Emitter;\r\n// --- CSS configuration and defaults ---------\r\nvar LanguageServiceDefaultsImpl = /** @class */ (function () {\r\n    function LanguageServiceDefaultsImpl(languageId, diagnosticsOptions, modeConfiguration) {\r\n        this._onDidChange = new Emitter();\r\n        this._languageId = languageId;\r\n        this.setDiagnosticsOptions(diagnosticsOptions);\r\n        this.setModeConfiguration(modeConfiguration);\r\n    }\r\n    Object.defineProperty(LanguageServiceDefaultsImpl.prototype, \"onDidChange\", {\r\n        get: function () {\r\n            return this._onDidChange.event;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(LanguageServiceDefaultsImpl.prototype, \"languageId\", {\r\n        get: function () {\r\n            return this._languageId;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(LanguageServiceDefaultsImpl.prototype, \"modeConfiguration\", {\r\n        get: function () {\r\n            return this._modeConfiguration;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(LanguageServiceDefaultsImpl.prototype, \"diagnosticsOptions\", {\r\n        get: function () {\r\n            return this._diagnosticsOptions;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    LanguageServiceDefaultsImpl.prototype.setDiagnosticsOptions = function (options) {\r\n        this._diagnosticsOptions = options || Object.create(null);\r\n        this._onDidChange.fire(this);\r\n    };\r\n    LanguageServiceDefaultsImpl.prototype.setModeConfiguration = function (modeConfiguration) {\r\n        this._modeConfiguration = modeConfiguration || Object.create(null);\r\n        this._onDidChange.fire(this);\r\n    };\r\n    ;\r\n    return LanguageServiceDefaultsImpl;\r\n}());\r\nexport { LanguageServiceDefaultsImpl };\r\nvar diagnosticDefault = {\r\n    validate: true,\r\n    lint: {\r\n        compatibleVendorPrefixes: 'ignore',\r\n        vendorPrefix: 'warning',\r\n        duplicateProperties: 'warning',\r\n        emptyRules: 'warning',\r\n        importStatement: 'ignore',\r\n        boxModel: 'ignore',\r\n        universalSelector: 'ignore',\r\n        zeroUnits: 'ignore',\r\n        fontFaceProperties: 'warning',\r\n        hexColorLength: 'error',\r\n        argumentsInColorFunction: 'error',\r\n        unknownProperties: 'warning',\r\n        ieHack: 'ignore',\r\n        unknownVendorSpecificProperties: 'ignore',\r\n        propertyIgnoredDueToDisplay: 'warning',\r\n        important: 'ignore',\r\n        float: 'ignore',\r\n        idSelector: 'ignore'\r\n    }\r\n};\r\nvar modeConfigurationDefault = {\r\n    completionItems: true,\r\n    hovers: true,\r\n    documentSymbols: true,\r\n    definitions: true,\r\n    references: true,\r\n    documentHighlights: true,\r\n    rename: true,\r\n    colors: true,\r\n    foldingRanges: true,\r\n    diagnostics: true,\r\n    selectionRanges: true\r\n};\r\nvar cssDefaults = new LanguageServiceDefaultsImpl('css', diagnosticDefault, modeConfigurationDefault);\r\nvar scssDefaults = new LanguageServiceDefaultsImpl('scss', diagnosticDefault, modeConfigurationDefault);\r\nvar lessDefaults = new LanguageServiceDefaultsImpl('less', diagnosticDefault, modeConfigurationDefault);\r\n// Export API\r\nfunction createAPI() {\r\n    return {\r\n        cssDefaults: cssDefaults,\r\n        lessDefaults: lessDefaults,\r\n        scssDefaults: scssDefaults\r\n    };\r\n}\r\nmonaco.languages.css = createAPI();\r\n// --- Registration to monaco editor ---\r\nfunction getMode() {\r\n    return import('./cssMode.js');\r\n}\r\nmonaco.languages.onLanguage('less', function () {\r\n    getMode().then(function (mode) { return mode.setupMode(lessDefaults); });\r\n});\r\nmonaco.languages.onLanguage('scss', function () {\r\n    getMode().then(function (mode) { return mode.setupMode(scssDefaults); });\r\n});\r\nmonaco.languages.onLanguage('css', function () {\r\n    getMode().then(function (mode) { return mode.setupMode(cssDefaults); });\r\n});\r\n","import '../../editor/editor.api.js';\n/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\r\n'use strict';\r\nvar Emitter = monaco.Emitter;\r\n// --- JSON configuration and defaults ---------\r\nvar LanguageServiceDefaultsImpl = /** @class */ (function () {\r\n    function LanguageServiceDefaultsImpl(languageId, diagnosticsOptions, modeConfiguration) {\r\n        this._onDidChange = new Emitter();\r\n        this._languageId = languageId;\r\n        this.setDiagnosticsOptions(diagnosticsOptions);\r\n        this.setModeConfiguration(modeConfiguration);\r\n    }\r\n    Object.defineProperty(LanguageServiceDefaultsImpl.prototype, \"onDidChange\", {\r\n        get: function () {\r\n            return this._onDidChange.event;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(LanguageServiceDefaultsImpl.prototype, \"languageId\", {\r\n        get: function () {\r\n            return this._languageId;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(LanguageServiceDefaultsImpl.prototype, \"modeConfiguration\", {\r\n        get: function () {\r\n            return this._modeConfiguration;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(LanguageServiceDefaultsImpl.prototype, \"diagnosticsOptions\", {\r\n        get: function () {\r\n            return this._diagnosticsOptions;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    LanguageServiceDefaultsImpl.prototype.setDiagnosticsOptions = function (options) {\r\n        this._diagnosticsOptions = options || Object.create(null);\r\n        this._onDidChange.fire(this);\r\n    };\r\n    LanguageServiceDefaultsImpl.prototype.setModeConfiguration = function (modeConfiguration) {\r\n        this._modeConfiguration = modeConfiguration || Object.create(null);\r\n        this._onDidChange.fire(this);\r\n    };\r\n    ;\r\n    return LanguageServiceDefaultsImpl;\r\n}());\r\nexport { LanguageServiceDefaultsImpl };\r\nvar diagnosticDefault = {\r\n    validate: true,\r\n    allowComments: true,\r\n    schemas: [],\r\n    enableSchemaRequest: false\r\n};\r\nvar modeConfigurationDefault = {\r\n    documentFormattingEdits: true,\r\n    documentRangeFormattingEdits: true,\r\n    completionItems: true,\r\n    hovers: true,\r\n    documentSymbols: true,\r\n    tokens: true,\r\n    colors: true,\r\n    foldingRanges: true,\r\n    diagnostics: true,\r\n    selectionRanges: true\r\n};\r\nvar jsonDefaults = new LanguageServiceDefaultsImpl('json', diagnosticDefault, modeConfigurationDefault);\r\n// Export API\r\nfunction createAPI() {\r\n    return {\r\n        jsonDefaults: jsonDefaults\r\n    };\r\n}\r\nmonaco.languages.json = createAPI();\r\n// --- Registration to monaco editor ---\r\nfunction getMode() {\r\n    return import('./jsonMode.js');\r\n}\r\nmonaco.languages.register({\r\n    id: 'json',\r\n    extensions: ['.json', '.bowerrc', '.jshintrc', '.jscsrc', '.eslintrc', '.babelrc', '.har'],\r\n    aliases: ['JSON', 'json'],\r\n    mimetypes: ['application/json'],\r\n});\r\nmonaco.languages.onLanguage('json', function () {\r\n    getMode().then(function (mode) { return mode.setupMode(jsonDefaults); });\r\n});\r\n","import '../../editor/editor.api.js';\n/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\r\n'use strict';\r\nvar Emitter = monaco.Emitter;\r\n// --- HTML configuration and defaults ---------\r\nvar LanguageServiceDefaultsImpl = /** @class */ (function () {\r\n    function LanguageServiceDefaultsImpl(languageId, options, modeConfiguration) {\r\n        this._onDidChange = new Emitter();\r\n        this._languageId = languageId;\r\n        this.setOptions(options);\r\n        this.setModeConfiguration(modeConfiguration);\r\n    }\r\n    Object.defineProperty(LanguageServiceDefaultsImpl.prototype, \"onDidChange\", {\r\n        get: function () {\r\n            return this._onDidChange.event;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(LanguageServiceDefaultsImpl.prototype, \"languageId\", {\r\n        get: function () {\r\n            return this._languageId;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(LanguageServiceDefaultsImpl.prototype, \"options\", {\r\n        get: function () {\r\n            return this._options;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(LanguageServiceDefaultsImpl.prototype, \"modeConfiguration\", {\r\n        get: function () {\r\n            return this._modeConfiguration;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    LanguageServiceDefaultsImpl.prototype.setOptions = function (options) {\r\n        this._options = options || Object.create(null);\r\n        this._onDidChange.fire(this);\r\n    };\r\n    LanguageServiceDefaultsImpl.prototype.setModeConfiguration = function (modeConfiguration) {\r\n        this._modeConfiguration = modeConfiguration || Object.create(null);\r\n        this._onDidChange.fire(this);\r\n    };\r\n    ;\r\n    return LanguageServiceDefaultsImpl;\r\n}());\r\nexport { LanguageServiceDefaultsImpl };\r\nvar formatDefaults = {\r\n    tabSize: 4,\r\n    insertSpaces: false,\r\n    wrapLineLength: 120,\r\n    unformatted: 'default\": \"a, abbr, acronym, b, bdo, big, br, button, cite, code, dfn, em, i, img, input, kbd, label, map, object, q, samp, select, small, span, strong, sub, sup, textarea, tt, var',\r\n    contentUnformatted: 'pre',\r\n    indentInnerHtml: false,\r\n    preserveNewLines: true,\r\n    maxPreserveNewLines: null,\r\n    indentHandlebars: false,\r\n    endWithNewline: false,\r\n    extraLiners: 'head, body, /html',\r\n    wrapAttributes: 'auto'\r\n};\r\nvar htmlOptionsDefault = {\r\n    format: formatDefaults,\r\n    suggest: { html5: true, angular1: true, ionic: true }\r\n};\r\nvar handlebarOptionsDefault = {\r\n    format: formatDefaults,\r\n    suggest: { html5: true }\r\n};\r\nvar razorOptionsDefault = {\r\n    format: formatDefaults,\r\n    suggest: { html5: true, razor: true }\r\n};\r\nfunction getConfigurationDefault(languageId) {\r\n    return {\r\n        completionItems: true,\r\n        hovers: true,\r\n        documentSymbols: true,\r\n        links: true,\r\n        documentHighlights: true,\r\n        rename: true,\r\n        colors: true,\r\n        foldingRanges: true,\r\n        selectionRanges: true,\r\n        diagnostics: languageId === htmlLanguageId,\r\n        documentFormattingEdits: languageId === htmlLanguageId,\r\n        documentRangeFormattingEdits: languageId === htmlLanguageId // turned off for Razor and Handlebar\r\n    };\r\n}\r\nvar htmlLanguageId = 'html';\r\nvar handlebarsLanguageId = 'handlebars';\r\nvar razorLanguageId = 'razor';\r\nvar htmlDefaults = new LanguageServiceDefaultsImpl(htmlLanguageId, htmlOptionsDefault, getConfigurationDefault(htmlLanguageId));\r\nvar handlebarDefaults = new LanguageServiceDefaultsImpl(handlebarsLanguageId, handlebarOptionsDefault, getConfigurationDefault(handlebarsLanguageId));\r\nvar razorDefaults = new LanguageServiceDefaultsImpl(razorLanguageId, razorOptionsDefault, getConfigurationDefault(razorLanguageId));\r\n// Export API\r\nfunction createAPI() {\r\n    return {\r\n        htmlDefaults: htmlDefaults,\r\n        razorDefaults: razorDefaults,\r\n        handlebarDefaults: handlebarDefaults\r\n    };\r\n}\r\nmonaco.languages.html = createAPI();\r\n// --- Registration to monaco editor ---\r\nfunction getMode() {\r\n    return import('./htmlMode.js');\r\n}\r\nmonaco.languages.onLanguage(htmlLanguageId, function () {\r\n    getMode().then(function (mode) { return mode.setupMode(htmlDefaults); });\r\n});\r\nmonaco.languages.onLanguage(handlebarsLanguageId, function () {\r\n    getMode().then(function (mode) { return mode.setupMode(handlebarDefaults); });\r\n});\r\nmonaco.languages.onLanguage(razorLanguageId, function () {\r\n    getMode().then(function (mode) { return mode.setupMode(razorDefaults); });\r\n});\r\n","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports[\"default\"] = void 0;\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\nvar VimStatusBar =\n/*#__PURE__*/\nfunction () {\n  function VimStatusBar(node, editor) {\n    var _this = this;\n\n    var sanitizer = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : null;\n\n    _classCallCheck(this, VimStatusBar);\n\n    this.closeInput = function () {\n      _this.removeInputListeners();\n\n      _this.input = null;\n\n      _this.setSec('');\n\n      if (_this.editor) {\n        _this.editor.focus();\n      }\n    };\n\n    this.clear = function () {\n      _this.setInnerHtml_(_this.node, '');\n    };\n\n    this.inputKeyUp = function (e) {\n      var options = _this.input.options;\n\n      if (options && options.onKeyUp) {\n        options.onKeyUp(e, e.target.value, _this.closeInput);\n      }\n    };\n\n    this.inputBlur = function () {\n      var options = _this.input.options;\n\n      if (options.closeOnBlur) {\n        _this.closeInput();\n      }\n    };\n\n    this.inputKeyDown = function (e) {\n      var _this$input = _this.input,\n          options = _this$input.options,\n          callback = _this$input.callback;\n\n      if (options && options.onKeyDown && options.onKeyDown(e, e.target.value, _this.closeInput)) {\n        return;\n      }\n\n      if (e.keyCode === 27 || options && options.closeOnEnter !== false && e.keyCode == 13) {\n        _this.input.node.blur();\n\n        e.stopPropagation();\n\n        _this.closeInput();\n      }\n\n      if (e.keyCode === 13 && callback) {\n        e.stopPropagation();\n        e.preventDefault();\n        callback(e.target.value);\n      }\n    };\n\n    this.node = node;\n    this.modeInfoNode = document.createElement('span');\n    this.secInfoNode = document.createElement('span');\n    this.notifNode = document.createElement('span');\n    this.notifNode.className = 'vim-notification';\n    this.keyInfoNode = document.createElement('span');\n    this.keyInfoNode.setAttribute('style', 'float: right');\n    this.node.appendChild(this.modeInfoNode);\n    this.node.appendChild(this.secInfoNode);\n    this.node.appendChild(this.notifNode);\n    this.node.appendChild(this.keyInfoNode);\n    this.toggleVisibility(false);\n    this.editor = editor;\n    this.sanitizer = sanitizer;\n  }\n\n  _createClass(VimStatusBar, [{\n    key: \"setMode\",\n    value: function setMode(ev) {\n      if (ev.mode === 'visual' && ev.subMode === 'linewise') {\n        this.setText('--VISUAL LINE--');\n        return;\n      }\n\n      this.setText(\"--\".concat(ev.mode.toUpperCase(), \"--\"));\n    }\n  }, {\n    key: \"setKeyBuffer\",\n    value: function setKeyBuffer(key) {\n      this.keyInfoNode.textContent = key;\n    }\n  }, {\n    key: \"setSec\",\n    value: function setSec(text, callback, options) {\n      this.notifNode.textContent = '';\n\n      if (text === undefined) {\n        return;\n      }\n\n      this.setInnerHtml_(this.secInfoNode, text);\n      var input = this.secInfoNode.querySelector('input');\n\n      if (input) {\n        input.focus();\n        this.input = {\n          callback: callback,\n          options: options,\n          node: input\n        };\n\n        if (options) {\n          if (options.selectValueOnOpen) {\n            input.select();\n          }\n\n          if (options.value) {\n            input.value = options.value;\n          }\n        }\n\n        this.addInputListeners();\n      }\n\n      return this.closeInput;\n    }\n  }, {\n    key: \"setText\",\n    value: function setText(text) {\n      this.modeInfoNode.textContent = text;\n    }\n  }, {\n    key: \"toggleVisibility\",\n    value: function toggleVisibility(toggle) {\n      if (toggle) {\n        this.node.style.display = 'block';\n      } else {\n        this.node.style.display = 'none';\n      }\n\n      if (this.input) {\n        this.removeInputListeners();\n      }\n\n      clearInterval(this.notifTimeout);\n    }\n  }, {\n    key: \"addInputListeners\",\n    value: function addInputListeners() {\n      var node = this.input.node;\n      node.addEventListener('keyup', this.inputKeyUp);\n      node.addEventListener('keydown', this.inputKeyDown);\n      node.addEventListener('input', this.inputKeyInput);\n      node.addEventListener('blur', this.inputBlur);\n    }\n  }, {\n    key: \"removeInputListeners\",\n    value: function removeInputListeners() {\n      if (!this.input || !this.input.node) {\n        return;\n      }\n\n      var node = this.input.node;\n      node.removeEventListener('keyup', this.inputKeyUp);\n      node.removeEventListener('keydown', this.inputKeyDown);\n      node.removeEventListener('input', this.inputKeyInput);\n      node.removeEventListener('blur', this.inputBlur);\n    }\n  }, {\n    key: \"showNotification\",\n    value: function showNotification(text) {\n      var _this2 = this;\n\n      var sp = document.createElement('span');\n      this.setInnerHtml_(sp, text);\n      this.notifNode.textContent = sp.textContent;\n      this.notifTimeout = setTimeout(function () {\n        _this2.notifNode.textContent = '';\n      }, 5000);\n    }\n  }, {\n    key: \"setInnerHtml_\",\n    value: function setInnerHtml_(element, htmlContents) {\n      if (this.sanitizer) {\n        // Clear out previous contents first.\n        while (element.children.length) {\n          element.removeChild(element.children[0]);\n        }\n\n        element.appendChild(this.sanitizer(htmlContents));\n      } else {\n        element.innerHTML = htmlContents;\n      }\n    }\n  }]);\n\n  return VimStatusBar;\n}();\n\nexports[\"default\"] = VimStatusBar;","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nObject.defineProperty(exports, \"default\", {\n  enumerable: true,\n  get: function get() {\n    return _editor[\"default\"];\n  }\n});\nObject.defineProperty(exports, \"MonacoDiffEditor\", {\n  enumerable: true,\n  get: function get() {\n    return _diff[\"default\"];\n  }\n});\n\nvar _editor = _interopRequireDefault(require(\"./editor\"));\n\nvar _diff = _interopRequireDefault(require(\"./diff\"));\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { \"default\": obj }; }","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports[\"default\"] = void 0;\n\nvar monaco = _interopRequireWildcard(require(\"monaco-editor/esm/vs/editor/editor.api\"));\n\nvar _propTypes = _interopRequireDefault(require(\"prop-types\"));\n\nvar _react = _interopRequireDefault(require(\"react\"));\n\nvar _utils = require(\"./utils\");\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { \"default\": obj }; }\n\nfunction _getRequireWildcardCache() { if (typeof WeakMap !== \"function\") return null; var cache = new WeakMap(); _getRequireWildcardCache = function _getRequireWildcardCache() { return cache; }; return cache; }\n\nfunction _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } if (obj === null || _typeof(obj) !== \"object\" && typeof obj !== \"function\") { return { \"default\": obj }; } var cache = _getRequireWildcardCache(); if (cache && cache.has(obj)) { return cache.get(obj); } var newObj = {}; var hasPropertyDescriptor = Object.defineProperty && Object.getOwnPropertyDescriptor; for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) { var desc = hasPropertyDescriptor ? Object.getOwnPropertyDescriptor(obj, key) : null; if (desc && (desc.get || desc.set)) { Object.defineProperty(newObj, key, desc); } else { newObj[key] = obj[key]; } } } newObj[\"default\"] = obj; if (cache) { cache.set(obj, newObj); } return newObj; }\n\nfunction _typeof(obj) { \"@babel/helpers - typeof\"; if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") { _typeof = function _typeof(obj) { return typeof obj; }; } else { _typeof = function _typeof(obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }; } return _typeof(obj); }\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function\"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); if (superClass) _setPrototypeOf(subClass, superClass); }\n\nfunction _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }\n\nfunction _createSuper(Derived) { return function () { var Super = _getPrototypeOf(Derived), result; if (_isNativeReflectConstruct()) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _possibleConstructorReturn(self, call) { if (call && (_typeof(call) === \"object\" || typeof call === \"function\")) { return call; } return _assertThisInitialized(self); }\n\nfunction _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return self; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }\n\nfunction _getPrototypeOf(o) { _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return _getPrototypeOf(o); }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nvar MonacoEditor = /*#__PURE__*/function (_React$Component) {\n  _inherits(MonacoEditor, _React$Component);\n\n  var _super = _createSuper(MonacoEditor);\n\n  function MonacoEditor(props) {\n    var _this;\n\n    _classCallCheck(this, MonacoEditor);\n\n    _this = _super.call(this, props);\n\n    _defineProperty(_assertThisInitialized(_this), \"assignRef\", function (component) {\n      _this.containerElement = component;\n    });\n\n    _this.containerElement = undefined;\n    return _this;\n  }\n\n  _createClass(MonacoEditor, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      this.initMonaco();\n    }\n  }, {\n    key: \"componentDidUpdate\",\n    value: function componentDidUpdate(prevProps) {\n      var _this$props = this.props,\n          value = _this$props.value,\n          language = _this$props.language,\n          theme = _this$props.theme,\n          height = _this$props.height,\n          options = _this$props.options,\n          width = _this$props.width;\n      var editor = this.editor;\n      var model = editor.getModel();\n\n      if (this.props.value != null && this.props.value !== model.getValue()) {\n        this.__prevent_trigger_change_event = true;\n        this.editor.pushUndoStop();\n        model.pushEditOperations([], [{\n          range: model.getFullModelRange(),\n          text: value\n        }]);\n        this.editor.pushUndoStop();\n        this.__prevent_trigger_change_event = false;\n      }\n\n      if (prevProps.language !== language) {\n        monaco.editor.setModelLanguage(model, language);\n      }\n\n      if (prevProps.theme !== theme) {\n        monaco.editor.setTheme(theme);\n      }\n\n      if (editor && (width !== prevProps.width || height !== prevProps.height)) {\n        editor.layout();\n      }\n\n      if (prevProps.options !== options) {\n        editor.updateOptions(options);\n      }\n    }\n  }, {\n    key: \"componentWillUnmount\",\n    value: function componentWillUnmount() {\n      this.destroyMonaco();\n    }\n  }, {\n    key: \"destroyMonaco\",\n    value: function destroyMonaco() {\n      if (this.editor) {\n        this.editor.dispose();\n        var model = this.editor.getModel();\n\n        if (model) {\n          model.dispose();\n        }\n      }\n\n      if (this._subscription) {\n        this._subscription.dispose();\n      }\n    }\n  }, {\n    key: \"initMonaco\",\n    value: function initMonaco() {\n      var value = this.props.value != null ? this.props.value : this.props.defaultValue;\n      var _this$props2 = this.props,\n          language = _this$props2.language,\n          theme = _this$props2.theme,\n          options = _this$props2.options,\n          overrideServices = _this$props2.overrideServices;\n\n      if (this.containerElement) {\n        // Before initializing monaco editor\n        Object.assign(options, this.editorWillMount());\n        this.editor = monaco.editor.create(this.containerElement, _objectSpread({\n          value: value,\n          language: language\n        }, options, {}, theme ? {\n          theme: theme\n        } : {}), overrideServices); // After initializing monaco editor\n\n        this.editorDidMount(this.editor);\n      }\n    }\n  }, {\n    key: \"editorWillMount\",\n    value: function editorWillMount() {\n      var editorWillMount = this.props.editorWillMount;\n      var options = editorWillMount(monaco);\n      return options || {};\n    }\n  }, {\n    key: \"editorDidMount\",\n    value: function editorDidMount(editor) {\n      var _this2 = this;\n\n      this.props.editorDidMount(editor, monaco);\n      this._subscription = editor.onDidChangeModelContent(function (event) {\n        if (!_this2.__prevent_trigger_change_event) {\n          _this2.props.onChange(editor.getValue(), event);\n        }\n      });\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this$props3 = this.props,\n          width = _this$props3.width,\n          height = _this$props3.height;\n      var fixedWidth = (0, _utils.processSize)(width);\n      var fixedHeight = (0, _utils.processSize)(height);\n      var style = {\n        width: fixedWidth,\n        height: fixedHeight\n      };\n      return /*#__PURE__*/_react[\"default\"].createElement(\"div\", {\n        ref: this.assignRef,\n        style: style,\n        className: \"react-monaco-editor-container\"\n      });\n    }\n  }]);\n\n  return MonacoEditor;\n}(_react[\"default\"].Component);\n\nMonacoEditor.propTypes = {\n  width: _propTypes[\"default\"].oneOfType([_propTypes[\"default\"].string, _propTypes[\"default\"].number]),\n  height: _propTypes[\"default\"].oneOfType([_propTypes[\"default\"].string, _propTypes[\"default\"].number]),\n  value: _propTypes[\"default\"].string,\n  defaultValue: _propTypes[\"default\"].string,\n  language: _propTypes[\"default\"].string,\n  theme: _propTypes[\"default\"].string,\n  options: _propTypes[\"default\"].object,\n  overrideServices: _propTypes[\"default\"].object,\n  editorDidMount: _propTypes[\"default\"].func,\n  editorWillMount: _propTypes[\"default\"].func,\n  onChange: _propTypes[\"default\"].func\n};\nMonacoEditor.defaultProps = {\n  width: \"100%\",\n  height: \"100%\",\n  value: null,\n  defaultValue: \"\",\n  language: \"javascript\",\n  theme: null,\n  options: {},\n  overrideServices: {},\n  editorDidMount: _utils.noop,\n  editorWillMount: _utils.noop,\n  onChange: _utils.noop\n};\nvar _default = MonacoEditor;\nexports[\"default\"] = _default;","/**\n * Copyright (c) 2013-present, Facebook, Inc.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\n'use strict';\n\nvar ReactPropTypesSecret = require('./lib/ReactPropTypesSecret');\n\nfunction emptyFunction() {}\nfunction emptyFunctionWithReset() {}\nemptyFunctionWithReset.resetWarningCache = emptyFunction;\n\nmodule.exports = function() {\n  function shim(props, propName, componentName, location, propFullName, secret) {\n    if (secret === ReactPropTypesSecret) {\n      // It is still safe when called from React.\n      return;\n    }\n    var err = new Error(\n      'Calling PropTypes validators directly is not supported by the `prop-types` package. ' +\n      'Use PropTypes.checkPropTypes() to call them. ' +\n      'Read more at http://fb.me/use-check-prop-types'\n    );\n    err.name = 'Invariant Violation';\n    throw err;\n  };\n  shim.isRequired = shim;\n  function getShim() {\n    return shim;\n  };\n  // Important!\n  // Keep this list in sync with production version in `./factoryWithTypeCheckers.js`.\n  var ReactPropTypes = {\n    array: shim,\n    bool: shim,\n    func: shim,\n    number: shim,\n    object: shim,\n    string: shim,\n    symbol: shim,\n\n    any: shim,\n    arrayOf: getShim,\n    element: shim,\n    elementType: shim,\n    instanceOf: getShim,\n    node: shim,\n    objectOf: getShim,\n    oneOf: getShim,\n    oneOfType: getShim,\n    shape: getShim,\n    exact: getShim,\n\n    checkPropTypes: emptyFunctionWithReset,\n    resetWarningCache: emptyFunction\n  };\n\n  ReactPropTypes.PropTypes = ReactPropTypes;\n\n  return ReactPropTypes;\n};\n","/**\n * Copyright (c) 2013-present, Facebook, Inc.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\n'use strict';\n\nvar ReactPropTypesSecret = 'SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED';\n\nmodule.exports = ReactPropTypesSecret;\n","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports[\"default\"] = void 0;\n\nvar monaco = _interopRequireWildcard(require(\"monaco-editor/esm/vs/editor/editor.api\"));\n\nvar _propTypes = _interopRequireDefault(require(\"prop-types\"));\n\nvar _react = _interopRequireDefault(require(\"react\"));\n\nvar _utils = require(\"./utils\");\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { \"default\": obj }; }\n\nfunction _getRequireWildcardCache() { if (typeof WeakMap !== \"function\") return null; var cache = new WeakMap(); _getRequireWildcardCache = function _getRequireWildcardCache() { return cache; }; return cache; }\n\nfunction _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } if (obj === null || _typeof(obj) !== \"object\" && typeof obj !== \"function\") { return { \"default\": obj }; } var cache = _getRequireWildcardCache(); if (cache && cache.has(obj)) { return cache.get(obj); } var newObj = {}; var hasPropertyDescriptor = Object.defineProperty && Object.getOwnPropertyDescriptor; for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) { var desc = hasPropertyDescriptor ? Object.getOwnPropertyDescriptor(obj, key) : null; if (desc && (desc.get || desc.set)) { Object.defineProperty(newObj, key, desc); } else { newObj[key] = obj[key]; } } } newObj[\"default\"] = obj; if (cache) { cache.set(obj, newObj); } return newObj; }\n\nfunction _typeof(obj) { \"@babel/helpers - typeof\"; if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") { _typeof = function _typeof(obj) { return typeof obj; }; } else { _typeof = function _typeof(obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }; } return _typeof(obj); }\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function\"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); if (superClass) _setPrototypeOf(subClass, superClass); }\n\nfunction _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }\n\nfunction _createSuper(Derived) { return function () { var Super = _getPrototypeOf(Derived), result; if (_isNativeReflectConstruct()) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _possibleConstructorReturn(self, call) { if (call && (_typeof(call) === \"object\" || typeof call === \"function\")) { return call; } return _assertThisInitialized(self); }\n\nfunction _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return self; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }\n\nfunction _getPrototypeOf(o) { _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return _getPrototypeOf(o); }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nvar MonacoDiffEditor = /*#__PURE__*/function (_React$Component) {\n  _inherits(MonacoDiffEditor, _React$Component);\n\n  var _super = _createSuper(MonacoDiffEditor);\n\n  function MonacoDiffEditor(props) {\n    var _this;\n\n    _classCallCheck(this, MonacoDiffEditor);\n\n    _this = _super.call(this, props);\n\n    _defineProperty(_assertThisInitialized(_this), \"assignRef\", function (component) {\n      _this.containerElement = component;\n    });\n\n    _this.containerElement = undefined;\n    return _this;\n  }\n\n  _createClass(MonacoDiffEditor, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      this.initMonaco();\n    }\n  }, {\n    key: \"componentDidUpdate\",\n    value: function componentDidUpdate(prevProps) {\n      var _this$props = this.props,\n          language = _this$props.language,\n          theme = _this$props.theme,\n          height = _this$props.height,\n          options = _this$props.options,\n          width = _this$props.width;\n\n      var _this$editor$getModel = this.editor.getModel(),\n          original = _this$editor$getModel.original,\n          modified = _this$editor$getModel.modified;\n\n      if (this.props.original !== original.getValue()) {\n        original.setValue(this.props.original);\n      }\n\n      if (this.props.value != null && this.props.value !== modified.getValue()) {\n        this.__prevent_trigger_change_event = true;\n        this.editor.modifiedEditor.pushUndoStop();\n        modified.pushEditOperations([], [{\n          range: modified.getFullModelRange(),\n          text: this.props.value\n        }]);\n        this.editor.modifiedEditor.pushUndoStop();\n        this.__prevent_trigger_change_event = false;\n      }\n\n      if (prevProps.language !== language) {\n        monaco.editor.setModelLanguage(original, language);\n        monaco.editor.setModelLanguage(modified, language);\n      }\n\n      if (prevProps.theme !== theme) {\n        monaco.editor.setTheme(theme);\n      }\n\n      if (this.editor && (width !== prevProps.width || height !== prevProps.height)) {\n        this.editor.layout();\n      }\n\n      if (prevProps.options !== options) {\n        this.editor.updateOptions(options);\n      }\n    }\n  }, {\n    key: \"componentWillUnmount\",\n    value: function componentWillUnmount() {\n      this.destroyMonaco();\n    }\n  }, {\n    key: \"editorWillMount\",\n    value: function editorWillMount() {\n      var editorWillMount = this.props.editorWillMount;\n      var options = editorWillMount(monaco);\n      return options || {};\n    }\n  }, {\n    key: \"editorDidMount\",\n    value: function editorDidMount(editor) {\n      var _this2 = this;\n\n      this.props.editorDidMount(editor, monaco);\n\n      var _editor$getModel = editor.getModel(),\n          modified = _editor$getModel.modified;\n\n      this._subscription = modified.onDidChangeContent(function (event) {\n        if (!_this2.__prevent_trigger_change_event) {\n          _this2.props.onChange(modified.getValue(), event);\n        }\n      });\n    }\n  }, {\n    key: \"initModels\",\n    value: function initModels(value, original) {\n      var language = this.props.language;\n      var originalModel = monaco.editor.createModel(original, language);\n      var modifiedModel = monaco.editor.createModel(value, language);\n      this.editor.setModel({\n        original: originalModel,\n        modified: modifiedModel\n      });\n    }\n  }, {\n    key: \"initMonaco\",\n    value: function initMonaco() {\n      var value = this.props.value != null ? this.props.value : this.props.defaultValue;\n      var _this$props2 = this.props,\n          original = _this$props2.original,\n          theme = _this$props2.theme,\n          options = _this$props2.options,\n          overrideServices = _this$props2.overrideServices;\n\n      if (this.containerElement) {\n        // Before initializing monaco editor\n        this.editorWillMount();\n        this.editor = monaco.editor.createDiffEditor(this.containerElement, _objectSpread({}, options, {}, theme ? {\n          theme: theme\n        } : {}), overrideServices); // After initializing monaco editor\n\n        this.initModels(value, original);\n        this.editorDidMount(this.editor);\n      }\n    }\n  }, {\n    key: \"destroyMonaco\",\n    value: function destroyMonaco() {\n      if (this.editor) {\n        this.editor.dispose();\n\n        var _this$editor$getModel2 = this.editor.getModel(),\n            original = _this$editor$getModel2.original,\n            modified = _this$editor$getModel2.modified;\n\n        if (original) {\n          original.dispose();\n        }\n\n        if (modified) {\n          modified.dispose();\n        }\n      }\n\n      if (this._subscription) {\n        this._subscription.dispose();\n      }\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this$props3 = this.props,\n          width = _this$props3.width,\n          height = _this$props3.height;\n      var fixedWidth = (0, _utils.processSize)(width);\n      var fixedHeight = (0, _utils.processSize)(height);\n      var style = {\n        width: fixedWidth,\n        height: fixedHeight\n      };\n      return /*#__PURE__*/_react[\"default\"].createElement(\"div\", {\n        ref: this.assignRef,\n        style: style,\n        className: \"react-monaco-editor-container\"\n      });\n    }\n  }]);\n\n  return MonacoDiffEditor;\n}(_react[\"default\"].Component);\n\nMonacoDiffEditor.propTypes = {\n  width: _propTypes[\"default\"].oneOfType([_propTypes[\"default\"].string, _propTypes[\"default\"].number]),\n  height: _propTypes[\"default\"].oneOfType([_propTypes[\"default\"].string, _propTypes[\"default\"].number]),\n  original: _propTypes[\"default\"].string,\n  value: _propTypes[\"default\"].string,\n  defaultValue: _propTypes[\"default\"].string,\n  language: _propTypes[\"default\"].string,\n  theme: _propTypes[\"default\"].string,\n  options: _propTypes[\"default\"].object,\n  overrideServices: _propTypes[\"default\"].object,\n  editorDidMount: _propTypes[\"default\"].func,\n  editorWillMount: _propTypes[\"default\"].func,\n  onChange: _propTypes[\"default\"].func\n};\nMonacoDiffEditor.defaultProps = {\n  width: \"100%\",\n  height: \"100%\",\n  original: null,\n  value: null,\n  defaultValue: \"\",\n  language: \"javascript\",\n  theme: null,\n  options: {},\n  overrideServices: {},\n  editorDidMount: _utils.noop,\n  editorWillMount: _utils.noop,\n  onChange: _utils.noop\n};\nvar _default = MonacoDiffEditor;\nexports[\"default\"] = _default;","/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\r\n'use strict';\r\nimport { registerLanguage } from '../_.contribution.js';\r\nregisterLanguage({\r\n    id: 'abap',\r\n    extensions: ['.abap'],\r\n    aliases: ['abap', 'ABAP'],\r\n    loader: function () { return import('./abap.js'); }\r\n});\r\n","/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\r\n'use strict';\r\nimport { registerLanguage } from '../_.contribution.js';\r\nregisterLanguage({\r\n    id: 'apex',\r\n    extensions: ['.cls'],\r\n    aliases: ['Apex', 'apex'],\r\n    mimetypes: ['text/x-apex-source', 'text/x-apex'],\r\n    loader: function () { return import('./apex.js'); }\r\n});\r\n","/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\r\n'use strict';\r\nimport { registerLanguage } from '../_.contribution.js';\r\nregisterLanguage({\r\n    id: 'azcli',\r\n    extensions: ['.azcli'],\r\n    aliases: ['Azure CLI', 'azcli'],\r\n    loader: function () { return import('./azcli.js'); }\r\n});\r\n","/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\r\n'use strict';\r\nimport { registerLanguage } from '../_.contribution.js';\r\nregisterLanguage({\r\n    id: 'bat',\r\n    extensions: ['.bat', '.cmd'],\r\n    aliases: ['Batch', 'bat'],\r\n    loader: function () { return import('./bat.js'); }\r\n});\r\n","/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\r\n'use strict';\r\nimport { registerLanguage } from '../_.contribution.js';\r\nregisterLanguage({\r\n    id: 'cameligo',\r\n    extensions: ['.mligo'],\r\n    aliases: ['Cameligo'],\r\n    loader: function () { return import('./cameligo.js'); }\r\n});\r\n","/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\r\n'use strict';\r\nimport { registerLanguage } from '../_.contribution.js';\r\nregisterLanguage({\r\n    id: 'clojure',\r\n    extensions: ['.clj', '.cljs', '.cljc', '.edn'],\r\n    aliases: ['clojure', 'Clojure'],\r\n    loader: function () { return import('./clojure.js'); }\r\n});\r\n","/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\r\n'use strict';\r\nimport { registerLanguage } from '../_.contribution.js';\r\nregisterLanguage({\r\n    id: 'coffeescript',\r\n    extensions: ['.coffee'],\r\n    aliases: ['CoffeeScript', 'coffeescript', 'coffee'],\r\n    mimetypes: ['text/x-coffeescript', 'text/coffeescript'],\r\n    loader: function () { return import('./coffee.js'); }\r\n});\r\n","/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\r\n'use strict';\r\nimport { registerLanguage } from '../_.contribution.js';\r\nregisterLanguage({\r\n    id: 'c',\r\n    extensions: ['.c', '.h'],\r\n    aliases: ['C', 'c'],\r\n    loader: function () { return import('./cpp.js'); }\r\n});\r\nregisterLanguage({\r\n    id: 'cpp',\r\n    extensions: ['.cpp', '.cc', '.cxx', '.hpp', '.hh', '.hxx'],\r\n    aliases: ['C++', 'Cpp', 'cpp'],\r\n    loader: function () { return import('./cpp.js'); }\r\n});\r\n","/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\r\n'use strict';\r\nimport { registerLanguage } from '../_.contribution.js';\r\nregisterLanguage({\r\n    id: 'csharp',\r\n    extensions: ['.cs', '.csx', '.cake'],\r\n    aliases: ['C#', 'csharp'],\r\n    loader: function () { return import('./csharp.js'); }\r\n});\r\n","/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\r\n'use strict';\r\nimport { registerLanguage } from '../_.contribution.js';\r\nregisterLanguage({\r\n    id: 'csp',\r\n    extensions: [],\r\n    aliases: ['CSP', 'csp'],\r\n    loader: function () { return import('./csp.js'); }\r\n});\r\n","/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\r\n'use strict';\r\nimport { registerLanguage } from '../_.contribution.js';\r\nregisterLanguage({\r\n    id: 'css',\r\n    extensions: ['.css'],\r\n    aliases: ['CSS', 'css'],\r\n    mimetypes: ['text/css'],\r\n    loader: function () { return import('./css.js'); }\r\n});\r\n","/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\r\n'use strict';\r\nimport { registerLanguage } from '../_.contribution.js';\r\nregisterLanguage({\r\n    id: 'dockerfile',\r\n    extensions: ['.dockerfile'],\r\n    filenames: ['Dockerfile'],\r\n    aliases: ['Dockerfile'],\r\n    loader: function () { return import('./dockerfile.js'); }\r\n});\r\n","/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\r\n'use strict';\r\nimport { registerLanguage } from '../_.contribution.js';\r\nregisterLanguage({\r\n    id: 'fsharp',\r\n    extensions: ['.fs', '.fsi', '.ml', '.mli', '.fsx', '.fsscript'],\r\n    aliases: ['F#', 'FSharp', 'fsharp'],\r\n    loader: function () { return import('./fsharp.js'); }\r\n});\r\n","/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\r\n'use strict';\r\nimport { registerLanguage } from '../_.contribution.js';\r\nregisterLanguage({\r\n    id: 'go',\r\n    extensions: ['.go'],\r\n    aliases: ['Go'],\r\n    loader: function () { return import('./go.js'); }\r\n});\r\n","/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\r\n'use strict';\r\nimport { registerLanguage } from '../_.contribution.js';\r\nregisterLanguage({\r\n    id: 'graphql',\r\n    extensions: ['.graphql', '.gql'],\r\n    aliases: ['GraphQL', 'graphql', 'gql'],\r\n    mimetypes: ['application/graphql'],\r\n    loader: function () { return import('./graphql.js'); }\r\n});\r\n","/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\r\n'use strict';\r\nimport { registerLanguage } from '../_.contribution.js';\r\nregisterLanguage({\r\n    id: 'handlebars',\r\n    extensions: ['.handlebars', '.hbs'],\r\n    aliases: ['Handlebars', 'handlebars'],\r\n    mimetypes: ['text/x-handlebars-template'],\r\n    loader: function () { return import('./handlebars.js'); }\r\n});\r\n","/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\r\n'use strict';\r\nimport { registerLanguage } from '../_.contribution.js';\r\nregisterLanguage({\r\n    id: 'html',\r\n    extensions: ['.html', '.htm', '.shtml', '.xhtml', '.mdoc', '.jsp', '.asp', '.aspx', '.jshtm'],\r\n    aliases: ['HTML', 'htm', 'html', 'xhtml'],\r\n    mimetypes: ['text/html', 'text/x-jshtm', 'text/template', 'text/ng-template'],\r\n    loader: function () { return import('./html.js'); }\r\n});\r\n","/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\r\n'use strict';\r\nimport { registerLanguage } from '../_.contribution.js';\r\nregisterLanguage({\r\n    id: 'ini',\r\n    extensions: ['.ini', '.properties', '.gitconfig'],\r\n    filenames: ['config', '.gitattributes', '.gitconfig', '.editorconfig'],\r\n    aliases: ['Ini', 'ini'],\r\n    loader: function () { return import('./ini.js'); }\r\n});\r\n","/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\r\n'use strict';\r\nimport { registerLanguage } from '../_.contribution.js';\r\nregisterLanguage({\r\n    id: 'java',\r\n    extensions: ['.java', '.jav'],\r\n    aliases: ['Java', 'java'],\r\n    mimetypes: ['text/x-java-source', 'text/x-java'],\r\n    loader: function () { return import('./java.js'); }\r\n});\r\n","/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\r\n'use strict';\r\nimport { registerLanguage } from '../_.contribution.js';\r\nregisterLanguage({\r\n    id: 'kotlin',\r\n    extensions: ['.kt'],\r\n    aliases: ['Kotlin', 'kotlin'],\r\n    mimetypes: ['text/x-kotlin-source', 'text/x-kotlin'],\r\n    loader: function () { return import('./kotlin.js'); }\r\n});\r\n","/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\r\n'use strict';\r\nimport { registerLanguage } from '../_.contribution.js';\r\nregisterLanguage({\r\n    id: 'less',\r\n    extensions: ['.less'],\r\n    aliases: ['Less', 'less'],\r\n    mimetypes: ['text/x-less', 'text/less'],\r\n    loader: function () { return import('./less.js'); }\r\n});\r\n","/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\r\n'use strict';\r\nimport { registerLanguage } from '../_.contribution.js';\r\nregisterLanguage({\r\n    id: 'lua',\r\n    extensions: ['.lua'],\r\n    aliases: ['Lua', 'lua'],\r\n    loader: function () { return import('./lua.js'); }\r\n});\r\n","/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\r\n'use strict';\r\nimport { registerLanguage } from '../_.contribution.js';\r\nregisterLanguage({\r\n    id: 'markdown',\r\n    extensions: ['.md', '.markdown', '.mdown', '.mkdn', '.mkd', '.mdwn', '.mdtxt', '.mdtext'],\r\n    aliases: ['Markdown', 'markdown'],\r\n    loader: function () { return import('./markdown.js'); }\r\n});\r\n","/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\r\n'use strict';\r\nimport { registerLanguage } from '../_.contribution.js';\r\nregisterLanguage({\r\n    id: 'mips',\r\n    extensions: ['.s'],\r\n    aliases: ['MIPS', 'MIPS-V'],\r\n    mimetypes: ['text/x-mips', 'text/mips', 'text/plaintext'],\r\n    loader: function () { return import('./mips.js'); }\r\n});\r\n","/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\r\n'use strict';\r\nimport { registerLanguage } from '../_.contribution.js';\r\nregisterLanguage({\r\n    id: 'msdax',\r\n    extensions: ['.dax', '.msdax'],\r\n    aliases: ['DAX', 'MSDAX'],\r\n    loader: function () { return import('./msdax.js'); }\r\n});\r\n","/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\r\n'use strict';\r\nimport { registerLanguage } from '../_.contribution.js';\r\nregisterLanguage({\r\n    id: 'mysql',\r\n    extensions: [],\r\n    aliases: ['MySQL', 'mysql'],\r\n    loader: function () { return import('./mysql.js'); }\r\n});\r\n","/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\r\n'use strict';\r\nimport { registerLanguage } from '../_.contribution.js';\r\nregisterLanguage({\r\n    id: 'objective-c',\r\n    extensions: ['.m'],\r\n    aliases: ['Objective-C'],\r\n    loader: function () { return import('./objective-c.js'); }\r\n});\r\n","/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\r\n'use strict';\r\nimport { registerLanguage } from '../_.contribution.js';\r\nregisterLanguage({\r\n    id: 'pascal',\r\n    extensions: ['.pas', '.p', '.pp'],\r\n    aliases: ['Pascal', 'pas'],\r\n    mimetypes: ['text/x-pascal-source', 'text/x-pascal'],\r\n    loader: function () { return import('./pascal.js'); }\r\n});\r\n","/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\r\n'use strict';\r\nimport { registerLanguage } from '../_.contribution.js';\r\nregisterLanguage({\r\n    id: 'pascaligo',\r\n    extensions: ['.ligo'],\r\n    aliases: ['Pascaligo', 'ligo'],\r\n    loader: function () { return import('./pascaligo.js'); }\r\n});\r\n","/*---------------------------------------------------------------------------------------------\r\n*  Copyright (c) Microsoft Corporation. All rights reserved.\r\n*  Licensed under the MIT License. See License.txt in the project root for license information.\r\n*--------------------------------------------------------------------------------------------*/\r\n'use strict';\r\nimport { registerLanguage } from '../_.contribution.js';\r\nregisterLanguage({\r\n    id: 'perl',\r\n    extensions: ['.pl'],\r\n    aliases: ['Perl', 'pl'],\r\n    loader: function () { return import('./perl.js'); },\r\n});\r\n","/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\r\n'use strict';\r\nimport { registerLanguage } from '../_.contribution.js';\r\nregisterLanguage({\r\n    id: 'pgsql',\r\n    extensions: [],\r\n    aliases: ['PostgreSQL', 'postgres', 'pg', 'postgre'],\r\n    loader: function () { return import('./pgsql.js'); }\r\n});\r\n","/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\r\n'use strict';\r\nimport { registerLanguage } from '../_.contribution.js';\r\nregisterLanguage({\r\n    id: 'php',\r\n    extensions: ['.php', '.php4', '.php5', '.phtml', '.ctp'],\r\n    aliases: ['PHP', 'php'],\r\n    mimetypes: ['application/x-php'],\r\n    loader: function () { return import('./php.js'); }\r\n});\r\n","/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\r\n'use strict';\r\nimport { registerLanguage } from '../_.contribution.js';\r\nregisterLanguage({\r\n    id: 'postiats',\r\n    extensions: ['.dats', '.sats', '.hats'],\r\n    aliases: ['ATS', 'ATS/Postiats'],\r\n    loader: function () { return import('./postiats.js'); }\r\n});\r\n","/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\r\n'use strict';\r\nimport { registerLanguage } from '../_.contribution.js';\r\nregisterLanguage({\r\n    id: 'powerquery',\r\n    extensions: ['.pq', '.pqm'],\r\n    aliases: ['PQ', 'M', 'Power Query', 'Power Query M'],\r\n    loader: function () { return import('./powerquery.js'); }\r\n});\r\n","/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\r\n'use strict';\r\nimport { registerLanguage } from '../_.contribution.js';\r\nregisterLanguage({\r\n    id: 'powershell',\r\n    extensions: ['.ps1', '.psm1', '.psd1'],\r\n    aliases: ['PowerShell', 'powershell', 'ps', 'ps1'],\r\n    loader: function () { return import('./powershell.js'); }\r\n});\r\n","/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\r\n'use strict';\r\nimport { registerLanguage } from '../_.contribution.js';\r\nregisterLanguage({\r\n    id: 'pug',\r\n    extensions: ['.jade', '.pug'],\r\n    aliases: ['Pug', 'Jade', 'jade'],\r\n    loader: function () { return import('./pug.js'); }\r\n});\r\n","/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\r\n'use strict';\r\nimport { registerLanguage } from '../_.contribution.js';\r\nregisterLanguage({\r\n    id: 'python',\r\n    extensions: ['.py', '.rpy', '.pyw', '.cpy', '.gyp', '.gypi'],\r\n    aliases: ['Python', 'py'],\r\n    firstLine: '^#!/.*\\\\bpython[0-9.-]*\\\\b',\r\n    loader: function () { return import('./python.js'); }\r\n});\r\n","/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\r\n'use strict';\r\nimport { registerLanguage } from '../_.contribution.js';\r\nregisterLanguage({\r\n    id: 'r',\r\n    extensions: ['.r', '.rhistory', '.rprofile', '.rt'],\r\n    aliases: ['R', 'r'],\r\n    loader: function () { return import('./r.js'); }\r\n});\r\n","/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\r\n'use strict';\r\nimport { registerLanguage } from '../_.contribution.js';\r\nregisterLanguage({\r\n    id: 'razor',\r\n    extensions: ['.cshtml'],\r\n    aliases: ['Razor', 'razor'],\r\n    mimetypes: ['text/x-cshtml'],\r\n    loader: function () { return import('./razor.js'); }\r\n});\r\n","/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\r\n'use strict';\r\nimport { registerLanguage } from '../_.contribution.js';\r\nregisterLanguage({\r\n    id: 'redis',\r\n    extensions: ['.redis'],\r\n    aliases: ['redis'],\r\n    loader: function () { return import('./redis.js'); }\r\n});\r\n","/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\r\n'use strict';\r\nimport { registerLanguage } from '../_.contribution.js';\r\nregisterLanguage({\r\n    id: 'redshift',\r\n    extensions: [],\r\n    aliases: ['Redshift', 'redshift'],\r\n    loader: function () { return import('./redshift.js'); }\r\n});\r\n","/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\r\n'use strict';\r\nimport { registerLanguage } from '../_.contribution.js';\r\nregisterLanguage({\r\n    id: 'restructuredtext',\r\n    extensions: ['.rst'],\r\n    aliases: ['reStructuredText', 'restructuredtext'],\r\n    loader: function () { return import('./restructuredtext.js'); }\r\n});\r\n","/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\r\n'use strict';\r\nimport { registerLanguage } from '../_.contribution.js';\r\nregisterLanguage({\r\n    id: 'ruby',\r\n    extensions: ['.rb', '.rbx', '.rjs', '.gemspec', '.pp'],\r\n    filenames: ['rakefile'],\r\n    aliases: ['Ruby', 'rb'],\r\n    loader: function () { return import('./ruby.js'); }\r\n});\r\n","/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\r\n'use strict';\r\nimport { registerLanguage } from '../_.contribution.js';\r\nregisterLanguage({\r\n    id: 'rust',\r\n    extensions: ['.rs', '.rlib'],\r\n    aliases: ['Rust', 'rust'],\r\n    loader: function () { return import('./rust.js'); }\r\n});\r\n","/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\r\n'use strict';\r\nimport { registerLanguage } from '../_.contribution.js';\r\nregisterLanguage({\r\n    id: 'sb',\r\n    extensions: ['.sb'],\r\n    aliases: ['Small Basic', 'sb'],\r\n    loader: function () { return import('./sb.js'); }\r\n});\r\n","/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\r\n'use strict';\r\nimport { registerLanguage } from '../_.contribution.js';\r\nregisterLanguage({\r\n    id: 'scheme',\r\n    extensions: ['.scm', '.ss', '.sch', '.rkt'],\r\n    aliases: ['scheme', 'Scheme'],\r\n    loader: function () { return import('./scheme.js'); },\r\n});\r\n","/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\r\n'use strict';\r\nimport { registerLanguage } from '../_.contribution.js';\r\nregisterLanguage({\r\n    id: 'scss',\r\n    extensions: ['.scss'],\r\n    aliases: ['Sass', 'sass', 'scss'],\r\n    mimetypes: ['text/x-scss', 'text/scss'],\r\n    loader: function () { return import('./scss.js'); }\r\n});\r\n","/*---------------------------------------------------------------------------------------------\r\n*  Copyright (c) Microsoft Corporation. All rights reserved.\r\n*  Licensed under the MIT License. See License.txt in the project root for license information.\r\n*--------------------------------------------------------------------------------------------*/\r\n'use strict';\r\nimport { registerLanguage } from '../_.contribution.js';\r\nregisterLanguage({\r\n    id: 'shell',\r\n    extensions: ['.sh', '.bash'],\r\n    aliases: ['Shell', 'sh'],\r\n    loader: function () { return import('./shell.js'); },\r\n});\r\n","/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\r\n'use strict';\r\nimport { registerLanguage } from '../_.contribution.js';\r\nregisterLanguage({\r\n    id: 'sol',\r\n    extensions: ['.sol'],\r\n    aliases: ['sol', 'solidity', 'Solidity'],\r\n    loader: function () { return import('./solidity.js'); }\r\n});\r\n","/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\r\n'use strict';\r\nimport { registerLanguage } from '../_.contribution.js';\r\nregisterLanguage({\r\n    id: 'aes',\r\n    extensions: ['.aes'],\r\n    aliases: ['aes', 'sophia', 'Sophia'],\r\n    loader: function () { return import('./sophia.js'); }\r\n});\r\n","/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\r\n'use strict';\r\nimport { registerLanguage } from '../_.contribution.js';\r\nregisterLanguage({\r\n    id: 'sql',\r\n    extensions: ['.sql'],\r\n    aliases: ['SQL'],\r\n    loader: function () { return import('./sql.js'); }\r\n});\r\n","/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\r\n'use strict';\r\nimport { registerLanguage } from '../_.contribution.js';\r\nregisterLanguage({\r\n    id: 'st',\r\n    extensions: ['.st', '.iecst', '.iecplc', '.lc3lib'],\r\n    aliases: ['StructuredText', 'scl', 'stl'],\r\n    loader: function () { return import('./st.js'); }\r\n});\r\n","/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\r\n'use strict';\r\nimport { registerLanguage } from '../_.contribution.js';\r\nregisterLanguage({\r\n    id: 'swift',\r\n    aliases: ['Swift', 'swift'],\r\n    extensions: ['.swift'],\r\n    mimetypes: ['text/swift'],\r\n    loader: function () { return import('./swift.js'); }\r\n});\r\n","/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\r\n'use strict';\r\nimport { registerLanguage } from '../_.contribution.js';\r\nregisterLanguage({\r\n    id: 'tcl',\r\n    extensions: ['.tcl'],\r\n    aliases: ['tcl', 'Tcl', 'tcltk', 'TclTk', 'tcl/tk', 'Tcl/Tk'],\r\n    loader: function () { return import('./tcl.js'); }\r\n});\r\n","/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\r\n'use strict';\r\nimport { registerLanguage } from '../_.contribution.js';\r\nregisterLanguage({\r\n    id: 'twig',\r\n    extensions: ['.twig'],\r\n    aliases: ['Twig', 'twig'],\r\n    mimetypes: ['text/x-twig'],\r\n    loader: function () { return import('./twig.js'); }\r\n});\r\n","/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\r\n'use strict';\r\nimport { registerLanguage } from '../_.contribution.js';\r\nregisterLanguage({\r\n    id: 'vb',\r\n    extensions: ['.vb'],\r\n    aliases: ['Visual Basic', 'vb'],\r\n    loader: function () { return import('./vb.js'); }\r\n});\r\n","/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\r\n'use strict';\r\nimport { registerLanguage } from '../_.contribution.js';\r\nregisterLanguage({\r\n    id: 'xml',\r\n    extensions: ['.xml', '.dtd', '.ascx', '.csproj', '.config', '.wxi', '.wxl', '.wxs', '.xaml', '.svg', '.svgz', '.opf', '.xsl'],\r\n    firstLine: '(\\\\<\\\\?xml.*)|(\\\\<svg)|(\\\\<\\\\!doctype\\\\s+svg)',\r\n    aliases: ['XML', 'xml'],\r\n    mimetypes: ['text/xml', 'application/xml', 'application/xaml+xml', 'application/xml-dtd'],\r\n    loader: function () { return import('./xml.js'); }\r\n});\r\n","/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\r\n'use strict';\r\nimport { registerLanguage } from '../_.contribution.js';\r\nregisterLanguage({\r\n    id: 'yaml',\r\n    extensions: ['.yaml', '.yml'],\r\n    aliases: ['YAML', 'yaml', 'YML', 'yml'],\r\n    mimetypes: ['application/x-yaml'],\r\n    loader: function () { return import('./yaml.js'); }\r\n});\r\n","/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\r\nvar __extends = (this && this.__extends) || (function () {\r\n    var extendStatics = function (d, b) {\r\n        extendStatics = Object.setPrototypeOf ||\r\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n        return extendStatics(d, b);\r\n    };\r\n    return function (d, b) {\r\n        extendStatics(d, b);\r\n        function __() { this.constructor = d; }\r\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n    };\r\n})();\r\nimport * as nls from '../../../nls.js';\r\nimport { EditorAction, registerEditorAction } from '../../browser/editorExtensions.js';\r\nimport { StopWatch } from '../../../base/common/stopwatch.js';\r\nvar ForceRetokenizeAction = /** @class */ (function (_super) {\r\n    __extends(ForceRetokenizeAction, _super);\r\n    function ForceRetokenizeAction() {\r\n        return _super.call(this, {\r\n            id: 'editor.action.forceRetokenize',\r\n            label: nls.localize('forceRetokenize', \"Developer: Force Retokenize\"),\r\n            alias: 'Developer: Force Retokenize',\r\n            precondition: undefined\r\n        }) || this;\r\n    }\r\n    ForceRetokenizeAction.prototype.run = function (accessor, editor) {\r\n        if (!editor.hasModel()) {\r\n            return;\r\n        }\r\n        var model = editor.getModel();\r\n        model.resetTokenization();\r\n        var sw = new StopWatch(true);\r\n        model.forceTokenization(model.getLineCount());\r\n        sw.stop();\r\n        console.log(\"tokenization took \" + sw.elapsed());\r\n    };\r\n    return ForceRetokenizeAction;\r\n}(EditorAction));\r\nregisterEditorAction(ForceRetokenizeAction);\r\n"],"sourceRoot":""}