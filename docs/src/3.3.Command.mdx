import CommandDemo from './jsx/Command.js';

# Command

Command is the base class for all regl-based drawing commands. Subclasses should override getDrawProps and (and optionally getHitmapProps). Note: getHitmapProps is not implemented in this base class.

| Name         | optional | type     | Default | Description                                                                       |
| ------------ | -------- | -------- | ------- |
| `layerIndex` | yes      | `number` |         | defines the draw order of each command, e.g. -1 will put the shape in lower layer |


Sample usage:
```js
import Worldview, { withPose, Command } from 'regl-worldview';

// define our regl command
const reglTriangle = () => ({
  vert: `
    precision mediump float;
    attribute vec2 position;
    void main () {
      gl_Position = vec4(position, 0, 1);
    }
  `
  frag: `
    precision mediump float;
    uniform vec4 color;
    void main () {
      gl_FragColor = color;
  }`,
  attributes: {
    position: (context, props) => props.points,
  },
  uniforms: {
    color: (context, props) => props.color,
  }
  count: (context, props) => props.points.length,
});

class Triangle extends React.Component {
  static defaultProps = {
    color: [1, 0, 0, 1],
  }

  render() {
    const drawProps = {
      color: this.props.color,
      points: [
        [-1, 0],
        [0, -1],
        [1, 1]
      ]
    };
    console.log('hit')
    return <Command reglCommand={reglTriangle} drawProps={drawProps} />
  }
}

// usage
function CommandDemo() {
  return (
    <Worldview>
      <Triangle color={[0, 0, 1, 1]} />
    </Worldview>
  );
}
```

<CommandDemo />

## makeCommand

When you have children as the drawProps input, it's useful to simply call makeCommand
which creates a regl component automatically based on the regl command supplied. It also handles basic hitmap
interactions. You'll want to return a `<Command />` component directly from render if the React children is not the drawProps input or if
additional data processing is needed to generate the drawProps/hitmapProps.

Sample usage:

```js
const Cubes = makeCommand('Cubes', rawReglCommand);
```
